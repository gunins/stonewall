/*! stonewalljs 2016-03-25 */
"use strict";function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();define("templating/utils/List",[],function(){var a=function(){function a(b){_classCallCheck(this,a),this._map=new Map(b),this._indexes=[].concat(_toConsumableArray(this._map.keys())),this._onDelete=[]}return _createClass(a,[{key:"keys",value:function(){return this._indexes}},{key:"values",value:function(){return this.entries().map(function(a){return a[1]})}},{key:"entries",value:function(){var a=this;return this._indexes.map(function(b){return[b,a._map.get(b)]})}},{key:"get",value:function(a){return this._map.get(a)}},{key:"forEach",value:function(a){return this.values().forEach(function(b,c){for(var d=arguments.length,e=Array(d>2?d-2:0),f=2;d>f;f++)e[f-2]=arguments[f];return a.apply(null,[b,c].concat(e))})}},{key:"getIndex",value:function(a){return this._indexes.indexOf(a)}},{key:"changeIndex",value:function(a,b){if(a){var c=this._indexes,d=c.indexOf(a);-1!==d&&b!==d&&this._indexes.splice(b,0,this._indexes.splice(d,1)[0])}}},{key:"getValueByIndex",value:function(a){return this._map.get(this._indexes[a])}},{key:"getKeyByIndex",value:function(a){return this._indexes[a]}},{key:"set",value:function(a,b,c){this._map.set(a,b),void 0!==c?this._indexes.splice(c,0,a):this._indexes.push(a)}},{key:"has",value:function(a){return this._map.has(a)}},{key:"clear",value:function(){this._map.clear(),this._indexes.splice(0,this._indexes.length)}},{key:"onDelete",value:function(a){var b=function(){return a.apply(void 0,arguments)};return this._onDelete.push(b),{remove:function(){this._onDelete.splice(this._onDelete.indexOf(b,1))}}}},{key:"delete",value:function(a){var b=this;this.has(a)&&!function(){var c=b._map.get(a);b._map["delete"](a),b._indexes.splice(b._indexes.indexOf(a),1),b._onDelete.forEach(function(d){return d(a,b.size,c)})}()}},{key:"deleteByIndex",value:function(a){this["delete"](this._indexes[a])}},{key:"first",get:function(){return this.getValueByIndex(0)}},{key:"last",get:function(){return this.getValueByIndex(this._indexes.length-1)}},{key:"size",get:function(){return this._map.size}}]),a}();return a}),define("templating/dom",[],function(){function a(a){var b="undefined"==typeof a?"undefined":_typeof(a);return"function"===b||"object"===b&&!!a}function b(a){var b=document.createElement(a||"div");return b.setAttribute("style","display:none;"),b}function c(a){var b=Object.keys(a);b.length>0&&b.forEach(function(b){if("root"!==b){var c=a[b];void 0!==c.elGroup&&c.elGroup.size>0&&c.elGroup.forEach(function(a){void 0!==a&&void 0!==a.remove&&a.remove(!0)})}})}var d=function(){function a(b,c){_classCallCheck(this,a),this.el=b,this._events=[],this.name=c.name||c.data.name;var d=this.data=c.data;d&&d.bind&&(this.bind=d.bind)}return _createClass(a,[{key:"clone",value:function(){return this.run.apply(this,arguments)}},{key:"text",value:function(a){e.text(this,a)}},{key:"detach",value:function(){e.detach(this)}},{key:"attach",value:function(){e.attach(this)}},{key:"changePosition",value:function(a){e.changePosition(this,a)}},{key:"setAttribute",value:function(a,b){e.setAttribute(this,a,b)}},{key:"getAttribute",value:function(a){return e.getAttribute(this,a)}},{key:"removeAttribute",value:function(a){e.removeAttribute(this,a)}},{key:"setStyle",value:function(a,b){e.setStyle(this,a,b)}},{key:"getStyle",value:function(a){return e.getStyle(this,a)}},{key:"removeStyle",value:function(a){e.removeStyle(this,a)}},{key:"addClass",value:function(a){e.addClass(this,a)}},{key:"hasClass",value:function(a){return e.hasClass(this,a)}},{key:"removeClass",value:function(a){e.removeClass(this,a)}},{key:"val",value:function(a){return e.val(this,a)}},{key:"on",value:function(a,b,c){var d=Array.prototype.slice.call(arguments,0);return e.on.apply(!1,[this].concat(d))}},{key:"onDOMAttached",value:function(){return e.onDOMAttached(this)}},{key:"remove",value:function(a){e.remove(this,a)}}]),a}(),e={detach:function(a){a.placeholder instanceof HTMLElement==!1&&(a.placeholder=b(a.data.tag||a.el.tagName)),a&&a.el&&a.el.parentNode&&a.el.parentNode.replaceChild(a.placeholder,a.el)},attach:function(a){a&&a.el&&a.placeholder&&a.placeholder.parentNode&&a.placeholder.parentNode.replaceChild(a.el,a.placeholder)},append:function(a,b){void 0!==a.el&&void 0!==b.el&&a.el.appendChild(b.el)},prepend:function(a,b){e.insertBefore(a,b,0)},insertBefore:function(a,b,c){var d=a.el,e=b.el;void 0!==d&&void 0!==e&&(void 0!==d.childNodes[c]?d.insertBefore(e,d.childNodes[c]):d.appendChild(e))},changePosition:function(a,b){var c=a.el;if(c&&c.parentNode){var d=c.parentNode,e=a.elGroup,f=e.size,g=e.getKeyByIndex(b)||e.getLast();g!==c&&(f-1>=b?d.insertBefore(c,g):null!==g.nextSibling?d.insertBefore(c,g.nextSibling):d.appendChild(c),a.elGroup.changeIndex(c,b))}},text:function(a,b){a&&a.el&&(a.el.innerHTML=b)},setAttribute:function(b,c,d){b&&b.el&&(a(c)?Object.keys(c).forEach(function(a){b.el.setAttribute(a,c[a])}):b.el.setAttribute(c,d))},getAttribute:function(a,b){return a&&a.el?a.el.getAttribute(b):void 0},removeAttribute:function(a,b){a&&a.el&&a.el.removeAttribute(b)},setStyle:function(b,c,d){b&&b.el&&(a(c)?Object.keys(c).forEach(function(a){b.el.style[a]=c[a]}):b.el.style[c]=d)},getStyle:function(a,b){return a&&a.el&&void 0!==a.el&&void 0!==a.el.style?a.el.style[b]:void 0},removeStyle:function(a,b){a&&a.el&&(a.el.style[b]="")},addClass:function(a,b){a&&a.el&&a.el.classList.add(b)},hasClass:function(a,b){return a&&a.el?a.el.classList.contains(b):!1},removeClass:function(a,b){a&&a.el&&a.el.classList.remove(b)},val:function(a,b){if(a&&a.el){var c=a.el;if(void 0===b)return c.value;c.value=b}},on:function(a,b,c,d){for(var e=arguments.length,f=Array(e>4?e-4:0),g=4;e>g;g++)f[g-4]=arguments[g];var h=this,i=a.el,j=b.split(" "),k=function(b){c.apply(d||h,[b,a].concat(f))};j.forEach(function(a){i.addEventListener(a,k)});var l={remove:function(){j.forEach(function(a){return i.removeEventListener(a,k)});var b=a._events;b.splice(b.indexOf(l),1)}};return a._events.push(l),l},remove:function(a){for(;a._events.length>0;)a._events.shift().remove();a.children&&c(a.children),void 0!==a.elGroup&&a.elGroup["delete"](a.el),void 0!==a.el&&(a.el.remove?a.el.remove():a.el.parentNode&&a.el.parentNode.removeChild(a.el),delete a.el)},onDOMAttached:function(a){var b=this,c=[],d=!1,e=void 0;return void 0!==a.el&&(e=function(){if(d)for(;c.length>0;)c.shift()();else window.requestAnimationFrame(e),document.body.contains(a.el)&&(d=!0)}),{then:function(a,d){c.push(a.bind(d||b)),window.requestAnimationFrame(e)}}},Element:d};return e}),function(a,b){"function"==typeof define&&define.amd?define("templating/DomFragment",b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b())}(void 0,function(){var a=function(){function a(b,c,d,e,f,g){return _classCallCheck(this,a),Object.assign(this,{_node:b,placeholder:c,childNodes:d,elGroup:e,index:f,obj:g}),this.render()}return _createClass(a,[{key:"applyAttributes",value:function(a){var b=this._node.data.attribs;Object.keys(b).forEach(function(c){a.setAttribute(c,b[c])})}},{key:"applyFragment",value:function(a){var b=this._node,c=b.template();if(void 0!==c)for(;c.childNodes.length>0;)a.appendChild(c.childNodes[0])}},{key:"appendToBody",value:function(a){var b=this.elGroup,c=this.placeholder,d=b.size;if(d>0){var e=void 0===this.index||this.index>d-1?d-1:this.index-1,f=b.keys()[-1!==e?e:0],g=f.parentNode;-1===e?g.insertBefore(a,f):null!==f.nextSibling?g.insertBefore(a,f.nextSibling):g.appendChild(a)}else{var h=c.parentNode;h&&h.replaceChild(a,c)}}},{key:"render",value:function(){var a=this.placeholder,b=this._node,c=!a.id&&0===this.elGroup.size,d=b.tmpEl(c?a:!1,this.obj,this.childNodes,b),e=d.el;return c||b.replace?b.replace||(e.innerHTML=""):this.applyAttributes(e),b.replace||this.applyFragment(e),this.appendToBody(e),d}}]),a}();return a}),function(a,b){"function"==typeof define&&define.amd?define("templating/Decoder",["./utils/List","./dom","./DomFragment"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b(require("./utils/List"),require("./dom"),require("./DomFragment")))}(void 0,function(a,b,c){function d(a){return a===Object(a)}function e(a){return Array.isArray?Array.isArray(a):"[object Array]"===toString.call(a)}var f={},g=function(){function g(a){_classCallCheck(this,g),this._root="string"==typeof a?JSON.parse(a):a,a.children&&a.children.length>0&&(this.children=this._parseElements(a.children))}return _createClass(g,null,[{key:"addDecoder",value:function(a){void 0===f[a.tagName]&&(f[a.tagName]=a)}}]),_createClass(g,[{key:"renderFragment",value:function(a){var b=document.createElement("template");return b.innerHTML=a,void 0!==b.content?b.content.firstChild:b.firstChild}},{key:"_parseElements",value:function(a){var b=this,c={};return a.forEach(function(a){var d=a.data.name,e=a.tagName;if(e){var g=f[e].decode(a);if(g){var h={name:g.name,data:g.data,tmpEl:g.tmpEl,parse:g.parse,replace:g.replace,id:a.id,template:function(){return b.renderFragment(a.template,a.data.tag)},noAttach:f[e].noAttach||a.data.tplSet.noattach};a.children&&a.children.length>0&&(h.children=b._parseElements(a.children)),c[d]=h}}else d&&(c[d]={id:a.id,data:a.data,name:d})}),c}},{key:"renderTemplate",value:function(){var f=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],g=this,h=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2],j={},k=[];Object.keys(f).forEach(function(l){var m=f[l],n=m.children,o=new a,p=document.createElement(m.data.tplSet.tag||"div");if(p.setAttribute("style","display:none;"),p.id=m.id,o.onDelete(function(a,b){0===b&&a.parentNode&&(a.parentNode.replaceChild(p,a),i=function(){return p})}),m.template)!function(){var a=function b(a,f){var j=i();a instanceof HTMLElement==!0&&(j=a);var k=void 0,l=j!==a&&(d(a)||e(a))?a:h;if(!m.noAttach||a){var p=j.querySelector("#"+m.id)||j;n&&(k=g.renderTemplate(n,l,function(){return j}));var q=new c(m,p,k,o,f,l);return j=q.el,k&&k.runAll&&m.parse&&k.runAll(),k&&!q.children&&(q.children=k),q.elGroup=o,q.run=b,o.set(q.el,q,f),q}};k.push(a),j[l]={data:m.data,run:a,elGroup:o}}();else{var q=new b.Element(i().querySelector("#"+m.id),m);q.removeAttribute("id"),q.elGroup=o,o.set(q.el,q),j[l]=q}});var l=function(a,b,c){Object.defineProperty(a,b,{enumerable:!1,value:c})},m=function(a){return k.forEach(function(b){return b(a)}),j};return l(j,"runAll",m),j}},{key:"render",value:function(a){var b=this.renderFragment(this._root.template);return{fragment:b,children:this.renderTemplate(this.children,a,function(){return b}).runAll(),templateId:this._root.templateId}}}]),g}();return g}),function(a,b){"function"==typeof define&&define.amd?define("coders/component/cpDecoder",["templating/Decoder"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b(require("./Decoder")))}(void 0,function(a){var b={tagName:"cp",decode:function(a){var b=a.data,c={name:b.name,replace:!0,tmpEl:function(a,c,d,e){var f=new b.src(b.dataset,d,c,e);return f},data:b||{}};return void 0!==b.dataset.bind&&(c.bind=b.dataset.bind),c}};return a&&a.addDecoder(b),b}),function(a,b){"function"==typeof define&&define.amd?define("coders/placeholders/plDecoder",["templating/Decoder","templating/dom"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b(require("./Decoder"),require("./dom")))}(void 0,function(a,b){var c={tagName:"pl",decode:function(a){var c=a.data;return{name:c.name,tmpEl:function(a,d,e,f){return new b.Element(a||document.createElement(c.tag),f)},parse:!0,data:c}}};return a&&a.addDecoder(c),c}),function(a,b){"function"==typeof define&&define.amd?define("coders/databind/bdDecoder",["templating/Decoder","templating/dom"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b(require("./Decoder"),require("./dom")))}(void 0,function(a,b){var c={tagName:"bd",noAttach:!0,decode:function(a){var c=this.data=a.data,d={name:c.name,tmpEl:function(a,d,e,f){return new b.Element(a||document.createElement(c.tag),f)},data:c};return d}};return a&&a.addDecoder(c),c}),function(a,b){"function"==typeof define&&define.amd?define("coders/router/routerDecoder",["templating/Decoder","templating/dom"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b(require("./Decoder"),require("./dom")))}(void 0,function(a,b){var c={tagName:"rt",noAttach:!0,decode:function(a){var c=a.data,d={name:c.name,tmpEl:function(a,d,e,f){return new b.Element(a||document.createElement(c.tag),f)},parse:!0,data:c||{}};return d}};return a&&a.addDecoder(c),c}),function(a,b){"function"==typeof define&&define.amd?define("coders/style/styleDecoder",["templating/Decoder"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=b(require("./Decoder")))}(void 0,function(a){var b={tagName:"style",decode:function(a){if(void 0===a.data.styleAttached){a.data.styleAttached=!0;var b=document.createElement("style");b.innerHTML=a.data.style,document.head.appendChild(b)}}};return a&&a.addDecoder(b),b}),function(a,b){"function"==typeof define&&define.amd?define("widget/Mediator",[],function(){return b()}):"undefined"!=typeof exports?exports.Mediator=b():a.Mediator=b()}(void 0,function(){var a=function(){function a(b,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?null:arguments[3];_classCallCheck(this,a),this.fn=b,this.channel=e,this.context=d,this.options=c}return _createClass(a,[{key:"update",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Object.assign(this,a),this.channel&&this.setPriority(this.priority)}},{key:"setHook",value:function(a){var b=this.channel;b&&b.hook(this,a)}},{key:"_reduceCalls",value:function(){void 0!==this.calls&&(this.calls--,this.calls<1&&this.remove())}},{key:"remove",value:function(){var a=this.channel;a&&a.removeSubscriber(this)}},{key:"setPriority",value:function(a){var b=this.channel;b&&b.setPriority(this,a)}},{key:"run",value:function(a){this.channel.stopped||"function"==typeof this.predicate&&!this.predicate.apply(this.context,a)||(this._reduceCalls(),this.fn.apply(this.context,a))}},{key:"options",set:function(a){this.update(a)}},{key:"context",set:function(a){this.setHook(a),this._context=a},get:function(){return this._context}}]),a}(),b=function(){function b(a,c,d,e){_classCallCheck(this,b),this.namespace=a||"",this._subscribers=[],this._channels=new Map,this._parent=c,this.stopped=!1,this.context=d,this.hook=e}return _createClass(b,[{key:"addSubscriber",value:function(b,c){var d=arguments.length<=2||void 0===arguments[2]?this.context:arguments[2];return new a(b,c,d,this)}},{key:"stopPropagation",value:function(){this.stopped=!0}},{key:"setPriority",value:function(a,b){var c=this._subscribers,d=c.indexOf(a);-1!==d&&c.splice(c.indexOf(a),1),void 0!==b&&b<this._subscribers.length?c.splice(b,0,a):c.push(a)}},{key:"hasChannel",value:function(a){return this._channels.has(a)}},{key:"getChannel",value:function(a){return this._channels.get(a)}},{key:"setChannel",value:function(a,c){if(this.hasChannel(a)||c)return this.getChannel(a);var d=new b((this.namespace?this.namespace+":":"")+a,this,this.context,this.hook);return this._channels.set(a,d),d}},{key:"returnChannel",value:function c(a,b){if(a&&a.length>0){var d=a.shift(),c=this.setChannel(d,b);return c&&a.length>0?c.returnChannel(a,b):c}}},{key:"removeSubscriber",value:function(a){var b=this._subscribers,c=b.indexOf(a);a?-1!==c&&b.splice(c,1):b.splice(0,b.length),0===this._subscribers.length&&this._parent&&this._parent.removeChannel(this)}},{key:"removeChannel",value:function(a){a===this.getChannel(a.namespace)&&this._channels["delete"](a.namespace)}},{key:"clear",value:function(){this._channels.forEach(function(a){return a.clear()}),this.removeSubscriber()}},{key:"publish",value:function(a){this._subscribers.slice().forEach(function(b){return b.run(a)}),this._parent&&this._parent.publish(a),this.stopped=!1}}]),b}(),c=function(){function a(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];return _classCallCheck(this,a),this instanceof a?void(this.channel=new b("",!1,c,d)):new a(c,d)}return _createClass(a,[{key:"getChannel",value:function(a,b){var c=a.split(":");return c.length>0?this.channel.returnChannel(c,b):void 0}},{key:"subscribe",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=arguments[3];if(a&&""!==a){var e=this.getChannel(a,!1);return e.addSubscriber(b,c,d)}throw Error("Namespace should be provided!")}},{key:"once",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=arguments[3];return c.calls=1,this.subscribe(a,b,c,d)}},{key:"publish",value:function(a){if(a&&""!==a){var b=this.getChannel(a,!0);if(b&&b.namespace===a){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];d.push(b),b.publish(d)}}}},{key:"clear",value:function(){this.channel.clear()}}]),a}();return c.prototype.on=c.prototype.subscribe,c.prototype.trigger=c.prototype.publish,c.version="0.9.9",c}),function(a,b){"function"==typeof define&&define.amd?define("router/MatchBinding",b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=b():(a.UrlManager=a.UrlManager||{},a.UrlManager.MatchBinding=b())}(void 0,function(){function a(b,c){""===c?this.pattern=c=b.replace(/^\(\/\)/g,"").replace(/^\/|$/g,""):(this.pattern=b,c+=b),this.location=c.replace(/\((.*?)\)/g,"$1").replace(/^\/|$/g,"");var d=this.pattern.replace(a.ESCAPE_PARAM,"\\$&").replace(a.OPTIONAL_PARAM,"(?:$1)?").replace(a.NAMED_PARAM,function(a,b){return b?a:"([^/]+)"}).replace(a.SPLAT_PARAM,"(.*?)");this.patternRegExp=new RegExp("^"+d),this.routeHandler=[],this.leaveHandler=[],this.queryHandler=[],this.routes=[]}return a.prototype.onBind=function(){},a.prototype.setOnBind=function(a){this.onBind=a},a.prototype.rebind=function(){void 0!==this.onBind&&this.onBind()},a.prototype.setRoutes=function(a){return this.routes.push(a),this},a.prototype.getRoutes=function(){return this.routes},a.prototype.to=function(a){return this.routeHandler.push(a),this},a.prototype.leave=function(a){return this.leaveHandler.push(a),this},a.prototype.query=function(a){return this.queryHandler.push(a),this},a.prototype.remove=function(){return this.routes.splice(0,this.routes.length),this.routeHandler.splice(0,this.routeHandler.length),this.leaveHandler.splice(0,this.leaveHandler.length),this.queryHandler.splice(0,this.queryHandler.length),this},a.prototype.test=function(a){return this.patternRegExp.test(a)},a.prototype.getFragment=function(a){var b=this.applyParams(a);return a.replace(b,"")},a.prototype.applyParams=function(a){var b=this.pattern.replace(/\((.*?)\)/g,"$1").split("/"),c=a.split("/");return c.splice(0,b.length).join("/")},a.prototype.extractParams=function(a){var b=this.patternRegExp.exec(a).slice(1);return b.map(function(a){return a?decodeURIComponent(a):null})},a.prototype.setSubBinder=function(a){return this.subBinder=a,a},a.prototype.getSubBinder=function(){return this.subBinder},a.prototype.getHandler=function(){return this.routeHandler},a.prototype.getLeaveHandler=function(){return this.leaveHandler},a.prototype.getQueryHandler=function(){return this.queryHandler},a.OPTIONAL_PARAM=/\((.*?)\)/g,a.NAMED_PARAM=/(\(\?)?:\w+/g,a.SPLAT_PARAM=/\*\w+/g,a.ESCAPE_PARAM=/[\-{}\[\]+?.,\\\^$|#\s]/g,a}),function(a,b){"function"==typeof define&&define.amd?define("router/MatchBinder",["./MatchBinding"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=b(require("./MatchBinding")):(a.UrlManager=a.UrlManager||{},a.UrlManager.MatchBinder=b(a.UrlManager.MatchBinding))}(void 0,function(a){function b(a,b,c,d){this.bindings=[],this.location=d||a||"",this.command=c,this.params=b}return b.prototype.match=function(a,b){var c=this.getMatchBinding(a,this.location);this.bindings.push(c);var d=this.getSubBinder(this.location+a);return c.setSubBinder(d),b&&b(d.match.bind(d)),c},b.prototype.getSubBinder=function(a){return new b(a)},b.prototype.getMatchBinding=function(b,c){return new a(b,c)},b.prototype.filter=function(a){return this.bindings.filter(function(b){return b.test(a)})},b.prototype.run=function(){this.command(this)},b}),function(a,b){"function"==typeof define&&define.amd?define("router/Router",["./MatchBinder"],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=b(require("./MatchBinder")):(a.UrlManager=a.UrlManager||{},a.UrlManager.Router=b(a.UrlManager.MatchBinder))}(void 0,function(a){function b(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return a}}function c(a,b){var c=a.split("&");c.forEach(function(a){var c=a.split("=");b(c.shift(),c.join("="))})}function d(a,b,c,d){var e,f=c.root.substring(0,c.root.length-d.length);return a=a||"",e=b===!0?this.serialize(c.query):b===!1?"":this.serialize(b),f+a+(0===e.length?"":"?"+e)}function e(){this.root=this.getBinder(),this.bindings=[]}return Array.prototype.equals=function(a){if(!a)return!1;if(this.length!=a.length)return!1;for(var b=0,c=this.length;c>b;b++)if(this[b]instanceof Array&&a[b]instanceof Array){if(!this[b].equals(a[b]))return!1}else if(this[b]!=a[b])return!1;return!0},e.prototype.getBinder=function(){return new a},e.prototype.match=function(a){a(this.root.match.bind(this.root))},e.prototype.trigger=function(a){if(this.started){var d=a.split("?",2),e={};d[1]&&c(d[1],function(a,c){c=b(c),e[a]?"string"==typeof e[a]?e[a]=[e[a],c]:e[a].push(c):e[a]=c});var f=d[0].replace(/^\/|$/g,""),g={root:f,query:e},h=[],i=!1;this.bindings.forEach(function(b){var c,d=b.pattern.replace(/\((.*?)\)/g,"$1").replace(/^\//,"").split("/"),e=b.location.split("/"),j=b.prevLoc.replace(/^\//,"").split("/"),k=function(a){var b=a.splice(e.length-d.length,d.length),c=j.splice(0,d.length);return!b.equals(c)};if(c=k(i||f.split("/"))){i=f.split("/").splice(0,e.length-d.length);var l=b.getLeaveHandler(),m=[];b.setOnBind(),this.applyHandler(l,m,g,a),h.push(b)}}.bind(this)),h.forEach(function(a){this.bindings.splice(this.bindings.indexOf(a),1)}.bind(this)),this.find(this.root,f,g)}},e.prototype.find=function(a,b,c){var d=a.filter(b);d.forEach(this.onBinding.bind(this,b,c))},e.prototype.execute=function(a){var b=a.location.split("/"),c=a.params.root.split("/"),d="/"+c.splice(b.length,c.length-b.length).join("/");this.find(a,d,a.params)},e.prototype.onBinding=function(b,c,d){d.setOnBind(this.onBinding.bind(this,b,c,d)),this.runHandler(b,c,d);var e=d.getFragment(b),f=d.getSubBinder();f&&f.bindings&&f.bindings.length>0&&this.find(f,e,c);var g=d.getRoutes();if(g&&g.length>0)for(;g.length>0;){var h=g[0],i=new a(d.getFragment(b),c,this.execute.bind(this),d.location);h(i),f.bindings=f.bindings.concat(i.bindings),g.shift()}},e.prototype.serialize=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},e.prototype.runHandler=function(a,b,c){if(-1===this.bindings.indexOf(c)){var d=c.getHandler(),e=c.extractParams(a);c.prevLoc=a,this.applyHandler(d,e,b,a),this.bindings.push(c)}var d=c.getQueryHandler();if(d){var e=[];this.applyHandler(d,e,b,a)}},e.prototype.applyHandler=function(a,b,c,e){a&&a.length>0&&a.forEach(function(a){a.apply(this,b.concat({getQuery:function(){return c.query},getLocation:function(a,b){return d.call(this,a,b,c,e)}.bind(this)}))}.bind(this))},e.prototype.start=function(){this.started=!0},e.prototype.stop=function(){this.started=!1},e}),define("widget/App",["./Mediator","router/Router"],function(a,b){function c(a){function b(){var b=window.location.href.match(/#(.*)$/);a.trigger(b?b[1]:"")}a.start(),window.addEventListener("hashchange",b,!1),b()}var d=function(){function d(e){var f=this;_classCallCheck(this,d),e=e||{};var g=new b;this.beforeInit.apply(this,arguments),this.context=Object.assign(this.setContext.apply(this,arguments),{eventBus:new a(this.context,function(a,b){b._globalEvents=b._globalEvents||[],-1===b._globalEvents.indexOf(a)&&b._globalEvents.push(a)})}),void 0!==this.AppContainer&&!function(){f.appContainer=new f.AppContainer({appContext:f.context});var a=void 0!==f.appContainer._match?f.appContainer._match:function(){};void 0!==e.rootRoute?g.match(function(b){b(e.rootRoute,a)}):g.match(a),f.el=f.appContainer.el,c(g)}(),this.init.apply(this,arguments)}return _createClass(d,null,[{key:"extend",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,Object.getPrototypeOf(b).apply(this,arguments))}return _inherits(b,a),b}(d);return Object.assign(b.prototype,a),b}}]),_createClass(d,[{key:"beforeInit",value:function(){}},{key:"init",value:function(){}},{key:"setContext",value:function(){return{}}},{key:"start",value:function(a){var b=this;if(a instanceof HTMLElement!=!0)throw Error("Contaner should be a HTML element");a.appendChild(this.el),setTimeout(function(){b.el.classList.add("show")},100)}}]),d}();return d}),function(a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=a():"function"==typeof define&&define.amd?define("watch",a):(window.WatchJS=a(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var a={noMore:!1},b=[],c=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},d=function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a,b){var c=[],e=[];if("string"!=typeof a&&"string"!=typeof b){if(d(a))for(var f=0;f<a.length;f++)void 0===b[f]&&c.push(f);else for(var f in a)a.hasOwnProperty(f)&&void 0===b[f]&&c.push(f);if(d(b))for(var g=0;g<b.length;g++)void 0===a[g]&&e.push(g);else for(var g in b)b.hasOwnProperty(g)&&void 0===a[g]&&e.push(g)}return{added:c,removed:e}},f=function(a){if(null==a||"object"!=("undefined"==typeof a?"undefined":_typeof(a)))return a;var b=a.constructor();for(var c in a)b[c]=a[c];return b},g=function(a,b,c,d){try{Object.defineProperty(a,b,{get:c,set:d,enumerable:!0,configurable:!0})}catch(e){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,d)}catch(f){throw new Error("watchJS error: browser not supported :/")}}},h=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},i=function(){c(arguments[1])?j.apply(this,arguments):d(arguments[1])?k.apply(this,arguments):l.apply(this,arguments)},j=function(a,b,c,e){if("string"!=typeof a&&(a instanceof Object||d(a))){var f=[];if(d(a))for(var g=0;g<a.length;g++)f.push(g);else for(var h in a)"$val"!=h&&Object.prototype.hasOwnProperty.call(a,h)&&f.push(h);k(a,f,b,c,e),e&&w(a,"$$watchlengthsubjectroot",b,c)}},k=function(a,b,c,e,f){if("string"!=typeof a&&(a instanceof Object||d(a)))for(var g=0;g<b.length;g++){var h=b[g];l(a,h,c,e,f)}},l=function(a,b,e,f,g){"string"!=typeof a&&(a instanceof Object||d(a))&&(c(a[b])||(null!=a[b]&&(void 0===f||f>0)&&j(a[b],e,void 0!==f?f-1:f),p(a,b,e,f),g&&(void 0===f||f>0)&&w(a,b,e,f)))},m=function(){c(arguments[1])?n.apply(this,arguments):d(arguments[1])?o.apply(this,arguments):u.apply(this,arguments)},n=function(a,b){if(!(a instanceof String)&&(a instanceof Object||d(a)))if(d(a)){for(var c=[],e=0;e<a.length;e++)c.push(e);o(a,c,b)}else{var f=function g(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&(a[d]instanceof Object?g(a[d]):c.push(d));o(a,c,b)};f(a)}},o=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&u(a,b[d],c)},p=function(b,c,d,e){var f=b[c];t(b,c),b.watchers||h(b,"watchers",{});var i=!1;b.watchers[c]||(b.watchers[c]=[],i=!0);for(var k=0;k<b.watchers[c].length;k++)if(b.watchers[c][k]===d)return;if(b.watchers[c].push(d),i){var l=function(){return f},m=function(g){var h=f;f=g,0!==e&&b[c]&&j(b[c],d,void 0===e?e:e-1),t(b,c),a.noMore||h!==g&&(q(b,c,"set",g,h),a.noMore=!1)};g(b,c,l,m)}},q=function y(a,b,c,d,e){if(void 0!==b)for(var f=0;f<a.watchers[b].length;f++)a.watchers[b][f].call(a,b,c,d,e);else for(var b in a)a.hasOwnProperty(b)&&y(a,b,c,d,e)},r=["pop","push","reverse","shift","sort","slice","unshift","splice"],s=function(a,b,c,d){h(a[b],d,function(){var e=c.apply(a[b],arguments);return l(a,a[b]),"slice"!==d&&q(a,b,d,arguments),e})},t=function(a,b){if(a[b]&&!(a[b]instanceof String)&&d(a[b]))for(var c,e=r.length;e--;)c=r[e],s(a,b,a[b][c],c)},u=function(a,b,c){for(var d=0;d<a.watchers[b].length;d++){var e=a.watchers[b][d];e==c&&a.watchers[b].splice(d,1)}x(a,b,c)},v=function(){for(var a=0;a<b.length;a++){var c=b[a];if("$$watchlengthsubjectroot"===c.prop){var d=e(c.obj,c.actual);(d.added.length||d.removed.length)&&(d.added.length&&k(c.obj,d.added,c.watcher,c.level-1,!0),c.watcher.call(c.obj,"root","differentattr",d,c.actual)),c.actual=f(c.obj)}else{var d=e(c.obj[c.prop],c.actual);if(d.added.length||d.removed.length){if(d.added.length)for(var g=0;g<c.obj.watchers[c.prop].length;g++)k(c.obj[c.prop],d.added,c.obj.watchers[c.prop][g],c.level-1,!0);q(c.obj,c.prop,"differentattr",d,c.actual)}c.actual=f(c.obj[c.prop])}}},w=function(a,c,d,e){var g;g=f("$$watchlengthsubjectroot"===c?a:a[c]),b.push({obj:a,prop:c,actual:g,watcher:d,level:e})},x=function(a,c,d){for(var e=0;e<b.length;e++){var f=b[e];f.obj==a&&f.prop==c&&f.watcher==d&&b.splice(e,1)}};return setInterval(v,50),a.watch=i,a.unwatch=m,a.callWatchers=q,a}),define("widget/parsers/applyAttribute",["watch"],function(a){function b(a,b){var d=a.data.tplSet.bind,e="true"===a.data.tplSet.update;d&&Object.keys(d).forEach(function(f){var g=d[f],h=b[g];switch(f){case"class":var i=function(b){return void 0!==b&&""!==b?(a.addClass(b),b):!1},j=i(h);e===!0&&c(b,g,function(){j&&a.removeClass(j),j=i(b[g])});break;case"checked":void 0!==h&&(a.el.checked=h),e===!0&&c(b,g,function(){return a.el.checked=b[g]});break;case"value":void 0!==h&&(a.el.value=h),e===!0&&c(b,g,function(){return a.el.value=b[g]});break;case"required":void 0!==h&&(a.el.required=h),e===!0&&c(b,g,function(){return a.el.required=b[g]});break;case"text":void 0!==h&&a.text(h),e===!0&&c(b,g,function(){return a.text(h)});break;default:void 0!==h&&a.setAttribute(f,h),e===!0&&c(b,g,function(){return a.setAttribute(f,b[g])})}void 0!==b.text&&a.text(b.text),e===!0&&c(b,"text",function(){return a.text(b.text)})})}var c=a.watch;return b}),define("widget/parsers/addChildren",[],function(){function a(a,e,f){return e&&e.name&&a?(d(a,e,f),c(a,e,f),b(a,e,f),a.children[e.name]=e,e):void 0}function b(a,b,c){void 0!==a.elOnChange[b.name]&&a.elOnChange[b.name].call(a,b,c)}function c(a,b,c){void 0!==a.elReady[b.name]&&a.elReady[b.name].call(a,b,c)}function d(a,b,c){var d=a.events[b.name];void 0!==d&&void 0!==b.el&&"cp"!==b.data.type&&d.forEach(function(d){a._events.push(b.on(d.name,d.action,a,c));
})}return Object.assign(a,{elOnChange:b,elReady:c,applyEvents:d}),a}),define("widget/parsers/applyParent",["templating/dom","./addChildren"],function(a,b){function c(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];c&&!function(){var f=c.children;f&&Object.keys(f).forEach(function(g){var h=!0,i=f[g],j=d[g];void 0!==j?void 0!==c.nodes[g]?c.nodes[g].call(c,i,j,e):void 0!==i&&("string"==typeof j?a.text(i,j):i=j.run(i.el)):void 0!==c.nodes[g]&&"true"===i.data.tplSet.noattach&&(c.nodes[g].call(c,i,e),h=!1),h&&i.elGroup.size>0&&b(c,i,e)})}()}return c}),define("widget/utils",[],function(){function a(a){var b="undefined"==typeof a?"undefined":_typeof(a);if(!("function"===b||"object"===b&&a))return a;for(var c,d,e=1,f=arguments.length;f>e;e++){c=arguments[e];for(d in c)a[d]=c[d]}return a}function b(b,c){var d,e=this;d=b&&null!=b&&hasOwnProperty.call(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)},a(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,b&&a(d.prototype,b),d.__super__=e.prototype,d}function c(a){return"[object String]"===toString.call(a)}function d(a){return a===Object(a)}function e(a){return Array.isArray?Array.isArray(a):"[object Array]"===toString.call(a)}return{fnExtend:b,extend:a,isString:c,isObject:d,isArray:e}}),define("widget/parsers/setBinders",[],function(){function a(a,b){var c={};return Object.defineProperty(c,"__cp__",{enumerable:!1,value:[]}),Object.keys(a).forEach(function(d){var e=a[d];e&&e.data&&void 0!==e.data.bind&&"cp"!==e.data.type?(c[e.data.bind]=c[e.data.bind]||[],c[e.data.bind].push(e)):b||"cp"!==e.data.type||c.__cp__.push(e)}),c}return a}),define("widget/parsers/applyBinders",["templating/dom","../utils","watch","./setBinders","./addChildren","./applyAttribute"],function(a,b,c,d,e,f){function g(a,c,g,j){if(void 0!==j){var k=g[c];if(a.nodes[c])a.nodes[c].call(a,j,k);else if(b.isArray(k)||b.isObject(k)){if(b.isArray(k))!function(){var l=[],m=function(k,m){var n=!1;b.isArray(k)||b.isObject(k)||(n=!0);var o=j.run(!0,m);n&&(o.text(k),"true"===o.data.tplSet.update&&i(g,c,function(){o.text(k),e.elOnChange(a,o,k)})),l.push({binder:o,data:k}),f(o,k),e.applyEvents(a,o,k),e.elReady(a,o,k),e.elOnChange(a,o,k),o.children&&(o.bindings=d(o.children),h(a,k,o))};k.forEach(m);var n=j.data.tplSet.update;"true"===n&&!function(){var a=["pop","shift","splice"],b=["push","unshift"],d=["reverse","sort"];i(g,c,function(e,f,h,i){var j=l.slice(0);if(void 0===i&&-1!==b.indexOf(f)){var n=j.filter(function(a){return a.data===h[0]});0===n.length&&m(h[0],"unshift"===f?0:j.length)}else if(-1!==a.indexOf(f)){if(j.forEach(function(a){-1===g[c].indexOf(a.data)&&(a.binder.remove(),l.splice(l.indexOf(a),1))}),"splice"===f){var o=Array.prototype.slice.call(h,2);o&&o.length>0&&o.forEach(function(a){var b=g[c].indexOf(a);-1!==b&&m(a,b)})}}else-1!==d.indexOf(f)&&k.forEach(function(a,b){var c=j.filter(function(b){return b.data===a})[0];l.splice(b,0,l.splice(l.indexOf(c),1)[0]),c.binder.changePosition(b)})})}()}();else if(b.isObject(k)){var l=j.run(k);"cp"!==l.data.type&&(f(l,k),e.applyEvents(a,l,k),e.elReady(a,l,k),e.elOnChange(a,l,k),l.children&&(l.bindings=d(l.children),h(a,k,l)))}}else!function(){var b=j.run(!0);b.text(k),e.applyEvents(a,b,k),e.elReady(a,b,k),e.elOnChange(a,b,k),"true"===b.data.tplSet.update&&i(g,c,function(){b.text(g[c]),e.elOnChange(a,b,g[c])})}()}}function h(a,b,c){var d=c.bindings;if(d){d.__cp__.length>0&&d.__cp__.forEach(function(c){var d=c.run(b);e.elReady(a,d,b),e.elOnChange(a,d,b)});var f=Object.keys(d);b&&f.length>0&&f.forEach(function(c){void 0!==b[c]?d[c].forEach(function(d){return g(a,c,b,d)}):!function(){var e=function f(e,h,i,k){void 0!==i&&void 0===k&&(d[c].forEach(function(d){return g(a,c,b,d)}),j(b,c,f))};i(b,c,e,0)}()})}}var i=c.watch,j=c.unwatch;return h}),define("widget/parsers/setRoutes",["templating/dom"],function(a){function b(a){void 0!==a.remove&&a.remove()}function c(a,b){void 0!==a&&Object.keys(a).forEach(function(c){var d=a[c];d.elGroup&&d.elGroup.size>0?d.elGroup.forEach(function(a){return b(a)}):b(d)})}function d(e,f){var g=void 0!==e.data?e.data.route:void 0;void 0!==g&&"cp"!==e.data.type&&"root"!==e.name?!function(){var h=void 0,i=void 0,j=f(g,function(a){i=a});j.to(function(){for(var b=arguments.length,f=Array(b),g=0;b>g;g++)f[g]=arguments[g];var k=f.pop();h=f.length>0?k.getLocation()+"_"+f.join("_"):void 0,e.elGroup&&0===e.elGroup.size?(e=e.run(!0),c(e.children,function(a){a&&a.to&&a.to.apply(a,_toConsumableArray(f.concat(k))),a&&!a._match?d(a,i):a&&a._match&&(j.setRoutes(function(b){a._match(function(){var c=b.match.apply(b,arguments);return a._appliedRoutes.push(c),c}),b.run()}),a._reRoute=function(){a._applyRoutes(j)})})):(c(e.children,function(a){a&&a.to&&a.to.apply(a,f.concat(k))}),a.attach(e))}),j.leave(function(){c(e.children,function(a){a&&void 0!==a.leave&&a.leave()}),h?b(e):a.detach(e)}),j.query(function(a){c(e.children,function(b){b&&void 0!==b.query&&b.query(a)})})}():void 0!==e.children&&"cp"!==e.data.type?c(e.children,function(a){return d(a,f)}):e.elGroup&&e.elGroup.size>0&&e.elGroup.forEach(function(a){"cp"===e.data.type&&a._match&&a._match(f)})}function e(a,b){a._match||(a._match=function(e){c(b,function(a){return d(a,e)}),a.match&&a.match(e)})}return e}),define("widget/parsers/applyElement",["templating/dom"],function(a){function b(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=arguments[1],d={};return Object.keys(b).forEach(function(e){var f=b[e];"string"!=typeof f&&!function(){var b=f.elGroup.first;b?(d[e]=b,b instanceof a.Element==!0&&-1!==["pl"].indexOf(b.data.type)&&!function(){var a=b.data.tplSet.bind;a&&Object.keys(a).forEach(function(d){void 0!==c[a[d]]&&("class"!==d?b.setAttribute(d,c[a[d]]):b.addClass(c[a[d]]))})}()):d[e]=f}()}),d}return b}),define("widget/Constructor",["require","templating/Decoder","templating/dom","./Mediator","./parsers/applyAttribute","./parsers/applyParent","./parsers/applyBinders","./parsers/setBinders","./parsers/setRoutes","./parsers/applyElement","./parsers/addChildren"],function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b=Object.keys(a);b.length>0&&b.forEach(function(b){if("root"!==b){var c=a[b];void 0!==c.elGroup&&c.elGroup.size>0&&c.elGroup.forEach(function(a){void 0!==a&&void 0!==a.remove&&a.remove(!0)})}})}var m={},n=function(){function a(e,g,l,n){if(_classCallCheck(this,a),this.instance=this,this._routes=[],this._appliedRoutes=[],this._events=[],this._globalEvents=[],this.eventBus=new d(this),this.context=m,void 0!==e.appContext&&Object.assign(this.context,e.appContext),void 0!==n&&void 0!==n.name&&(this.name=n.name),this.beforeInit.apply(this,arguments),this.template){var o=l?Object.keys(l):[],p=o.length>0?l:this.context.data;!this.data&&p&&(this.data=p[e.bind]||p);var q=new b(this.template),r=q.render(this.data);this.el=r.fragment,this.root=new c.Element(this.el,{name:"root"}),this.children=j(r.children,e),i(this,this.children),f(this,g,this.data),this.bindings=h(this.children,!0),this.data&&this.applyBinders(this.data,this),k(this,this.root)}else this.el=document.createElement("div");this.init.apply(this,arguments)}return _createClass(a,null,[{key:"extend",value:function(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,Object.getPrototypeOf(b).apply(this,arguments))}return _inherits(b,a),b}(a);return Object.assign(c.prototype,b),c}}]),_createClass(a,[{key:"init",value:function(a,b,c){}},{key:"beforeInit",value:function(a,b,c){}},{key:"loadCss",value:function(a){if(this.context._cssReady=this.context._cssReady||[],-1===this.context._cssReady.indexOf(a)){this.context._cssReady.push(a);var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a),"undefined"!=typeof b&&document.getElementsByTagName("head")[0].appendChild(b)}}},{key:"detach",value:function(){this._placeholder||(this._placeholder=document.createElement(this.el.tagName)),this._parent||(this._parent=this.el.parentNode),this.el&&this._parent&&this._parent.replaceChild(this._placeholder,this.el)}},{key:"attach",value:function(){this._placeholder&&this._parent&&this._parent.replaceChild(this.el,this._placeholder)}},{key:"onDestroy",value:function(){}},{key:"destroy",value:function(a){for(this.onDestroy(),this.eventBus.clear();this._events.length>0;)this._events.shift().remove();for(;this._appliedRoutes.length>0;)this._appliedRoutes.shift().remove();for(;this._globalEvents.length>0;)this._globalEvents.shift().remove();l(this.children),a&&this._matches&&this._matches.remove(),void 0!==this.elGroup&&void 0!==this.el&&this.elGroup["delete"](this.el),this.root.remove(),delete this.el}},{key:"remove",value:function(){this.destroy.apply(this,arguments)}},{key:"setRoutes",value:function(a){void 0!==a&&this._routes.push(a)}},{key:"_applyRoutes",value:function(a){for(var b=this,c=function(){var c=b._routes.shift();c&&c._match&&a.setRoutes(function(a){c._match(function(){var c=a.match.apply(a,arguments);return b._appliedRoutes.push(c),c}),a.run()})};this._routes.length>0;)c();a.rebind()}},{key:"_reRoute",value:function(){this._routes.splice(0,this._routes.length)}},{key:"rebind",value:function(){this._reRoute()}},{key:"setChildren",value:function(a,b){var c=a.data.name,d=this.children[c];void 0!==d&&void 0!==d.el&&d.remove(),d=a.run(b||!0),k(this,d,b),this.setRoutes(d),this.rebind()}},{key:"addComponent",value:function(a,b){var c=b.name,d=b.container;if(void 0===c)throw"you have to define data.name for component.";if(void 0===d)throw"You have to define container for component.";if(void 0!==this.children[c])throw"Component using name:"+c+"! already defined.";var e=this.setComponent(a,b),f=e.run(b.container);return this.children[c]=f,this.setRoutes(f),this.rebind(),f}},{key:"setComponent",value:function(a,b){var d=this,e={name:b.name,data:{tag:"div",type:"cp"},run:function(e){b.appContext=d.context;var f=new a(b,b.children,b.data);return e instanceof HTMLElement==!0?e.parentNode.replaceChild(f.el,e):void 0!==e.el&&void 0!==b.pos?c.insertBefore(e,f,b.pos):void 0!==e.el&&c.append(e,f),f}};return e}},{key:"applyBinders",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return g.apply(void 0,[this].concat(b))}}]),a}();return Object.assign(n.prototype,{nodes:{},events:{},elReady:{},elOnChange:{}}),n});