{"version":3,"sources":["../../../es6/dev/widget/App.js"],"names":[],"mappings":"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","file":"App.js","sourcesContent":["/*jslint bitwise: true, nomen: true, plusplus: true, white: true */\n\n/*!\n * Mediator Library v0.9.9\n *\n */\n\n(function (global, factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define('widget/Mediator',[],function () {\n            return factory();\n        });\n    } else if (typeof exports !== 'undefined') {\n        // Node/CommonJS\n        exports.Mediator = factory();\n    } else {\n        // Browser global\n        global.Mediator = factory();\n    }\n}(this, function () {\n    'use strict';\n\n    // Subscribers are instances of Mediator Channel registrations. We generate\n    // an object instance so that it can be updated later on without having to\n    // unregister and re-register. Subscribers are constructed with a function\n    // to be called, options object, and context.\n\n    class Subscriber {\n        constructor(fn, options, context = {}, channel = null) {\n            this.fn = fn;\n            this.channel = channel;\n            this.context = context;\n            this.options = options;\n        };\n\n        // Mediator.update on a subscriber instance can update its function,context,\n        // or options object. It takes in an object and looks for fn, context, or\n        // options keys.\n        update(options = {}) {\n            Object.assign(this, options);\n            if (this.channel) {\n                this.setPriority(this.priority);\n            }\n        };\n\n        set options(options) {\n            this.update(options);\n        };\n\n        set context(context) {\n            this.setHook(context);\n            this._context = context;\n        };\n\n        get context() {\n            return this._context;\n        };\n\n        setHook(context) {\n            let channel = this.channel;\n            if (channel) {\n                channel.hook(this, context);\n            }\n        }\n\n        _reduceCalls() {\n            // Check if the subscriber has options and if this include the calls options\n            if (this.calls !== undefined) {\n                // Decrease the number of calls left by one\n                this.calls--;\n                // Once the number of calls left reaches zero or less we need to remove the subscriber\n                if (this.calls < 1) {\n                    this.remove();\n                }\n            }\n        };\n\n        //return event remove method\n        remove() {\n            let channel = this.channel;\n            if (channel) {\n                channel.removeSubscriber(this);\n            }\n        };\n\n        //Dynamic setPriority method\n        setPriority(priority) {\n            let channel = this.channel;\n            if (channel) {\n                channel.setPriority(this, priority);\n            }\n        };\n\n        run(data) {\n            if (!this.channel.stopped\n                && !(typeof this.predicate === \"function\"\n                && !this.predicate.apply(this.context, data))) {\n                // Check if the callback should be called\n                this._reduceCalls();\n                //Execute function.\n                this.fn.apply(this.context, data)\n            }\n        };\n\n    }\n\n    class Channel {\n        constructor(namespace, parent, context, hook) {\n            this.namespace = namespace || \"\";\n            this._subscribers = [];\n            this._channels = new Map();\n            this._parent = parent;\n            this.stopped = false;\n            this.context = context;\n            this.hook = hook;\n        };\n\n\n        // A Mediator channel holds a list of sub-channels and subscribers to be fired\n        // when Mediator.publish is called on the Mediator instance. It also contains\n        // some methods to manipulate its lists of data; only setPriority and\n        // StopPropagation are meant to be used. The other methods should be accessed\n        // through the Mediator instance.\n\n        addSubscriber(fn, options, context = this.context) {\n            return new Subscriber(fn, options, context, this);\n        };\n\n\n        // The channel instance is passed as an argument to the mediator subscriber,\n        // and further subscriber propagation can be called with\n        // channel.StopPropagation().\n        stopPropagation() {\n            this.stopped = true;\n        };\n\n        // Channel.setPriority is useful in updating the order in which Subscribers\n        // are called, and takes an identifier (subscriber id or named function) and\n        // an array index. It will not search recursively through subchannels.\n\n        setPriority(subscriber, priority) {\n            let subscribers = this._subscribers,\n                index = subscribers.indexOf(subscriber);\n\n            if (index !== -1) {\n                subscribers.splice(subscribers.indexOf(subscriber), 1);\n            }\n\n            if (priority !== undefined && priority < this._subscribers.length) {\n                subscribers.splice(priority, 0, subscriber);\n            } else {\n                subscribers.push(subscriber);\n            }\n        };\n\n        hasChannel(channel) {\n            return this._channels.has(channel);\n        };\n\n        getChannel(channel) {\n            return this._channels.get(channel);\n        };\n\n        setChannel(namespace, readOnly) {\n            if (!this.hasChannel(namespace) && !readOnly) {\n                let channel = new Channel((this.namespace ? this.namespace + ':' : '') + namespace, this, this.context, this.hook);\n                this._channels.set(namespace, channel);\n                return channel;\n            } else {\n                return this.getChannel(namespace)\n            }\n        };\n\n        returnChannel(channels, readOnly) {\n            if (channels && channels.length > 0) {\n                let channel = channels.shift(),\n                    returnChannel = this.setChannel(channel, readOnly);\n                if (returnChannel && channels.length > 0) {\n                    return returnChannel.returnChannel(channels, readOnly);\n                } else {\n                    return returnChannel;\n                }\n            }\n        };\n\n\n        removeSubscriber(subscriber) {\n            let subscribers = this._subscribers,\n                index = subscribers.indexOf(subscriber);\n            // If we don't pass in an value, we're clearing all\n            if (!subscriber) {\n                subscribers.splice(0, subscribers.length);\n            } else if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n\n            if (this._subscribers.length === 0 && this._parent) {\n                this._parent.removeChannel(this);\n            }\n        };\n\n        removeChannel(channel) {\n            if (channel === this.getChannel(channel.namespace)) {\n                this._channels.delete(channel.namespace);\n            }\n        };\n\n        clear() {\n            this._channels.forEach(channel=>channel.clear());\n            this.removeSubscriber();\n        };\n\n        // This will publish arbitrary arguments to a subscriber and then to parent\n        // channels.\n\n        publish(data) {\n            //slice method are cloning array, means default array can remove handlers\n            this._subscribers.slice().forEach(subscriber=>subscriber.run(data));\n\n            if (this._parent) {\n                this._parent.publish(data);\n            }\n\n            this.stopped = false;\n        };\n    }\n\n    class Mediator {\n        constructor(context = {}, hook = ()=> {\n        }) {\n            if (!(this instanceof Mediator)) {\n                return new Mediator(context, hook);\n            }\n            this.channel = new Channel('', false, context, hook);\n        }\n\n        // A Mediator instance is the interface through which events are registered\n        // and removed from publish channels.\n\n\n        // Returns a channel instance based on namespace, for example\n        // application:chat:message:received. If readOnly is true we\n        // will refrain from creating non existing channels.\n\n        getChannel(namespace, readOnly) {\n            let namespaceHierarchy = namespace.split(':');\n            if (namespaceHierarchy.length > 0) {\n                return this.channel.returnChannel(namespaceHierarchy, readOnly);\n            }\n        };\n\n        // Pass in a channel namespace, function to be called, options, and context\n        // to call the function in to Subscribe. It will create a channel if one\n        // does not exist. Options can include a predicate to determine if it\n        // should be called (based on the data published to it) and a priority\n        // index.\n\n        subscribe(channelName, fn, options = {}, context) {\n            if (channelName && channelName !== '') {\n                let channel = this.getChannel(channelName, false);\n                return channel.addSubscriber(fn, options, context);\n            } else {\n                throw Error('Namespace should be provided!');\n            }\n        };\n\n        // Pass in a channel namespace, function to be called, options, and context\n        // to call the function in to Subscribe. It will create a channel if one\n        // does not exist. Options can include a predicate to determine if it\n        // should be called (based on the data published to it) and a priority\n        // index.\n\n        once(channelName, fn, options = {}, context) {\n            options.calls = 1;\n            return this.subscribe(channelName, fn, options, context);\n        };\n\n        // Publishes arbitrary data to a given channel namespace. Channels are\n        // called recursively downwards; a post to application:chat will post to\n        // application:chat:receive and application:chat:derp:test:beta:bananas.\n        // Called using Mediator.publish(\"application:chat\", [ args ]);\n\n        publish(channelName, ...args) {\n            if (channelName && channelName !== '') {\n                let channel = this.getChannel(channelName, true);\n                if (channel && channel.namespace === channelName) {\n                    args.push(channel)\n                    channel.publish(args);\n                }\n            }\n        };\n\n        clear() {\n            this.channel.clear();\n        };\n    }\n\n    // Alias some common names for easy interop\n    Mediator.prototype.on = Mediator.prototype.subscribe;\n    Mediator.prototype.trigger = Mediator.prototype.publish;\n\n    // Finally, expose it all.\n\n    Mediator.version = \"0.9.9\";\n\n    return Mediator;\n}));\n\n/*globals define*/\n(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('router/utils',[], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    }\n}(this, function() {\n    'use strict';\n\n    function parseParams(value) {\n        try {\n            return decodeURIComponent(value.replace(/\\+/g, ' '));\n        }\n        catch (err) {\n            // Failover to whatever was passed if we get junk data\n            return value;\n        }\n    }\n\n    function iterateQueryString(queryString, callback) {\n        let keyValues = queryString.split('&');\n        keyValues.forEach((keyValue)=> {\n            let arr = keyValue.split('=');\n            callback(arr.shift(), arr.join('='));\n        });\n    }\n\n    function setQuery(parts) {\n        let query = {};\n        if (parts) {\n            iterateQueryString(parts, (name, value)=> {\n                value = parseParams(value);\n                if (!query[name]) {\n                    query[name] = value;\n                }\n                else if (typeof query[name] === 'string') {\n                    query[name] = [query[name], value];\n                }\n                else {\n                    query[name].push(value);\n                }\n            });\n        }\n        return query;\n    }\n\n    function serialize(obj) {\n        let str = [];\n        for (let p in obj)\n            if (obj.hasOwnProperty(p)) {\n                str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n            }\n        return str.join(\"&\");\n    };\n\n    function getLocation(params, pattern) {\n\n        return {\n            getQuery() {\n                return params.query;\n            },\n            getLocation(fragment = '', isQuery) {\n                let current = params.root.substring(0, params.root.length - pattern.length),\n                    newQuery;\n\n                if (isQuery === true) {\n                    newQuery = serialize(params.query);\n                }\n                else if (isQuery === false) {\n                    newQuery = '';\n                }\n                else {\n                    newQuery = serialize(isQuery);\n                }\n                return current + fragment + (newQuery.length === 0 ? '' : '?' + newQuery);\n            }\n        }\n    };\n\n    // attach the .equals method to Array's prototype to call it on any array\n    function equals(arr1, arr2) {\n        // if the other arr2 is a falsy value, return\n        if (!arr2)\n            return false;\n        // compare lengths - can save a lot of time\n        if (arr1.length !== arr2.length)\n            return false;\n\n        for (let i = 0, l = arr1.length; i < l; i++) {\n            // Check if we have nested arrays\n            if (arr1[i] instanceof Array && arr2[i] instanceof Array) {\n                // recurse into the nested arrays\n                if (!equals(arr1[i], arr2[i]))\n                    return false;\n            }\n            else if (arr1[i] !== arr2[i]) {\n                // Warning - two different object instances will never be equal: {x:20} != {x:20}\n                return false;\n            }\n        }\n        return true;\n    };\n    const STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg,\n        ARGUMENT_NAMES = /(?:^|,)\\s*([^\\s,=]+)/g;\n\n    function getArgs(func) {\n        let fnStr = func.toString().replace(STRIP_COMMENTS, ''),\n            argsList = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')),\n            result = argsList.match(ARGUMENT_NAMES);\n        return (result === null) ? [] : result.map(item=>item.replace(/[\\s,]/g, ''));\n    }\n\n    return {\n        serialize, getLocation, equals, setQuery, getArgs\n    }\n\n}));\n(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('router/MatchBinding',[\n            './utils'\n        ], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('./utils'));\n    }\n}(this, function(utils) {\n    'use strict';\n\n\n    class MatchBinding {\n        constructor(pattern, location, binder) {\n            if (binder) {\n                this.binder = binder;\n            }\n            if (location === '') {\n                this.pattern = pattern.replace(/^\\(\\/\\)/g, '').replace(/^\\/|$/g, '');\n            } else {\n                let match = pattern.match(/^(\\/|\\(\\/)/g);\n                if (match === null) {\n                    pattern = pattern[0] === '(' ? '(/' + pattern.substring(1) : '/' + pattern;\n                }\n                this.pattern = pattern;\n            }\n\n            let route = this.pattern.replace(MatchBinding.ESCAPE_PARAM, '\\\\$&')\n                .replace(MatchBinding.OPTIONAL_PARAM, '(?:$1)?')\n                .replace(MatchBinding.NAMED_PARAM, function(match, optional) {\n                    return optional ? match : '([^\\/]+)';\n                }).replace(MatchBinding.SPLAT_PARAM, '(.*)');\n\n            this.patternRegExp = new RegExp('^' + route);\n\n            this.routeHandler = new Set();\n            this.leaveHandler = new Set();\n            this.queryHandler = new Set();\n            this._active = false;\n        }\n\n        setRoutes(mapHandler) {\n            var subBinder = this.subBinder;\n            mapHandler({\n                match: subBinder.match.bind(subBinder)\n            });\n            return this;\n        };\n\n        reTrigger() {\n            this.binder.reTrigger();\n        }\n\n        match(match) {\n            var subBinder = this.subBinder;\n            match(subBinder.match.bind(subBinder));\n            return this;\n        };\n\n        to(routeHandler) {\n            this.routeHandler.add({handler: routeHandler, done: false});\n            this.reTrigger();\n            return this;\n        };\n\n        leave(leaveHandler) {\n            var args = utils.getArgs(leaveHandler);\n            this.leaveHandler.add({handler: leaveHandler, done: (args.length > 0 && args[0] === 'done')});\n            return this;\n        };\n\n        query(queryHandler) {\n            this.queryHandler.add({handler: queryHandler, done: false});\n            return this;\n        };\n\n        remove() {\n            this.routeHandler.clear();\n            this.leaveHandler.clear();\n            this.queryHandler.clear();\n            this.subBinder.remove();\n            return this;\n        };\n\n        test(location) {\n            return this.patternRegExp.test(location);\n        };\n\n        getFragment(location) {\n            let matches = location.match(this.patternRegExp);\n            return matches === null ? '' : location.substring(matches[0].length);\n        };\n\n        extractParams(fragment) {\n            let params = this.patternRegExp.exec(fragment)\n            if (params && params.length > 0) {\n                return params.slice(1).map(function(param) {\n                    return param ? decodeURIComponent(param) : null;\n                });\n            } else {\n                return [];\n            }\n        };\n\n        setSubBinder(MatchBinder, pattern, mapHandler) {\n            let subBinder = new MatchBinder(pattern, this);\n            this.subBinder = subBinder;\n            if (typeof mapHandler === 'function') {\n                mapHandler(subBinder.match.bind(subBinder));\n            }\n            return subBinder;\n        };\n\n\n        checkSegment(matched, params) {\n            let status = [];\n            if (this._active) {\n                let pattern = this.pattern.replace(/\\((.*?)\\)/g, '$1').replace(/^\\//, '').split('/'),\n                    prevLoc = this.prevLoc.replace(/^\\//, '').split('/'),\n                    currSegment = matched.slice(0, pattern.length),\n                    prevSegment = prevLoc.slice(0, pattern.length),\n                    equals = (utils.equals(currSegment, prevSegment));\n\n                if (!equals) {\n                    status = this.clearActive(params);\n                } else if (matched.length > 1) {\n                    status = this.subBinder.checkStatus(matched.slice(pattern.length), params);\n                } else if (equals) {\n                    status = this.subBinder.clearActive(params);\n                }\n            }\n            return status;\n        }\n\n        clearActive(params) {\n            let active = [];\n            if (this._active) {\n                active.push({\n                    handler: this.triggerLeave(params),\n                    disable: this.disable.bind(this)\n                });\n            }\n\n            return active.concat(this.subBinder.clearActive());\n        }\n\n        disable() {\n            this._active = false;\n        }\n\n        triggerTo(location, params) {\n            if (this.test(location)) {\n                // check if to is triggered\n                if (!this._active) {\n                    this.prevLoc = location;\n                    let args = this.extractParams(location).concat(utils.getLocation(params, location));\n                    this.applyHandlers(this.routeHandler, args)\n                    this._active = true;\n                }\n\n                // trigger query handler\n                this.applyHandlers(this.queryHandler, [utils.getLocation(params, location)]);\n\n                let fragment = this.getFragment(location);\n                if (fragment.trim() !== '') {\n                    let subBinder = this.subBinder;\n                    if (subBinder) {\n                        subBinder.triggerRoutes(fragment, params);\n                    }\n                }\n            }\n        };\n\n        applyHandlers(handlers, args = []) {\n            if (handlers && handlers.size > 0) {\n                handlers.forEach((item)=> {\n                    item.handler.apply(this, args);\n                });\n            }\n        };\n\n        triggerLeave(params) {\n            return new Promise((resolve)=> {\n                let handlers = this.leaveHandler,\n                    location = utils.getLocation(params, this.prevLoc),\n                    items = 0,\n                    stopped = false;\n                if (handlers && handlers.size > 0) {\n                    handlers.forEach((item)=> {\n                        if (item.done) {\n                            items++;\n                        }\n                        item.handler((done = true)=> {\n                            if (done) {\n                                items--;\n                                if (items === 0 && !stopped) {\n                                    resolve(true);\n                                }\n                            } else if (!done && !stopped) {\n                                stopped = true;\n                                resolve(false);\n                            }\n                        }, location);\n                    });\n                }\n                if (items === 0) {\n                    resolve(true);\n                }\n            });\n        };\n\n\n    }\n\n    Object.assign(MatchBinding, {\n        OPTIONAL_PARAM: /\\((.*?)\\)/g,\n        NAMED_PARAM:    /(\\(\\?)?:\\w+/g,\n        SPLAT_PARAM:    /\\*\\w+/g,\n        ESCAPE_PARAM:   /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g\n    });\n\n    return MatchBinding;\n}));\n(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('router/MatchBinder',[\n            './MatchBinding'\n        ], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('./MatchBinding'));\n    } else {\n        // Browser globals (root is window)\n        root.UrlManager = root.UrlManager || {};\n        root.UrlManager.MatchBinder = factory(root.UrlManager.MatchBinding);\n    }\n}(this, function(MatchBinding) {\n    'use strict';\n\n    class MatchBinder {\n        constructor(location, parent) {\n            this._parent = parent;\n            this.bindings = new Set();\n            this.location = location || '';\n            this._active = false;\n\n        }\n\n        reTrigger() {\n            this._parent.reTrigger();\n        };\n\n        match(pattern, mapHandler) {\n            if (typeof pattern === 'function') {\n                mapHandler = pattern;\n                pattern = false;\n            }\n            if (pattern === '') {\n                pattern = false;\n            }\n            return this.getMatchBinding(pattern, mapHandler);\n        };\n\n        getMatchBinding(pattern, mapHandler) {\n            if (pattern) {\n                let binding = new MatchBinding(pattern, this.location, this);\n                binding.setSubBinder(MatchBinder, this.location + (pattern || ''), mapHandler);\n                this.bindings.add(binding);\n                return binding;\n            } else {\n                if (typeof mapHandler === 'function') {\n                    mapHandler(this.match.bind(this));\n                }\n                return {\n                    match: this.match.bind(this)\n                }\n            }\n        };\n\n        clearActive(params, location) {\n            let active = [];\n            if (this.bindings.size > 0) {\n                this.bindings.forEach((binding)=> {\n                    active = active.concat(binding.clearActive(params, location));\n                });\n            }\n            return active;\n        };\n\n        checkStatus(matched, params) {\n            let active = []\n            if (this.bindings.size > 0) {\n                this.bindings.forEach((binding)=> {\n                    active = active.concat(binding.checkSegment(matched, params));\n                });\n            }\n            return active;\n        };\n\n        remove() {\n            if (this.bindings.size > 0) {\n                this.bindings.forEach((binding)=> binding.remove());\n            }\n        };\n\n     \n\n        triggerRoutes(location, params) {\n            if (this.bindings.size > 0) {\n                this.bindings.forEach(binding=>binding.triggerTo(location, params))\n            }\n        }\n    }\n\n    return MatchBinder;\n}));\n\n/*globals define*/\n(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('router/Router',[\n            './MatchBinder',\n            './utils'\n        ], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('./MatchBinder'), require('./utils'));\n    }\n}(this, function(MatchBinder, utils) {\n        'use strict';\n\n        class Router {\n            constructor(location) {\n                if (location !== undefined && location !== '') {\n                    this._location = location.replace(/^\\/|\\/$/g, '') + '/';\n                }\n                this.root = this.getBinder();\n                this._listeners = new Set();\n                this._handlers = new Set();\n            };\n\n            getBinder() {\n                return new MatchBinder('', this);\n            };\n\n            test(loc) {\n                return new RegExp('^' + this._location, 'g').test(loc);\n            }\n\n            getLocation(loc) {\n                let location = loc.replace(/^\\/|$/g, '');\n                if (this._location !== undefined) {\n                    if (this.test(location)) {\n                        return location.replace(this._location, '');\n                    } else {\n                        return false;\n                    }\n                }\n                return location;\n            };\n\n            reTrigger() {\n                if (this.currLocation) {\n                    this.trigger(this.currLocation);\n                }\n            };\n\n\n            trigger(location) {\n                if (this.started) {\n                    // this.started = false;\n                    this.currLocation = location;\n                    let parts = location.split('?', 2),\n                        segments = this.getLocation(parts[0]);\n                    if (segments || segments === '') {\n                        let query = utils.setQuery(parts[1]),\n                            params = {\n                                root:  segments,\n                                query: query\n                            };\n                        this.execute(segments, params)\n                            .then(move=>this.setRoutes(move, segments, params))\n                            .then(move=> this.setLocation(move));\n                    }\n                }\n            };\n\n            execute(location, params) {\n                return new Promise((resolve)=> {\n                    let matched = location.replace(/^\\/|$/g, '').split('/'),\n                        binder = this.root,\n                        active = binder.checkStatus(matched, params);\n                    if (active.length > 0) {\n                        active.forEach((item)=> {\n                            item.handler.then((applied)=> {\n                                if (!item.triggered) {\n                                    item.triggered = true;\n                                    item.applied = applied;\n                                    if (active.filter(item=>item.applied).length === active.length) {\n                                        active.forEach(item=>item.disable());\n                                        resolve(true);\n                                    } else if (active.filter(item=>item.triggered).length === active.length) {\n                                        resolve(false);\n                                    }\n                                }\n                            });\n                        });\n                    } else {\n                        resolve(true);\n                    }\n                });\n            };\n\n            setRoutes(move, location, params) {\n                if (move) {\n                    this._handlers.forEach(handler=>handler());\n                    this.root.triggerRoutes(location, params);\n                }\n                return move;\n            };\n\n            setListener(listener) {\n                let listeners = this._listeners;\n                listeners.add(listener);\n                return {\n                    remove(){\n                        listeners.delete(listener);\n                    }\n                }\n            };\n\n            onRouteChange(handler) {\n                let handlers = this._handlers;\n                handlers.add(handler);\n                return {\n                    remove(){\n                        handlers.delete(handler);\n                    }\n                }\n            };\n\n\n            setLocation(move) {\n                let location = move ? this.currLocation : this.prevLocation;\n                this.prevLocation = location;\n                // this.started = true;\n                this._listeners.forEach(listener=>listener(location, move));\n            };\n\n            match(mapHandler) {\n                mapHandler(this.root.match.bind(this.root));\n            };\n\n            start() {\n                this.started = true;\n            };\n\n            stop() {\n                this.started = false;\n            };\n        }\n        return Router;\n    }\n));\n\n/**\n * Created by guntars on 11/10/2014.\n */\n/*globals setTimeout, define*/\n// ## widget/App Class\n// Usage Example\n//\n//      define([\n//          'widget/App',\n//          'widget/parser!container/Container',\n//      ], function (App, Container) {\n//          'use strict';\n//          return App.extend({\n//              AppContainer: Container\n//          });\n//      });\ndefine('widget/App',[\n    './Mediator',\n    'router/Router'\n], function(Mediator, Router) {\n    'use strict';\n    function triggerRoute(router, active) {\n        var activeLocation = '';\n\n        router.setListener((location, move)=> {\n            activeLocation = location;\n            if (!move) {\n                window.location.hash = location;\n            }\n        });\n\n        router.onRouteChange(()=> {\n            if (active.size > 0) {\n                active.forEach(handler=>handler());\n                active.clear();\n            }\n        });\n\n        function onHashChange() {\n            let match = window.location.href.match(/#(.*)$/),\n                route = match ? match[1] : ''\n            if (activeLocation !== route) {\n                router.trigger(route);\n            }\n        };\n        router.start();\n        window.addEventListener('hashchange', onHashChange, false);\n        onHashChange();\n    }\n\n    // ### App Class\n    // Creater App, EventBus and context for App.\n    // Usage Example\n    //\n    //      var app= new App();\n    //      app.start(document.body);\n    class App {\n        static extend(options = {}) {\n            class Surrogate extends App {\n            }\n            Object.assign(Surrogate.prototype, options);\n            return Surrogate;\n        };\n\n        constructor(options = {}) {\n            this.options = options;\n            this.beforeInit.apply(this, arguments);\n\n\n        }\n\n\n        // Running 'AppContainer' is initialised.\n        //\n        //      @method beforeInit\n        beforeInit() {\n        };\n\n        // Running after 'AppContainer' is initialised.\n        //\n        //      @method init\n        init() {\n        };\n\n        // SettingContext for the `App`\n        //\n        //      @method setContext\n        setContext() {\n            return {};\n        };\n\n        set context(context) {\n            let router = new Router(this.options.rootRoute);\n            router.match((match)=> {\n                Object.assign(context, {\n                    // Creating `EventBus` More info look in `Mediator` Section\n                    eventBus:  new Mediator(this.context, (channel, scope)=> {\n                        scope._globalEvents = scope._globalEvents || [];\n                        if (scope._globalEvents.indexOf(channel) === -1) {\n                            scope._globalEvents.push(channel);\n                        }\n                    }),\n                    active:    new Map(),\n                    match:     match,\n                    container: this.el\n\n                });\n\n                triggerRoute(router, context.active);\n                this._context = context;\n            })\n        }\n\n        get context() {\n            return this._context;\n        }\n\n        // Starting `App` in provided `Container`\n        //\n        //      @method start\n        //      @param {HTMLElement} container\n        start(container) {\n            if (container instanceof HTMLElement === true) {\n                this.el = container;\n                this.context = this.setContext.apply(this, arguments);\n\n                if (this.AppContainer !== undefined) {\n                    this.appContainer = new this.AppContainer();\n                }\n\n                this.init.call(this, this.options);\n\n                let el = document.createElement('div');\n                this.el.appendChild(el);\n                this.appContainer.ready(el);\n                this.appContainer.setContext(this.context);\n\n\n                setTimeout(() => {\n                    container.classList.add('show');\n                }, 100);\n            } else {\n                throw Error('Contaner should be a HTML element');\n            }\n        }\n    }\n    ;\n    return App;\n});\n"]}