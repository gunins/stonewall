{"version":3,"sources":["../../../es6/dev/widget/Constructor.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAaA,CAAC,UAAU,OAAV,EAAmB;AAChB,QAAI,QAAO,yDAAP,KAAmB,QAAnB,EAA6B;;;;AAI7B,eAAO,OAAP,GAAiB,SAAjB,CAJ6B;KAAjC,MAKO,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAAP,EAAY;;AAEnD,eAAO,OAAP,EAAe,OAAf,EAFmD;KAAhD,MAGA;;AAEH,eAAO,OAAP,GAAiB,SAAjB,CAFG;AAGH,eAAO,KAAP,GAAe,OAAO,OAAP,CAAe,KAAf,CAHZ;AAIH,eAAO,OAAP,GAAiB,OAAO,OAAP,CAAe,OAAf,CAJd;AAKH,eAAO,YAAP,GAAsB,OAAO,OAAP,CAAe,YAAf,CALnB;KAHA;CANV,EAgBC,YAAY;;AAEV,QAAI,UAAU;AACN,gBAAQ,KAAR;KADJ;QAGA,iBAAiB,EAAjB,CALM;;AAOV,QAAI,aAAa,SAAb,UAAa,CAAU,eAAV,EAA2B;AACxC,YAAI,UAAU,EAAV,CADoC;AAExC,eAAO,mBAAmB,QAAQ,QAAR,CAAiB,IAAjB,CAAsB,eAAtB,KAA0C,mBAA1C,CAFc;KAA3B,CAPP;;AAYV,QAAI,QAAQ,SAAR,KAAQ,CAAU,CAAV,EAAa;AACrB,eAAO,IAAI,CAAJ,KAAU,CAAV,CADc;KAAb,CAZF;;AAgBV,QAAI,UAAU,SAAV,OAAU,CAAU,GAAV,EAAe;AACzB,eAAO,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,GAA/B,MAAwC,gBAAxC,CADkB;KAAf,CAhBJ;;AAoBV,QAAI,aAAa,SAAb,UAAa,CAAU,CAAV,EAAa,CAAb,EAAgB;AAC7B,YAAI,QAAQ,EAAR;YACA,QAAQ,EAAR,CAFyB;;AAI7B,YAAI,EAAE,OAAO,CAAP,IAAY,QAAZ,CAAF,IAA2B,EAAE,OAAO,CAAP,IAAY,QAAZ,CAAF,EAAyB;;AAEpD,gBAAI,QAAQ,CAAR,CAAJ,EAAgB;AACZ,qBAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,EAAE,MAAF,EAAU,GAA9B,EAAmC;AAC/B,wBAAI,EAAE,CAAF,MAAS,SAAT,EAAoB,MAAM,IAAN,CAAW,CAAX,EAAxB;iBADJ;aADJ,MAIO;AACH,qBAAK,IAAI,CAAJ,IAAS,CAAd,EAAiB;AACb,wBAAI,EAAE,cAAF,CAAiB,CAAjB,CAAJ,EAAyB;AACrB,4BAAI,EAAE,CAAF,MAAS,SAAT,EAAoB;AACpB,kCAAM,IAAN,CAAW,CAAX,EADoB;yBAAxB;qBADJ;iBADJ;aALJ;;AAcA,gBAAI,QAAQ,CAAR,CAAJ,EAAgB;AACZ,qBAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,EAAE,MAAF,EAAU,GAA9B,EAAmC;AAC/B,wBAAI,EAAE,CAAF,MAAS,SAAT,EAAoB,MAAM,IAAN,CAAW,CAAX,EAAxB;iBADJ;aADJ,MAIO;AACH,qBAAK,IAAI,CAAJ,IAAS,CAAd,EAAiB;AACb,wBAAI,EAAE,cAAF,CAAiB,CAAjB,CAAJ,EAAyB;AACrB,4BAAI,EAAE,CAAF,MAAS,SAAT,EAAoB;AACpB,kCAAM,IAAN,CAAW,CAAX,EADoB;yBAAxB;qBADJ;iBADJ;aALJ;SAhBJ;;AA+BA,eAAO;AACH,mBAAO,KAAP;AACA,qBAAS,KAAT;SAFJ,CAnC6B;KAAhB,CApBP;;AA6DV,QAAI,QAAQ,SAAR,KAAQ,CAAU,GAAV,EAAe;;AAEvB,YAAI,QAAQ,GAAR,IAAe,oBAAmB,iDAAnB,EAAwB;AACvC,mBAAO,GAAP,CADuC;SAA3C;;AAIA,YAAI,OAAO,IAAI,WAAJ,EAAP,CANmB;;AAQvB,aAAK,IAAI,IAAJ,IAAY,GAAjB,EAAsB;AAClB,iBAAK,IAAL,IAAa,IAAI,IAAJ,CAAb,CADkB;SAAtB;;AAIA,eAAO,IAAP,CAZuB;KAAf,CA7DF;;AA6EV,QAAI,kBAAkB,SAAlB,eAAkB,CAAU,GAAV,EAAe,QAAf,EAAyB,MAAzB,EAAiC,MAAjC,EAAyC;;;;;;;;;;;AAavD,YAAI;AACA,mBAAO,cAAP,CAAsB,GAAtB,EAA2B,QAA3B,EAAqC;AACjC,qBAAK,MAAL;AACA,qBAAK,MAAL;AACA,4BAAY,IAAZ;AACA,8BAAc,IAAd;aAJJ,EADA;SAAJ,CAOE,OAAO,EAAP,EAAW;AACT,gBAAI;AACA,uBAAO,SAAP,CAAiB,gBAAjB,CAAkC,IAAlC,CAAuC,GAAvC,EAA4C,QAA5C,EAAsD,MAAtD,EADA;AAEA,uBAAO,SAAP,CAAiB,gBAAjB,CAAkC,IAAlC,CAAuC,GAAvC,EAA4C,QAA5C,EAAsD,MAAtD,EAFA;aAAJ,CAGE,OAAO,EAAP,EAAW;AACT,sBAAM,IAAI,KAAJ,CAAU,yCAAV,CAAN,CADS;aAAX;SAJJ;;;AApBqD,KAAzC,CA7EZ;;AA6GV,QAAI,aAAa,SAAb,UAAa,CAAU,GAAV,EAAe,QAAf,EAAyB,KAAzB,EAAgC;AAC7C,YAAI;AACA,mBAAO,cAAP,CAAsB,GAAtB,EAA2B,QAA3B,EAAqC;AACjC,4BAAY,KAAZ;AACA,8BAAc,IAAd;AACA,0BAAU,KAAV;AACA,uBAAO,KAAP;aAJJ,EADA;SAAJ,CAOE,OAAO,KAAP,EAAc;AACZ,gBAAI,QAAJ,IAAgB,KAAhB,CADY;SAAd;KARW,CA7GP;;AA0HV,QAAI,QAAQ,SAAR,KAAQ,GAAY;;AAEpB,YAAI,WAAW,UAAU,CAAV,CAAX,CAAJ,EAA8B;AAC1B,qBAAS,KAAT,CAAe,IAAf,EAAqB,SAArB,EAD0B;SAA9B,MAEO,IAAI,QAAQ,UAAU,CAAV,CAAR,CAAJ,EAA2B;AAC9B,sBAAU,KAAV,CAAgB,IAAhB,EAAsB,SAAtB,EAD8B;SAA3B,MAEA;AACH,qBAAS,KAAT,CAAe,IAAf,EAAqB,SAArB,EADG;SAFA;KAJC,CA1HF;;AAsIV,QAAI,WAAW,SAAX,QAAW,CAAU,GAAV,EAAe,OAAf,EAAwB,KAAxB,EAA+B,UAA/B,EAA2C;;AAEtD,YAAI,OAAQ,GAAP,IAAc,QAAd,IAA4B,EAAE,eAAe,MAAf,CAAF,IAA4B,CAAC,QAAQ,GAAR,CAAD,EAAgB;;AACzE,mBADyE;SAA7E;;AAIA,YAAI,QAAQ,EAAR,CANkD;;AAQtD,YAAI,QAAQ,GAAR,CAAJ,EAAkB;AACd,iBAAK,IAAI,OAAO,CAAP,EAAU,OAAO,IAAI,MAAJ,EAAY,MAAtC,EAA8C;;AAC1C,sBAAM,IAAN,CAAW,IAAX;AAD0C,aAA9C;SADJ,MAIO;AACH,qBAAK,IAAI,KAAJ,IAAa,GAAlB,EAAuB;;AACnB,wBAAI,SAAS,MAAT,EAAiB;AACjB,iCADiB;qBAArB;;AAIA,wBAAI,OAAO,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,GAArC,EAA0C,KAA1C,CAAJ,EAAsD;AAClD,8BAAM,IAAN,CAAW,KAAX;AADkD,qBAAtD;iBALJ;aALJ;;AAgBA,kBAAU,GAAV,EAAe,KAAf,EAAsB,OAAtB,EAA+B,KAA/B,EAAsC,UAAtC;;AAxBsD,YA0BlD,UAAJ,EAAgB;AACZ,iCAAqB,GAArB,EAA0B,0BAA1B,EAAsD,OAAtD,EAA+D,KAA/D,EADY;SAAhB;KA1BW,CAtIL;;AAqKV,QAAI,YAAY,SAAZ,SAAY,CAAU,GAAV,EAAe,KAAf,EAAsB,OAAtB,EAA+B,KAA/B,EAAsC,UAAtC,EAAkD;;AAE9D,YAAI,OAAQ,GAAP,IAAc,QAAd,IAA4B,EAAE,eAAe,MAAf,CAAF,IAA4B,CAAC,QAAQ,GAAR,CAAD,EAAgB;;AACzE,mBADyE;SAA7E;;AAIA,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAM,MAAN,EAAc,GAAlC,EAAuC;;AACnC,gBAAI,OAAO,MAAM,CAAN,CAAP,CAD+B;AAEnC,qBAAS,GAAT,EAAc,IAAd,EAAoB,OAApB,EAA6B,KAA7B,EAAoC,UAApC,EAFmC;SAAvC;KANY,CArKN;;AAkLV,QAAI,WAAW,SAAX,QAAW,CAAU,GAAV,EAAe,IAAf,EAAqB,OAArB,EAA8B,KAA9B,EAAqC,UAArC,EAAiD;AAC5D,YAAI,OAAQ,GAAP,IAAc,QAAd,IAA4B,EAAE,eAAe,MAAf,CAAF,IAA4B,CAAC,QAAQ,GAAR,CAAD,EAAgB;;AACzE,mBADyE;SAA7E;;AAIA,YAAI,WAAW,IAAI,IAAJ,CAAX,CAAJ,EAA2B;;AACvB,mBADuB;SAA3B;AAGA,YAAI,IAAI,IAAJ,KAAa,IAAb,KAAsB,UAAU,SAAV,IAAuB,QAAQ,CAAR,CAA7C,EAAyD;AACzD,qBAAS,IAAI,IAAJ,CAAT,EAAoB,OAApB,EAA6B,UAAU,SAAV,GAAsB,QAAQ,CAAR,GAAY,KAAlC,CAA7B;AADyD,SAA7D;;AAIA,sBAAc,GAAd,EAAmB,IAAnB,EAAyB,OAAzB,EAAkC,KAAlC,EAZ4D;;AAc5D,YAAI,eAAe,UAAU,SAAV,IAAuB,QAAQ,CAAR,CAAtC,EAAkD;AAClD,iCAAqB,GAArB,EAA0B,IAA1B,EAAgC,OAAhC,EAAyC,KAAzC,EADkD;SAAtD;KAdW,CAlLL;;AAsMV,QAAI,UAAU,SAAV,OAAU,GAAY;;AAEtB,YAAI,WAAW,UAAU,CAAV,CAAX,CAAJ,EAA8B;AAC1B,uBAAW,KAAX,CAAiB,IAAjB,EAAuB,SAAvB,EAD0B;SAA9B,MAEO,IAAI,QAAQ,UAAU,CAAV,CAAR,CAAJ,EAA2B;AAC9B,wBAAY,KAAZ,CAAkB,IAAlB,EAAwB,SAAxB,EAD8B;SAA3B,MAEA;AACH,uBAAW,KAAX,CAAiB,IAAjB,EAAuB,SAAvB,EADG;SAFA;KAJG,CAtMJ;;AAkNV,QAAI,aAAa,SAAb,UAAa,CAAU,GAAV,EAAe,OAAf,EAAwB;;AAErC,YAAI,eAAe,MAAf,IAA0B,EAAE,eAAe,MAAf,CAAF,IAA4B,CAAC,QAAQ,GAAR,CAAD,EAAgB;;AACtE,mBADsE;SAA1E;;AAIA,YAAI,QAAQ,GAAR,CAAJ,EAAkB;AACd,gBAAI,QAAQ,EAAR,CADU;AAEd,iBAAK,IAAI,OAAO,CAAP,EAAU,OAAO,IAAI,MAAJ,EAAY,MAAtC,EAA8C;;AAC1C,sBAAM,IAAN,CAAW,IAAX;AAD0C,aAA9C;AAGA,wBAAY,GAAZ,EAAiB,KAAjB,EAAwB,OAAxB;AALc,SAAlB,MAMO;AACH,oBAAI,uBAAuB,SAAvB,oBAAuB,CAAU,IAAV,EAAgB;AACvC,wBAAI,QAAQ,EAAR,CADmC;AAEvC,yBAAK,IAAI,KAAJ,IAAa,IAAlB,EAAwB;;AACpB,4BAAI,KAAK,cAAL,CAAoB,KAApB,CAAJ,EAAgC;AAC5B,gCAAI,KAAK,KAAL,aAAuB,MAAvB,EAA+B;AAC/B,qDAAqB,KAAK,KAAL,CAArB;AAD+B,6BAAnC,MAEO;AACH,0CAAM,IAAN,CAAW,KAAX;AADG,iCAFP;yBADJ;qBADJ;AASA,gCAAY,IAAZ,EAAkB,KAAlB,EAAyB,OAAzB;AAXuC,iBAAhB,CADxB;AAcH,qCAAqB,GAArB,EAdG;aANP;KANa,CAlNP;;AAgPV,QAAI,cAAc,SAAd,WAAc,CAAU,GAAV,EAAe,KAAf,EAAsB,OAAtB,EAA+B;;AAE7C,aAAK,IAAI,KAAJ,IAAa,KAAlB,EAAyB;;AACrB,gBAAI,MAAM,cAAN,CAAqB,KAArB,CAAJ,EAAiC;AAC7B,2BAAW,GAAX,EAAgB,MAAM,KAAN,CAAhB,EAA8B,OAA9B,EAD6B;aAAjC;SADJ;KAFc,CAhPR;;AAyPV,QAAI,gBAAgB,SAAhB,aAAgB,CAAU,GAAV,EAAe,IAAf,EAAqB,OAArB,EAA8B,KAA9B,EAAqC;;AAErD,YAAI,MAAM,IAAI,IAAJ,CAAN,CAFiD;;AAIrD,uBAAe,GAAf,EAAoB,IAApB,EAJqD;;AAMrD,YAAI,CAAC,IAAI,QAAJ,EAAc;AACf,uBAAW,GAAX,EAAgB,UAAhB,EAA4B,EAA5B,EADe;SAAnB;;AAIA,YAAI,aAAa,KAAb,CAViD;AAWrD,YAAI,CAAC,IAAI,QAAJ,CAAa,IAAb,CAAD,EAAqB;AACrB,gBAAI,QAAJ,CAAa,IAAb,IAAqB,EAArB,CADqB;AAErB,yBAAa,IAAb,CAFqB;SAAzB;;AAKA,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,IAAI,QAAJ,CAAa,IAAb,EAAmB,MAAnB,EAA2B,GAA/C,EAAoD;AAChD,gBAAI,IAAI,QAAJ,CAAa,IAAb,EAAmB,CAAnB,MAA0B,OAA1B,EAAmC;AACnC,uBADmC;aAAvC;SADJ;;AAMA,YAAI,QAAJ,CAAa,IAAb,EAAmB,IAAnB,CAAwB,OAAxB;;AAtBqD,YAwBjD,UAAJ,EAAgB;AACZ,gBAAI,SAAS,SAAT,MAAS,GAAY;AACrB,uBAAO,GAAP,CADqB;aAAZ,CADD;;AAKZ,gBAAI,SAAS,SAAT,MAAS,CAAU,MAAV,EAAkB;AAC3B,oBAAI,SAAS,GAAT,CADuB;AAE3B,sBAAM,MAAN,CAF2B;;AAI3B,oBAAI,UAAU,CAAV,IAAe,IAAI,IAAJ,CAAf,EAA0B;;AAE1B,6BAAS,IAAI,IAAJ,CAAT,EAAoB,OAApB,EAA6B,KAAC,KAAU,SAAV,GAAuB,KAAxB,GAAgC,QAAQ,CAAR,CAA7D,CAF0B;iBAA9B;;AAKA,+BAAe,GAAf,EAAoB,IAApB,EAT2B;;AAW3B,oBAAI,CAAC,QAAQ,MAAR,EAAgB;;AAEjB,wBAAI,WAAW,MAAX,EAAmB;AACnB,qCAAa,GAAb,EAAkB,IAAlB,EAAwB,KAAxB,EAA+B,MAA/B,EAAuC,MAAvC,EADmB;AAEnB,gCAAQ,MAAR,GAAiB,KAAjB,CAFmB;qBAAvB;iBAFJ;aAXS,CALD;;AAyBZ,4BAAgB,GAAhB,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,MAAnC,EAzBY;SAAhB;KAxBgB,CAzPV;;AA+SV,QAAI,eAAe,SAAf,YAAe,CAAU,GAAV,EAAe,IAAf,EAAqB,MAArB,EAA6B,MAA7B,EAAqC,MAArC,EAA6C;AAC5D,YAAI,SAAS,SAAT,EAAoB;AACpB,iBAAK,IAAI,KAAK,CAAL,EAAQ,KAAK,IAAI,QAAJ,CAAa,IAAb,EAAmB,MAAnB,EAA2B,IAAjD,EAAuD;AACnD,oBAAI,QAAJ,CAAa,IAAb,EAAmB,EAAnB,EAAuB,IAAvB,CAA4B,GAA5B,EAAiC,IAAjC,EAAuC,MAAvC,EAA+C,MAA/C,EAAuD,MAAvD,EADmD;aAAvD;SADJ,MAIO;AACH,iBAAK,IAAI,IAAJ,IAAY,GAAjB,EAAsB;;AAClB,oBAAI,IAAI,cAAJ,CAAmB,IAAnB,CAAJ,EAA8B;AAC1B,iCAAa,GAAb,EAAkB,IAAlB,EAAwB,MAAxB,EAAgC,MAAhC,EAAwC,MAAxC,EAD0B;iBAA9B;aADJ;SALJ;KADe;;;AA/ST,QA8TN,cAAc,CAAC,KAAD,EAAQ,MAAR,EAAgB,SAAhB,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,OAA5C,EAAqD,SAArD,EAAgE,QAAhE,CAAd,CA9TM;AA+TV,QAAI,2BAA2B,SAA3B,wBAA2B,CAAU,GAAV,EAAe,IAAf,EAAqB,QAArB,EAA+B,UAA/B,EAA2C;AACtE,mBAAW,IAAI,IAAJ,CAAX,EAAsB,UAAtB,EAAkC,YAAY;AAC1C,gBAAI,WAAW,SAAS,KAAT,CAAe,IAAI,IAAJ,CAAf,EAA0B,SAA1B,CAAX,CADsC;AAE1C,qBAAS,GAAT,EAAc,IAAI,IAAJ,CAAd,EAF0C;AAG1C,gBAAI,eAAe,OAAf,EAAwB;AACxB,6BAAa,GAAb,EAAkB,IAAlB,EAAwB,UAAxB,EAAoC,SAApC,EADwB;aAA5B;AAGA,mBAAO,QAAP,CAN0C;SAAZ,CAAlC,CADsE;KAA3C,CA/TrB;;AA0UV,QAAI,iBAAiB,SAAjB,cAAiB,CAAU,GAAV,EAAe,IAAf,EAAqB;;AAEtC,YAAI,CAAE,IAAI,IAAJ,CAAD,IAAgB,IAAI,IAAJ,aAAqB,MAArB,IAAiC,CAAC,QAAQ,IAAI,IAAJ,CAAR,CAAD,EAAsB;AACxE,mBADwE;SAA5E;;AAIA,aAAK,IAAI,IAAI,YAAY,MAAZ,EAAoB,UAA5B,EAAwC,GAA7C,GAAmD;AAC/C,yBAAa,YAAY,CAAZ,CAAb,CAD+C;AAE/C,qCAAyB,GAAzB,EAA8B,IAA9B,EAAoC,IAAI,IAAJ,EAAU,UAAV,CAApC,EAA2D,UAA3D,EAF+C;SAAnD;KANiB,CA1UX;;AAuVV,QAAI,aAAa,SAAb,UAAa,CAAU,GAAV,EAAe,IAAf,EAAqB,OAArB,EAA8B;;AAE3C,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,IAAI,QAAJ,CAAa,IAAb,EAAmB,MAAnB,EAA2B,GAA/C,EAAoD;AAChD,gBAAI,IAAI,IAAI,QAAJ,CAAa,IAAb,EAAmB,CAAnB,CAAJ,CAD4C;AAEhD,gBAAI,KAAK,OAAL,EAAc;AACd,oBAAI,QAAJ,CAAa,IAAb,EAAmB,MAAnB,CAA0B,CAA1B,EAA6B,CAA7B,EADc;aAAlB;SAFJ;;AAOA,iCAAyB,GAAzB,EAA8B,IAA9B,EAAoC,OAApC,EAT2C;KAA9B,CAvVP;;AAmWV,QAAI,OAAO,SAAP,IAAO,GAAY;;AAEnB,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,eAAe,MAAf,EAAuB,GAA3C,EAAgD;;AAE5C,gBAAI,OAAO,eAAe,CAAf,CAAP,CAFwC;;AAI5C,gBAAI,KAAK,IAAL,KAAc,0BAAd,EAA0C;;AAE1C,oBAAI,aAAa,WAAW,KAAK,GAAL,EAAU,KAAK,MAAL,CAAlC,CAFsC;;AAI1C,oBAAI,WAAW,KAAX,CAAiB,MAAjB,IAA2B,WAAW,OAAX,CAAmB,MAAnB,EAA2B;AACtD,wBAAI,WAAW,KAAX,CAAiB,MAAjB,EAAyB;AACzB,kCAAU,KAAK,GAAL,EAAU,WAAW,KAAX,EAAkB,KAAK,OAAL,EAAc,KAAK,KAAL,GAAa,CAAb,EAAgB,IAApE,EADyB;qBAA7B;;AAIA,yBAAK,OAAL,CAAa,IAAb,CAAkB,KAAK,GAAL,EAAU,MAA5B,EAAoC,eAApC,EAAqD,UAArD,EAAiE,KAAK,MAAL,CAAjE,CALsD;iBAA1D;AAOA,qBAAK,MAAL,GAAc,MAAM,KAAK,GAAL,CAApB,CAX0C;aAA9C,MAaO;;AAEH,oBAAI,aAAa,WAAW,KAAK,GAAL,CAAS,KAAK,IAAL,CAApB,EAAgC,KAAK,MAAL,CAA7C,CAFD;;AAIH,oBAAI,WAAW,KAAX,CAAiB,MAAjB,IAA2B,WAAW,OAAX,CAAmB,MAAnB,EAA2B;AACtD,wBAAI,WAAW,KAAX,CAAiB,MAAjB,EAAyB;AACzB,6BAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,KAAK,GAAL,CAAS,QAAT,CAAkB,KAAK,IAAL,CAAlB,CAA6B,MAA7B,EAAqC,GAAzD,EAA8D;AAC1D,sCAAU,KAAK,GAAL,CAAS,KAAK,IAAL,CAAnB,EAA+B,WAAW,KAAX,EAAkB,KAAK,GAAL,CAAS,QAAT,CAAkB,KAAK,IAAL,CAAlB,CAA6B,CAA7B,CAAjD,EAAkF,KAAK,KAAL,GACA,CADA,EACG,IADrF,EAD0D;yBAA9D;qBADJ;;AAOA,iCAAa,KAAK,GAAL,EAAU,KAAK,IAAL,EAAW,eAAlC,EAAmD,UAAnD,EAA+D,KAAK,MAAL,CAA/D,CARsD;iBAA1D;;AAWA,qBAAK,MAAL,GAAc,MAAM,KAAK,GAAL,CAAS,KAAK,IAAL,CAAf,CAAd,CAfG;aAbP;SAJJ;KAFO,CAnWD;;AA6YV,QAAI,uBAAuB,SAAvB,oBAAuB,CAAU,GAAV,EAAe,IAAf,EAAqB,OAArB,EAA8B,KAA9B,EAAqC;;AAE5D,YAAI,MAAJ,CAF4D;;AAI5D,YAAI,SAAS,0BAAT,EAAqC;AACrC,qBAAS,MAAM,GAAN,CAAT,CADqC;SAAzC,MAEO;AACH,qBAAS,MAAM,IAAI,IAAJ,CAAN,CAAT,CADG;SAFP;;AAMA,uBAAe,IAAf,CAAoB;AAChB,iBAAK,GAAL;AACA,kBAAM,IAAN;AACA,oBAAQ,MAAR;AACA,qBAAS,OAAT;AACA,mBAAO,KAAP;SALJ,EAV4D;KAArC,CA7YjB;;AAgaV,QAAI,2BAA2B,SAA3B,wBAA2B,CAAU,GAAV,EAAe,IAAf,EAAqB,OAArB,EAA8B;;AAEzD,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,eAAe,MAAf,EAAuB,GAA3C,EAAgD;AAC5C,gBAAI,OAAO,eAAe,CAAf,CAAP,CADwC;;AAG5C,gBAAI,KAAK,GAAL,IAAY,GAAZ,IAAmB,KAAK,IAAL,IAAa,IAAb,IAAqB,KAAK,OAAL,IAAgB,OAAhB,EAAyB;AACjE,+BAAe,MAAf,CAAsB,CAAtB,EAAyB,CAAzB,EADiE;aAArE;SAHJ;KAF2B,CAharB;;AA4aV,gBAAY,IAAZ,EAAkB,EAAlB,EA5aU;;AA8aV,YAAQ,KAAR,GAAgB,KAAhB,CA9aU;AA+aV,YAAQ,OAAR,GAAkB,OAAlB,CA/aU;AAgbV,YAAQ,YAAR,GAAuB,YAAvB,CAhbU;;AAkbV,WAAO,OAAP,CAlbU;CAAZ,CAhBF;;;;AAwcA,OAAO,4BAAP,EAAoC,EAApC,EAAwC,YAAW;AAC/C,iBAD+C;;AAE/C,aAAS,WAAT,CAAqB,MAArB,EAA6B,KAA7B,EAAoC,IAApC,EAA0C;AACtC,YAAI,SAAS,MAAM,IAAN,IAAc,MAAvB,EAA+B;AAC/B,wBAAY,MAAZ,EAAoB,KAApB,EAA2B,IAA3B,EAD+B;AAE/B,oBAAQ,MAAR,EAAgB,KAAhB,EAAuB,IAAvB,EAF+B;AAG/B,gBAAI,UAAU,WAAW,MAAX,EAAmB,KAAnB,CAAV,CAH2B;AAI/B,gBAAI,OAAJ,EAAa;AACT,wBAAQ,IAAR,EADS;aAAb;AAGA,mBAAO,QAAP,CAAgB,MAAM,IAAN,CAAhB,GAA8B,KAA9B,CAP+B;AAQ/B,mBAAO,KAAP,CAR+B;SAAnC;KADJ,CAF+C;;AAe/C,aAAS,UAAT,CAAoB,OAApB,EAA6B,KAA7B,EAAoC;AAChC,YAAI,QAAQ,UAAR,CAAmB,MAAM,IAAN,CAAnB,KAAmC,SAAnC,EAA8C;AAC9C,mBAAO,UAAC,IAAD;uBAAS,QAAQ,UAAR,CAAmB,MAAM,IAAN,CAAnB,CAA+B,IAA/B,CAAoC,OAApC,EAA6C,KAA7C,EAAoD,IAApD;aAAT,CADuC;SAAlD;AAGA,eAAO,KAAP,CAJgC;KAApC,CAf+C;;AAsB/C,aAAS,OAAT,CAAiB,OAAjB,EAA0B,KAA1B,EAAiC,IAAjC,EAAuC;AACnC,YAAI,QAAQ,OAAR,CAAgB,MAAM,IAAN,CAAhB,KAAgC,SAAhC,EAA2C;AAC3C,oBAAQ,OAAR,CAAgB,MAAM,IAAN,CAAhB,CAA4B,IAA5B,CAAiC,OAAjC,EAA0C,KAA1C,EAAiD,IAAjD,EAD2C;SAA/C;KADJ;;;;;;;;AAtB+C,aAkCtC,WAAT,CAAqB,OAArB,EAA8B,KAA9B,EAAqC,IAArC,EAA2C;AACvC,YAAI,SAAS,QAAQ,MAAR,CAAe,MAAM,IAAN,CAAxB,CADmC;AAEvC,YAAI,WAAW,SAAX,IAAwB,MAAM,EAAN,KAAa,SAAb,IAA0B,MAAM,IAAN,CAAW,IAAX,KAAoB,IAApB,EAA0B;AAC5E,mBAAO,OAAP,CAAe,UAAC,KAAD,EAAU;AACrB,wBAAQ,OAAR,CAAgB,IAAhB,CAAqB,MAAM,EAAN,CAAS,MAAM,IAAN,EAAY,MAAM,MAAN,EAAc,OAAnC,EAA4C,IAA5C,CAArB,EADqB;aAAV,CAAf,CAD4E;SAAhF;KAFJ,CAlC+C;;AA4C/C,WAAO,MAAP,CAAc,WAAd,EAA2B,EAAC,sBAAD,EAAa,gBAAb,EAAsB,wBAAtB,EAA3B,EA5C+C;;AA8C/C,WAAO,WAAP,CA9C+C;CAAX,CAAxC;;;;AAmDA,OAAO,+BAAP,EAAuC,CACnC,OADmC,EAEnC,eAFmC,CAAvC,EAGG,UAAS,OAAT,EAAkB,WAAlB,EAA+B;AAC9B,QAAI,QAAQ,QAAQ,KAAR,CADkB;;AAG9B,aAAS,cAAT,CAAwB,OAAxB,EAAiC,WAAjC,EAA8C,IAA9C,EAAoD;AAChD,YAAI,OAAO,YAAY,IAAZ,CAAiB,MAAjB,CAAwB,IAAxB;YACP,SAAS,YAAY,IAAZ,CAAiB,MAAjB,CAAwB,MAAxB,CAFmC;AAGhD,YAAI,IAAJ,EAAU;AACN,mBAAO,IAAP,CAAY,IAAZ,EAAkB,OAAlB,CAA0B,UAAC,QAAD,EAAa;AACnC,oBAAI,MAAM,KAAK,QAAL,CAAN;oBACA,WAAW,KAAK,GAAL,CAAX,CAF+B;AAGnC,wBAAQ,QAAR;AACI,yBAAK,OAAL;AACI,4BAAI,WAAW,SAAX,QAAW,CAAC,SAAD,EAAc;AACrB,gCAAI,cAAc,SAAd,IAA2B,cAAc,EAAd,EAAkB;AAC7C,4CAAY,QAAZ,CAAqB,SAArB,EAD6C;AAE7C,uCAAO,SAAP,CAF6C;6BAAjD,MAGO;AACH,uCAAO,KAAP,CADG;6BAHP;yBADO;4BAQX,YAAY,SAAS,QAAT,CAAZ,CATR;;AAWI,4BAAI,WAAW,IAAX,EAAiB;AACjB,kCAAM,IAAN,EAAY,GAAZ,EAAiB,YAAK;AAClB,oCAAI,SAAJ,EAAe;AACX,gDAAY,WAAZ,CAAwB,SAAxB,EADW;iCAAf;AAGA,4CAAY,SAAS,KAAK,GAAL,CAAT,CAAZ,CAJkB;6BAAL,CAAjB,CADiB;yBAArB;;AASA,8BApBJ;AADJ,yBAsBS,SAAL;AACI,4BAAI,aAAa,SAAb,EAAwB;AACxB,wCAAY,EAAZ,CAAe,OAAf,GAAyB,QAAzB,CADwB;yBAA5B;AAGA,4BAAI,WAAW,IAAX,EAAiB;AACjB,kCAAM,IAAN,EAAY,GAAZ,EAAiB;uCAAK,YAAY,EAAZ,CAAe,OAAf,GAAyB,KAAK,GAAL,CAAzB;6BAAL,CAAjB,CADiB;yBAArB;AAGA,8BAPJ;AAtBJ,yBA8BS,OAAL;AACI,4BAAI,aAAa,SAAb,EAAwB;AACxB,wCAAY,EAAZ,CAAe,KAAf,GAAuB,QAAvB,CADwB;yBAA5B;AAGA,4BAAI,WAAW,IAAX,EAAiB;AACjB,kCAAM,IAAN,EAAY,GAAZ,EAAiB;uCAAK,YAAY,EAAZ,CAAe,KAAf,GAAuB,KAAK,GAAL,CAAvB;6BAAL,CAAjB,CADiB;yBAArB;AAGA,8BAPJ;AA9BJ,yBAsCS,UAAL;AACI,4BAAI,aAAa,SAAb,EAAwB;AACxB,wCAAY,EAAZ,CAAe,QAAf,GAA0B,QAA1B,CADwB;yBAA5B;AAGA,4BAAI,WAAW,IAAX,EAAiB;AACjB,kCAAM,IAAN,EAAY,GAAZ,EAAiB;uCAAK,YAAY,EAAZ,CAAe,QAAf,GAA0B,KAAK,GAAL,CAA1B;6BAAL,CAAjB,CADiB;yBAArB;AAGA,8BAPJ;AAtCJ,yBA8CS,MAAL;AACI,4BAAI,aAAa,SAAb,EAAwB;AACxB,wCAAY,IAAZ,CAAiB,QAAjB,EADwB;yBAA5B;AAGA,4BAAI,WAAW,IAAX,EAAiB;AACjB,kCAAM,IAAN,EAAY,GAAZ,EAAiB;uCAAK,YAAY,IAAZ,CAAiB,KAAK,GAAL,CAAjB;6BAAL,CAAjB,CADiB;yBAArB;AAGA,8BAPJ;AA9CJ;AAuDQ,4BAAI,aAAa,SAAb,EAAwB;AACxB,wCAAY,YAAZ,CAAyB,QAAzB,EAAmC,QAAnC,EADwB;yBAA5B;AAGA,4BAAI,WAAW,IAAX,EAAiB;AACjB,kCAAM,IAAN,EAAY,GAAZ,EAAiB;uCAAK,YAAY,YAAZ,CAAyB,QAAzB,EAAmC,KAAK,GAAL,CAAnC;6BAAL,CAAjB,CADiB;yBAArB;AA1DR,iBAHmC;;AAkEnC,oBAAI,KAAK,IAAL,KAAc,SAAd,IAA2B,aAAa,MAAb,EAAqB;AAChD,gCAAY,IAAZ,CAAiB,KAAK,IAAL,CAAjB,CADgD;AAEhD,wBAAI,WAAW,IAAX,EAAiB;AACjB,4BAAI,aAAa,MAAb,EAAqB;AACrB,kCAAM,IAAN,EAAY,MAAZ,EAAoB;uCAAK,YAAY,IAAZ,CAAiB,KAAK,IAAL;6BAAtB,CAApB,CADqB;yBAAzB;qBADJ;iBAFJ;AAQA,oBAAI,WAAW,IAAX,EAAiB;AACjB,wBAAI,UAAU,YAAY,UAAZ,CAAuB,OAAvB,EAAgC,WAAhC,CAAV,CADa;AAEjB,wBAAI,OAAJ,EAAa;AACT,8BAAM,IAAN,EAAY,GAAZ,EAAiB;mCAAK,QAAQ,IAAR;yBAAL,CAAjB,CADS;qBAAb;iBAFJ;aA1EsB,CAA1B,CADM;SAAV;KAHJ;;AA0FA,WAAO,cAAP,CA7F8B;CAA/B,CAHH;;;;AAqGA,OAAO,4BAAP,EAAoC,CAChC,gBADgC,EAEhC,eAFgC,CAApC,EAGG,UAAS,GAAT,EAAc,WAAd,EAA2B;;AAG1B,aAAS,WAAT,CAAqB,OAArB,EAA8D;YAAhC,qFAAiB,GAAe;YAAX,2EAAO,GAAI;;AAC1D,YAAI,OAAJ,EAAa;AACT,gBAAI,WAAW,QAAQ,QAAR,CADN;;AAGT,gBAAI,QAAJ,EAAc;AACV,uBAAO,IAAP,CAAY,QAAZ,EAAsB,OAAtB,CAA8B,UAAC,IAAD,EAAS;AACnC,wBAAI,MAAM,IAAN;wBACA,QAAQ,SAAS,IAAT,CAAR;wBACA,cAAc,eAAe,IAAf,CAAd,CAH+B;AAInC,wBAAI,gBAAgB,SAAhB,EAA2B;AAC3B,4BAAI,QAAQ,KAAR,CAAc,IAAd,MAAwB,SAAxB,EAAmC;AACnC,oCAAQ,KAAR,CAAc,IAAd,EAAoB,IAApB,CAAyB,OAAzB,EAAkC,KAAlC,EAAyC,WAAzC,EAAsD,IAAtD,EADmC;yBAAvC,MAEO,IAAI,UAAU,SAAV,EAAqB;AAC5B,gCAAI,OAAO,WAAP,KAAuB,QAAvB,EAAiC;AACjC,oCAAI,IAAJ,CAAS,KAAT,EAAgB,WAAhB,EADiC;6BAArC,MAGK;AACD,wCAAQ,YAAY,GAAZ,CAAgB,MAAM,EAAN,CAAxB,CADC;6BAHL;yBADG;qBAHX,MAYO,IAAI,QAAQ,KAAR,CAAc,IAAd,MAAwB,SAAxB,IACP,MAAM,IAAN,CAAW,MAAX,CAAkB,QAAlB,EAA4B;AAC5B,gCAAQ,KAAR,CAAc,IAAd,EAAoB,IAApB,CAAyB,OAAzB,EAAkC,KAAlC,EAAyC,IAAzC,EAD4B;AAE5B,8BAAM,KAAN,CAF4B;qBADzB;AAKP,wBAAI,OAAO,MAAM,OAAN,CAAc,IAAd,GAAqB,CAArB,EAAwB;AAC/B,oCAAY,OAAZ,EAAqB,KAArB,EAA4B,IAA5B,EAD+B;qBAAnC;iBArB0B,CAA9B,CADU;aAAd;SAHJ;KADJ;;AAmCA,WAAO,WAAP,CAtC0B;CAA3B,CAHH;;;;AA8CA,OAAO,cAAP,EAAsB,EAAtB,EAAyB,YAAY;AACjC,aAAS,MAAT,CAAgB,GAAhB,EAAqB;AACjB,YAAI,cAAc,gDAAd,CADa;AAEjB,YAAI,EAAE,SAAS,UAAT,IAAuB,SAAS,QAAT,IAAqB,CAAC,CAAC,GAAD,CAA/C,EAAsD;AACtD,mBAAO,GAAP,CADsD;SAA1D;AAGA,YAAI,MAAJ,EAAY,IAAZ,CALiB;AAMjB,aAAK,IAAI,IAAI,CAAJ,EAAO,SAAS,UAAU,MAAV,EAAkB,IAAI,MAAJ,EAAY,GAAvD,EAA4D;AACxD,qBAAS,UAAU,CAAV,CAAT,CADwD;AAExD,iBAAK,IAAL,IAAa,MAAb,EAAqB;AACjB,oBAAI,IAAJ,IAAY,OAAO,IAAP,CAAZ,CADiB;aAArB;SAFJ;AAMA,eAAO,GAAP,CAZiB;KAArB,CADiC;;AAgBjC,aAAS,QAAT,CAAkB,UAAlB,EAA8B,WAA9B,EAA2C;AACvC,YAAI,SAAS,IAAT,CADmC;AAEvC,YAAI,KAAJ,CAFuC;AAGvC,YAAI,cAAc,cAAc,IAAd,IACd,eAAe,IAAf,CAAoB,UAApB,EAAgC,aAAhC,CADA,EACgD;AAChD,oBAAQ,WAAW,WAAX,CADwC;SADpD,MAGO;AACH,oBAAQ,iBAAY;AAChB,uBAAO,OAAO,KAAP,CAAa,IAAb,EAAmB,SAAnB,CAAP,CADgB;aAAZ,CADL;SAHP;;AASA,eAAO,KAAP,EAAc,MAAd,EAAsB,WAAtB,EAZuC;;AAcvC,YAAI,YAAY,SAAZ,SAAY,GAAY;AACxB,iBAAK,WAAL,GAAmB,KAAnB,CADwB;SAAZ,CAduB;AAiBvC,kBAAU,SAAV,GAAsB,OAAO,SAAP,CAjBiB;AAkBvC,cAAM,SAAN,GAAkB,IAAI,SAAJ,EAAlB,CAlBuC;AAmBvC,YAAI,UAAJ,EAAgB;AACZ,mBAAO,MAAM,SAAN,EAAiB,UAAxB,EADY;SAAhB;;AAIA,cAAM,SAAN,GAAkB,OAAO,SAAP,CAvBqB;AAwBvC,eAAO,KAAP,CAxBuC;KAA3C,CAhBiC;;AA2CjC,aAAS,QAAT,CAAkB,GAAlB,EAAuB;AACnB,eAAO,SAAS,IAAT,CAAc,GAAd,MAAuB,iBAAvB,CADY;KAAvB;;AAKA,aAAS,QAAT,CAAkB,GAAlB,EAAuB;AACnB,eAAO,QAAQ,OAAO,GAAP,CAAR,CADY;KAAvB;;AAIA,aAAS,OAAT,CAAiB,GAAjB,EAAsB;AAClB,eAAO,KAAC,CAAM,OAAN,GAAiB,MAAM,OAAN,CAAc,GAAd,CAAlB,GAAuC,SAAS,IAAT,CAAc,GAAd,MAAuB,gBAAvB,CAD5B;KAAtB;;AAKA,WAAO;AACH,kBAAU,QAAV;;AAEA,gBAAU,MAAV;;AAEA,kBAAU,QAAV;;AAEA,kBAAU,QAAV;;AAEA,iBAAU,OAAV;KATJ,CAzDiC;CAAZ,CAAzB;;;;AAwEA,OAAO,2BAAP,EAAmC,EAAnC,EAAsC,YAAY;;AAE9C,aAAS,UAAT,CAAoB,QAApB,EAA8B,QAA9B,EAAwC;AACpC,YAAI,WAAW,EAAX,CADgC;AAEpC,eAAO,cAAP,CAAsB,QAAtB,EAAgC,QAAhC,EAA0C;AACtC,wBAAY,KAAZ;AACA,mBAAY,EAAZ;SAFJ,EAFoC;AAMpC,eAAO,IAAP,CAAY,QAAZ,EAAsB,OAAtB,CAA8B,UAAC,GAAD,EAAS;AACnC,gBAAI,KAAK,SAAS,GAAT,CAAL,CAD+B;AAEnC,gBAAI,MAAM,GAAG,IAAH,IAAW,GAAG,IAAH,CAAQ,IAAR,KAAiB,SAAjB,IAA8B,GAAG,IAAH,CAAQ,IAAR,KAAiB,IAAjB,EAAuB;AACtE,yBAAS,GAAG,IAAH,CAAQ,IAAR,CAAT,GAAyB,SAAS,GAAG,IAAH,CAAQ,IAAR,CAAT,IAA0B,EAA1B,CAD6C;AAEtE,yBAAS,GAAG,IAAH,CAAQ,IAAR,CAAT,CAAuB,IAAvB,CAA4B,EAA5B,EAFsE;aAA1E,MAGO,IAAI,CAAC,QAAD,IAAa,GAAG,IAAH,CAAQ,IAAR,KAAiB,IAAjB,EAAuB;AAC3C,yBAAS,QAAT,EAAmB,IAAnB,CAAwB,EAAxB,EAD2C;aAAxC;SALmB,CAA9B,CANoC;AAepC,eAAO,QAAP,CAfoC;KAAxC;;AAkBA,WAAO,UAAP,CApB8C;CAAZ,CAAtC;;;;AAyBA,OAAO,6BAAP,EAAqC,CACjC,gBADiC,EAEjC,UAFiC,EAGjC,OAHiC,EAIjC,cAJiC,EAKjC,eALiC,EAMjC,kBANiC,CAArC,EAOG,UAAS,GAAT,EAAc,KAAd,EAAqB,OAArB,EAA8B,UAA9B,EAA0C,WAA1C,EAAuD,cAAvD,EAAuE;AACtE,QAAI,QAAQ,QAAQ,KAAR;QACR,UAAU,QAAQ,OAAR,CAFwD;;AAItE,aAAS,WAAT,CAAqB,OAArB,EAA8B,MAA9B,EAAsC,GAAtC,EAA2C,MAA3C,EAAmD;AAC/C,YAAI,WAAW,SAAX,EAAsB;AACtB,gBAAI,OAAO,IAAI,MAAJ,CAAP,CADkB;;AAGtB,gBAAI,QAAQ,KAAR,CAAc,MAAd,CAAJ,EAA2B;AACvB,wBAAQ,KAAR,CAAc,MAAd,EAAsB,IAAtB,CAA2B,OAA3B,EAAoC,MAApC,EAA4C,IAA5C,EADuB;aAA3B,MAEO;AACH,oBAAI,CAAC,MAAM,OAAN,CAAc,IAAd,CAAD,IAAwB,CAAC,MAAM,QAAN,CAAe,IAAf,CAAD,EAAuB;AAC/C,wBAAI,UAAU,OAAO,GAAP,CAAW,IAAX,CAAV,CAD2C;AAE/C,4BAAQ,IAAR,CAAa,IAAb,EAF+C;AAG/C,gCAAY,WAAZ,CAAwB,OAAxB,EAAiC,OAAjC,EAA0C,IAA1C,EAH+C;AAI/C,gCAAY,OAAZ,CAAoB,OAApB,EAA6B,OAA7B,EAAsC,IAAtC,EAJ+C;AAK/C,wBAAI,UAAU,YAAY,UAAZ,CAAuB,OAAvB,EAAgC,OAAhC,CAAV,CAL2C;AAM/C,wBAAI,OAAJ,EAAa;AACT,gCAAQ,IAAR,EADS;qBAAb;;AAKA,wBAAI,QAAQ,IAAR,CAAa,MAAb,CAAoB,MAApB,EAA4B;AAC5B,8BAAM,GAAN,EAAW,MAAX,EAAmB,YAAM;AACrB,oCAAQ,IAAR,CAAa,IAAI,MAAJ,CAAb,EADqB;AAErB,gCAAI,UAAU,YAAY,UAAZ,CAAuB,OAAvB,EAAgC,OAAhC,CAAV,CAFiB;AAGrB,gCAAI,OAAJ,EAAa;AACT,wCAAQ,IAAI,MAAJ,CAAR,EADS;6BAAb;yBAHe,CAAnB,CAD4B;qBAAhC;iBAXJ,MAoBO,IAAI,MAAM,OAAN,CAAc,IAAd,CAAJ,EAAyB;;AAE5B,wBAAI,aAAa,EAAb;wBACA,UAAU,SAAV,OAAU,CAAC,IAAD,EAAO,KAAP,EAAgB;AACtB,4BAAI,WAAW,KAAX,CADkB;AAEtB,4BAAI,CAAC,MAAM,OAAN,CAAc,IAAd,CAAD,IAAwB,CAAC,MAAM,QAAN,CAAe,IAAf,CAAD,EAAuB;AAC/C,uCAAW,IAAX,CAD+C;yBAAnD;AAGA,4BAAI,UAAU,OAAO,GAAP,CAAW,IAAX,EAAiB,KAAjB,CAAV,CALkB;AAMtB,4BAAI,QAAJ,EAAc;AACV,oCAAQ,IAAR,CAAa,IAAb,EADU;yBAAd;;AAIA,mCAAW,IAAX,CAAgB;AACZ,oCAAQ,OAAR;AACA,kCAAQ,IAAR;yBAFJ,EAVsB;;AAetB,uCAAe,OAAf,EAAwB,OAAxB,EAAiC,IAAjC,EAfsB;AAgBtB,oCAAY,WAAZ,CAAwB,OAAxB,EAAiC,OAAjC,EAA0C,IAA1C,EAhBsB;AAiBtB,oCAAY,OAAZ,CAAoB,OAApB,EAA6B,OAA7B,EAAsC,IAAtC,EAjBsB;;AAmBtB,4BAAI,UAAU,YAAY,UAAZ,CAAuB,OAAvB,EAAgC,OAAhC,CAAV,CAnBkB;AAoBtB,4BAAI,OAAJ,EAAa;AACT,oCAAQ,IAAR,EADS;yBAAb;;AAIA,4BAAI,QAAQ,QAAR,EAAkB;AAClB,oCAAQ,QAAR,GAAmB,WAAW,QAAQ,QAAR,CAA9B,CADkB;AAElB,yCAAa,OAAb,EAAsB,IAAtB,EAA4B,OAA5B,EAFkB;yBAAtB;qBAxBM,CAHc;;AAmC5B,yBAAK,OAAL,CAAa,OAAb,EAnC4B;;AAqC5B,wBAAI,SAAS,OAAO,IAAP,CAAY,MAAZ,CAAmB,MAAnB,CArCe;AAsC5B,wBAAI,MAAJ,EAAY;AACR,4BAAI,oBAAoB,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,CAApB;4BACA,oBAAoB,CAAC,MAAD,EAAS,SAAT,CAApB;4BACA,qBAAqB,CAAC,SAAD,EAAY,MAAZ,CAArB,CAHI;AAIR,8BAAM,GAAN,EAAW,MAAX,EAAmB,UAAC,IAAD,EAAO,MAAP,EAAe,QAAf,EAAyB,QAAzB,EAAqC;AACpD,gCAAI,aAAa,WAAW,KAAX,CAAiB,CAAjB,CAAb,CADgD;AAEpD,gCAAI,aAAa,SAAb,IAA0B,kBAAkB,OAAlB,CAA0B,MAA1B,MAAsC,CAAC,CAAD,EAAI;AACpE,oCAAI,SAAS,WAAW,MAAX,CAAkB,UAAC,IAAD;2CAAS,KAAK,IAAL,KAAc,SAAS,CAAT,CAAd;iCAAT,CAA3B,CADgE;;AAGpE,oCAAI,OAAO,MAAP,KAAkB,CAAlB,EAAqB;AACrB,4CAAQ,SAAS,CAAT,CAAR,EAAqB,MAAC,KAAW,SAAX,GAAwB,CAAzB,GAA6B,WAAW,MAAX,CAAlD,CADqB;iCAAzB;6BAHJ,MAMO,IAAI,kBAAkB,OAAlB,CAA0B,MAA1B,MAAsC,CAAC,CAAD,EAAI;AACjD,2CAAW,OAAX,CAAmB,UAAC,MAAD,EAAW;AAC1B,wCAAI,IAAI,MAAJ,EAAY,OAAZ,CAAoB,OAAO,IAAP,CAApB,KAAqC,CAAC,CAAD,EAAI;AACzC,+CAAO,MAAP,CAAc,MAAd,GADyC;AAEzC,mDAAW,MAAX,CAAkB,WAAW,OAAX,CAAmB,MAAnB,CAAlB,EAA8C,CAA9C,EAFyC;qCAA7C;iCADe,CAAnB,CADiD;;AAQjD,oCAAI,WAAW,QAAX,EAAqB;AACrB,wCAAI,OAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,QAA3B,EAAqC,CAArC,CAAP,CADiB;AAErB,wCAAI,QAAQ,KAAK,MAAL,GAAc,CAAd,EAAiB;AACzB,6CAAK,OAAL,CAAa,UAAC,GAAD,EAAQ;AACjB,gDAAI,QAAQ,IAAI,MAAJ,EAAY,OAAZ,CAAoB,GAApB,CAAR,CADa;AAEjB,gDAAI,UAAU,CAAC,CAAD,EAAI;AACd,wDAAQ,GAAR,EAAa,KAAb,EADc;6CAAlB;yCAFS,CAAb,CADyB;qCAA7B;iCAFJ;6BARG,MAmBA,IAAI,mBAAmB,OAAnB,CAA2B,MAA3B,MAAuC,CAAC,CAAD,EAAI;AAClD,qCAAK,OAAL,CAAa,UAAC,KAAD,EAAQ,KAAR,EAAiB;AAC1B,wCAAI,UAAU,WAAW,MAAX,CAAkB;+CAAM,KAAK,IAAL,KAAc,KAAd;qCAAN,CAAlB,CAA6C,CAA7C,CAAV,CADsB;AAE1B,+CAAW,MAAX,CAAkB,KAAlB,EAAyB,CAAzB,EAA4B,WAAW,MAAX,CAAkB,WAAW,OAAX,CAAmB,OAAnB,CAAlB,EAA+C,CAA/C,EAAkD,CAAlD,CAA5B,EAF0B;AAG1B,4CAAQ,MAAR,CAAe,cAAf,CAA8B,KAA9B,EAH0B;iCAAjB,CAAb,CADkD;6BAA/C;yBA3BQ,CAAnB,CAJQ;qBAAZ;iBAtCG,MAkFA,IAAI,MAAM,QAAN,CAAe,IAAf,CAAJ,EAA0B;AAC7B,wBAAI,WAAU,OAAO,GAAP,CAAW,IAAX,CAAV,CADyB;AAE7B,wBAAI,SAAQ,IAAR,CAAa,IAAb,KAAsB,IAAtB,EAA4B;AAC5B,uCAAe,OAAf,EAAwB,QAAxB,EAAiC,IAAjC,EAD4B;AAE5B,oCAAY,WAAZ,CAAwB,OAAxB,EAAiC,QAAjC,EAA0C,IAA1C,EAF4B;AAG5B,oCAAY,OAAZ,CAAoB,OAApB,EAA6B,QAA7B,EAAsC,IAAtC,EAH4B;AAI5B,4BAAI,WAAU,YAAY,UAAZ,CAAuB,OAAvB,EAAgC,QAAhC,CAAV,CAJwB;AAK5B,4BAAI,QAAJ,EAAa;AACT,qCAAQ,IAAR,EADS;yBAAb;AAGA,4BAAI,SAAQ,QAAR,EAAkB;AAClB,qCAAQ,QAAR,GAAmB,WAAW,SAAQ,QAAR,CAA9B,CADkB;AAElB,yCAAa,OAAb,EAAsB,IAAtB,EAA4B,QAA5B,EAFkB;yBAAtB;qBARJ;iBAFG;aAzGX;SAHJ;KADJ,CAJsE;;AAwItE,aAAS,YAAT,CAAsB,KAAtB,EAA6B,GAA7B,EAAkC,QAAlC,EAA4C;AACxC,YAAI,UAAU,SAAS,QAAT,CAD0B;AAExC,YAAI,OAAJ,EAAa;AACT,gBAAI,QAAQ,QAAR,EAAkB,MAAlB,GAA2B,CAA3B,EAA8B;AAC9B,wBAAQ,QAAR,EAAkB,OAAlB,CAA0B,kBAAS;AAC/B,wBAAI,YAAY,OAAO,GAAP,CAAW,GAAX,CAAZ,CAD2B;AAE/B,8BAAU,UAAV,CAAqB,MAAM,OAAN,CAArB,CAF+B;AAG/B,gCAAY,OAAZ,CAAoB,KAApB,EAA2B,SAA3B,EAAsC,GAAtC,EAH+B;AAI/B,wBAAI,UAAU,YAAY,UAAZ,CAAuB,KAAvB,EAA8B,SAA9B,CAAV,CAJ2B;AAK/B,wBAAI,OAAJ,EAAa;AACT,gCAAQ,GAAR,EADS;qBAAb;iBALsB,CAA1B,CAD8B;aAAlC;AAYA,gBAAI,OAAO,OAAO,IAAP,CAAY,OAAZ,CAAP,CAbK;AAcT,gBAAI,OAAO,KAAK,MAAL,GAAc,CAAd,EAAiB;AACxB,qBAAK,OAAL,CAAa,UAAC,SAAD,EAAe;AACxB,wBAAI,IAAI,SAAJ,MAAmB,SAAnB,EAA8B;AAC9B,gCAAQ,SAAR,EAAmB,OAAnB,CAA2B;mCAAQ,YAAY,KAAZ,EAAmB,SAAnB,EAA8B,GAA9B,EAAmC,MAAnC;yBAAR,CAA3B,CAD8B;qBAAlC,MAEO;AACH,4BAAI,KAAK,SAAL,EAAK,CAAC,IAAD,EAAO,MAAP,EAAe,QAAf,EAAyB,QAAzB,EAAsC;AAC3C,gCAAI,aAAa,SAAb,IAA0B,aAAa,SAAb,EAAwB;AAClD,wCAAQ,SAAR,EAAmB,OAAnB,CAA2B;2CAAQ,YAAY,KAAZ,EAAmB,SAAnB,EAA8B,GAA9B,EAAmC,MAAnC;iCAAR,CAA3B,CADkD;AAElD,wCAAQ,GAAR,EAAa,SAAb,EAAwB,EAAxB,EAFkD;6BAAtD;yBADK,CADN;AAOH,8BAAM,GAAN,EAAW,SAAX,EAAsB,EAAtB,EAA0B,CAA1B,EAPG;qBAFP;iBADS,CAAb,CADwB;aAA5B;SAdJ;KAFJ;;AAkCA,WAAO,YAAP,CA1KsE;CAAvE,CAPH;;;;AAsLA,OAAO,0BAAP,EAAkC,CAC9B,gBAD8B,CAAlC,EAEG,UAAS,GAAT,EAAc;;AAEb,QAAM,iBAAiB,kCAAjB;QACF,iBAAiB,uBAAjB,CAHS;;AAKb,aAAS,OAAT,CAAiB,IAAjB,EAAuB;AACnB,YAAI,QAAQ,KAAK,QAAL,GAAgB,OAAhB,CAAwB,cAAxB,EAAwC,EAAxC,CAAR;YACA,WAAW,MAAM,KAAN,CAAY,MAAM,OAAN,CAAc,GAAd,IAAqB,CAArB,EAAwB,MAAM,OAAN,CAAc,GAAd,CAApC,CAAX;YACA,SAAS,SAAS,KAAT,CAAe,cAAf,CAAT,CAHe;AAInB,eAAO,MAAC,KAAW,IAAX,GAAmB,EAApB,GAAyB,OAAO,GAAP,CAAW;mBAAQ,KAAK,OAAL,CAAa,QAAb,EAAuB,EAAvB;SAAR,CAApC,CAJY;KAAvB;;AAOA,aAAS,gBAAT,CAA0B,EAA1B,EAA8B;AAC1B,YAAI,GAAG,MAAH,KAAc,SAAd,EAAyB;AACzB,eAAG,MAAH,GADyB;SAA7B;KADJ;;AAOA,aAAS,eAAT,CAAyB,QAAzB,EAAmC,EAAnC,EAAuC;AACnC,YAAI,aAAa,SAAb,EAAwB;AACxB,mBAAO,IAAP,CAAY,QAAZ,EAAsB,OAAtB,CAA8B,UAAC,IAAD,EAAU;AACpC,oBAAI,WAAW,SAAS,IAAT,CAAX,CADgC;AAEpC,oBAAI,CAAC,aAAa,QAAb,EAAuB,EAAvB,CAAD,EAA6B;AAC7B,uBAAG,QAAH,EAD6B;iBAAjC;aAF0B,CAA9B,CADwB;SAA5B;KADJ;;AAWA,aAAS,YAAT,CAAsB,KAAtB,EAA6B,EAA7B,EAAiC;AAC7B,YAAI,MAAM,OAAN,IAAiB,MAAM,OAAN,CAAc,IAAd,GAAqB,CAArB,EAAwB;AACzC,kBAAM,OAAN,CAAc,OAAd,CAAsB,UAAC,aAAD,EAAmB;AACrC,mBAAG,aAAH,EADqC;aAAnB,CAAtB,CADyC;AAIzC,mBAAO,IAAP,CAJyC;SAA7C;AAMA,eAAO,KAAP,CAP6B;KAAjC;;AAWA,aAAS,UAAT,CAAoB,KAApB,EAA2B,OAA3B,EAAoC;AAChC,YAAI,MAAM,UAAN,EAAkB;AAClB,kBAAM,UAAN,CAAiB,OAAjB,EADkB;SAAtB,MAEO;AACH,gBAAI,QAAQ,KAAC,CAAM,IAAN,KAAe,SAAf,GAA4B,MAAM,IAAN,CAAW,KAAX,GAAmB,SAAhD,CADT;AAEH,gBAAI,UAAU,SAAV,IAAuB,MAAM,IAAN,CAAW,IAAX,KAAoB,IAApB,EAA0B;AACjD,oBAAI,WAAJ;oBACI,QAAQ,QAAQ,KAAR;oBACR,SAAS,QAAQ,MAAR;oBACT,UAAU,MAAM,KAAN,CAAV;oBACA,YAAY,QAAQ,SAAR,GAAoB,QAAQ,SAAR,IAAqB,KAArB;oBAChC,gBAAgB,QAAQ,aAAR,GAAwB,QAAQ,aAAR,IAAyB,EAAzB,CANK;;AAQjD,wBAAQ,EAAR,CAAW,YAAa;sDAAT;;qBAAS;;AACpB,wBAAI,SAAS,KAAK,GAAL,EAAT,CADgB;AAEpB,yBAAK,IAAC,CAAK,MAAL,GAAc,CAAd,GAAmB,OAAO,WAAP,KAAuB,GAAvB,GAA6B,KAAK,IAAL,CAAU,GAAV,CAA7B,GAA8C,SAAlE,CAFe;;AAIpB,wBAAI,CAAC,aAAa,KAAb,EAAoB;+BAAY,IAAI,MAAJ,CAAW,QAAX;qBAAZ,CAArB,EAAwD;AACxD,4BAAI,gBAAgB,MAAM,GAAN,CAAU,IAAV,CAAhB,CADoD;AAExD,wCAAgB,cAAc,QAAd,EAAwB,oBAAY;AAChD,gCAAI,QAAJ,EAAc;;AAEV,sCAAM,KAAN,EAAa;2CAAS,WAAW,QAAX,EAAqB,OAAO,MAAP,CAAc,EAAd,EAAkB,OAAlB,EAA2B;AAClE,oDADkE;AAElE,sDAFkE;qCAA3B,CAArB;iCAAT,CAAb,CAFU;6BAAd;yBADoC,CAAxC,CAFwD;qBAA5D;AAYA,iCAAa,KAAb,EAAoB,UAAC,aAAD,EAAmB;AACnC,wCAAgB,cAAc,QAAd,EAAwB,oBAAY;AAChD,gCAAI,YAAY,SAAS,EAAT,EAAa;AACzB,yCAAS,EAAT,oCAAe,KAAK,MAAL,CAAY,MAAZ,EAAf,EADyB;6BAA7B;yBADoC,CAAxC,CADmC;qBAAnB,CAApB,CAhBoB;iBAAb,CAAX,CARiD;;AAiCjD,wBAAQ,KAAR,CAAc,gBAAQ;AAClB,oCAAgB,EAAhB,CADkB;AAElB,wBAAI,QAAQ,CAAR;wBACA,UAAU,KAAV,CAHc;AAIlB,iCAAa,KAAb,EAAoB,UAAC,aAAD,EAAmB;AACnC,4BAAI,SAAS,SAAT,MAAS,GAAM;AACX,gCAAI,CAAC,EAAD,EAAK;AACL,oCAAI,MAAJ,CAAW,aAAX,EADK;6BAAT,MAEO;AACH,iDAAiB,aAAjB,EADG;6BAFP;yBADK;4BAOT,QAAQ,iBAAkB;gCAAjB,4EAAQ,KAAS;;AACtB,gCAAI,KAAJ,EAAW;AACP,wCADO;6BAAX,MAEO;AACH,0CAAU,IAAV,CADG;AAEH,qCAAK,KAAL,EAFG;6BAFP;;AAOA,gCAAI,UAAU,CAAV,IAAe,CAAC,OAAD,EAAU;AACzB,uCAAO,GAAP,CAAW,aAAX,EAA0B,MAA1B,EADyB;AAEzB,qCAAK,IAAL,EAFyB;6BAA7B;yBARI,CARuB;;AAuBnC,wCAAgB,cAAc,QAAd,EAAwB,oBAAY;AAChD,gCAAI,YAAY,SAAS,KAAT,KAAmB,SAAnB,EAA8B;AAC1C,oCAAI,OAAO,QAAQ,SAAS,KAAT,CAAf,CADsC;AAE1C,oCAAI,KAAK,MAAL,GAAc,CAAd,EAAiB;AACjB,4CADiB;iCAArB;AAGA,yCAAS,KAAT,CAAe,KAAf,EAL0C;6BAA9C;yBADoC,CAAxC,CAvBmC;;AAiCnC,4BAAI,UAAU,CAAV,EAAa;AACb,mCAAO,GAAP,CAAW,aAAX,EAA0B,MAA1B,EADa;AAEb,iCAAK,IAAL,EAFa;yBAAjB;qBAjCgB,CAApB,CAJkB;iBAAR,CAAd,CAjCiD;;AA6EjD,wBAAQ,KAAR,CAAc,kBAAU;;AAEpB,wBAAI,QAAQ,KAAK,SAAL,CAAe,OAAO,QAAP,EAAf,CAAR,CAFgB;AAGpB,wBAAI,cAAc,KAAd,EAAqB;AACrB,oCAAY,KAAZ,CADqB;AAErB,wCAAgB,EAAhB,CAFqB;qBAAzB;AAIA,iCAAa,KAAb,EAAoB,UAAC,aAAD,EAAmB;AACnC,wCAAgB,cAAc,QAAd,EAAwB,UAAC,QAAD,EAAc;AAClD,gCAAI,YAAY,SAAS,KAAT,KAAmB,SAAnB,IAAgC,cAAc,OAAd,CAAsB,QAAtB,MAAoC,CAAC,CAAD,EAAI;AACpF,yCAAS,KAAT,CAAe,MAAf,EADoF;AAEpF,8CAAc,IAAd,CAAmB,QAAnB,EAFoF;6BAAxF;yBADoC,CAAxC,CADmC;qBAAnB,CAApB,CAPoB;iBAAV,CAAd,CA7EiD;AA6FjD,6BAAa,KAAb,EAAoB;2BAAY,SAAS,YAAT,GAAwB,OAAxB;iBAAZ,CAApB,CA7FiD;aAArD,MA+FO,IAAI,MAAM,QAAN,KAAmB,SAAnB,IAAgC,CAAC,IAAD,EAAO,OAAP,CAAe,MAAM,IAAN,CAAW,IAAX,CAAf,KAAoC,CAAC,CAAD,EAAI;AAC/E,gCAAgB,MAAM,QAAN,EAAgB;2BAAY,WAAW,QAAX,EAAqB,OAArB;iBAAZ,CAAhC,CAD+E;aAA5E;SAnGX;KADJ;;AA0GA,aAAS,SAAT,CAAmB,QAAnB,EAA6B,OAA7B,EAAsC;AAClC,wBAAgB,QAAhB,EAA0B;mBAAS,WAAW,KAAX,EAAkB,OAAlB;SAAT,CAA1B,CADkC;KAAtC,CAnJa;;AAwJb,WAAO,SAAP,CAxJa;CAAd,CAFH;;;;AAgKA,OAAO,6BAAP,EAAqC,CACjC,gBADiC,CAArC,EAEG,UAAU,GAAV,EAAe;;;;;AAKd,aAAS,YAAT,GAA6C;YAAvB,+EAAW,GAAY;YAAR,sBAAQ;;AACzC,YAAI,YAAY,EAAZ,CADqC;AAEzC,eAAO,IAAP,CAAY,QAAZ,EAAsB,OAAtB,CAA8B,UAAC,GAAD,EAAQ;AAClC,gBAAI,WAAW,SAAS,GAAT,CAAX,CAD8B;AAElC,gBAAI,OAAO,QAAP,KAAoB,QAApB,EAA8B;AAC9B,oBAAI,UAAU,SAAS,OAAT,CAAiB,KAAjB,CADgB;AAE9B,oBAAI,OAAJ,EAAa;AACT,8BAAU,GAAV,IAAiB,OAAjB,CADS;AAET,wBAAI,mBAAmB,IAAI,OAAJ,KAAgB,IAAnC,IACC,CAAC,IAAD,EAAO,OAAP,CAAe,QAAQ,IAAR,CAAa,IAAb,CAAf,KAAsC,CAAC,CAAD,EAAK;AAC5C,4BAAI,OAAO,QAAQ,IAAR,CAAa,MAAb,CAAoB,IAApB,CADiC;AAE5C,4BAAI,IAAJ,EAAU;AACN,mCAAO,IAAP,CAAY,IAAZ,EAAkB,OAAlB,CAA0B,UAAC,IAAD,EAAS;AAC/B,oCAAI,OAAO,KAAK,IAAL,CAAP,MAAuB,SAAvB,EAAkC;AAClC,wCAAI,SAAS,OAAT,EAAkB;AAClB,gDAAQ,YAAR,CAAqB,IAArB,EAA2B,OAAO,KAAK,IAAL,CAAP,CAA3B,EADkB;qCAAtB,MAEO;AACH,gDAAQ,QAAR,CAAiB,OAAO,KAAK,IAAL,CAAP,CAAjB,EADG;qCAFP;iCADJ;6BADsB,CAA1B,CADM;yBAAV;qBAHJ;iBAFJ,MAkBO;AACH,8BAAU,GAAV,IAAiB,QAAjB,CADG;iBAlBP;aAFJ;SAF0B,CAA9B,CAFyC;;AA8BzC,eAAO,SAAP,CA9ByC;KAA7C;;AAiCA,WAAO,YAAP,CAtCc;CAAf,CAFH;;;;;;;;;;;;;;;;;;AA2DA,OAAO,oBAAP,EAA4B,CACxB,SADwB,EAExB,oBAFwB,EAGxB,gBAHwB,EAIxB,YAJwB,EAKxB,0BALwB,EAMxB,uBANwB,EAOxB,wBAPwB,EAQxB,sBARwB,EASxB,qBATwB,EAUxB,wBAVwB,EAWxB,uBAXwB,CAA5B,EAYG,UAAS,OAAT,EACS,OADT,EAES,GAFT,EAGS,QAHT,EAIS,cAJT,EAKS,WALT,EAMS,aANT,EAOS,UAPT,EAQS,SART,EASS,YATT,EAUS,WAVT,EAUsB;AACrB,iBADqB;;AAIrB,aAAS,QAAT,CAAiB,QAAjB,EAA2B;AACvB,YAAI,OAAO,OAAO,IAAP,CAAY,QAAZ,CAAP,CADmB;AAEvB,YAAI,KAAK,MAAL,GAAc,CAAd,EAAiB;AACjB,iBAAK,OAAL,CAAa,UAAC,GAAD,EAAS;AAClB,oBAAI,QAAQ,MAAR,EAAgB;AAChB,wBAAI,WAAW,SAAS,GAAT,CAAX,CADY;AAEhB,wBAAI,SAAS,OAAT,KAAqB,SAArB,IAAkC,SAAS,OAAT,CAAiB,IAAjB,GAAwB,CAAxB,EAA2B;AAC7D,iCAAS,OAAT,CAAiB,OAAjB,CAAyB,iBAAS;AAC9B,gCAAI,UAAU,SAAV,IAAuB,MAAM,MAAN,KAAiB,SAAjB,EAA4B;AACnD,sCAAM,MAAN,CAAa,IAAb,EADmD;6BAAvD;yBADqB,CAAzB,CAD6D;qBAAjE;iBAFJ;aADS,CAAb,CADiB;SAArB;KAFJ;;;;;;;;AAJqB;QA4Bf;;;qCAC0B;oBAAd,8EAAU,GAAI;;oBAClB;;;;;;;;;;kBAAkB,aADA;;AAGxB,uBAAO,MAAP,CAAc,UAAU,SAAV,EAAqB,OAAnC,EAHwB;AAIxB,uBAAO,SAAP,CAJwB;;;;AAO5B,+BAA8D;gBAAlD,8EAAU,GAAwC;gBAApC,8BAAoC;gBAApB,8EAAU,GAAU;gBAAN,oBAAM;;;;;AAE1D,iBAAK,QAAL,GAAgB,IAAhB,CAF0D;AAG1D,iBAAK,OAAL,GAAe,EAAf,CAH0D;AAI1D,iBAAK,aAAL,GAAqB,EAArB,CAJ0D;AAK1D,iBAAK,eAAL,GAAuB,cAAvB,CAL0D;AAM1D,iBAAK,QAAL,GAAgB,OAAhB,CAN0D;AAO1D,iBAAK,SAAL,GAAiB,KAAjB,CAP0D;AAQ1D,iBAAK,UAAL,GAAkB,MAAM,IAAN,CAAW,SAAX,CAAlB,CAR0D;AAS1D,iBAAK,QAAL,GAAgB,OAAhB,CAT0D;;AAW1D,iBAAK,QAAL,GAAgB,IAAI,QAAJ,CAAa,IAAb,CAAhB,CAX0D;;AAa1D,gBAAI,SAAS,SAAT,IAAsB,KAAK,IAAL,KAAc,SAAd,EAAyB;AAC/C,qBAAK,IAAL,GAAY,KAAK,IAAL,CADmC;aAAnD;AAGA,iBAAK,UAAL,gCAAmB,KAAK,UAAL,CAAnB,EAhB0D;SAA9D;;;;kCAmBM,IAAI;AACN,qBAAK,EAAL,GAAU,EAAV,CADM;;;;uCAIC,SAAS;AAChB,oBAAI,CAAC,KAAK,OAAL,EAAc;AACf,yBAAK,OAAL,GAAe,OAAf,CADe;AAEf,wBAAI,CAAC,KAAK,KAAL,EAAY;AACb,6BAAK,MAAL,GADa;qBAAjB;AAGA,yBAAK,IAAL,gCAAa,KAAK,UAAL,CAAb,EALe;iBAAnB;;;;;;;;;mCAmCG,MAAM;AACT,oBAAI,CAAC,KAAK,SAAL,EAAgB;AACjB,wBAAI,KAAK,QAAL,EAAe;AACf,4BAAI,IAAJ,EAAU;AACN,iCAAK,IAAL,GAAY,IAAZ,CADM;yBAAV;AAGA,4BAAI,UAAU,KAAK,QAAL;4BACV,iBAAiB,KAAK,eAAL;4BACjB,UAAU,IAAI,OAAJ,CAAY,KAAK,QAAL,CAAtB;4BACA,WAAW,QAAQ,MAAR,CAAe,KAAK,IAAL,CAA1B,CAPW;AAQf,4BAAI,KAAK,EAAL,EAAS;AACT,gCAAI,SAAS,KAAK,EAAL,CAAQ,UAAR,CADJ;AAET,gCAAI,MAAJ,EAAY;AACR,uCAAO,YAAP,CAAoB,SAAS,QAAT,EAAmB,KAAK,EAAL,CAAvC,CADQ;6BAAZ;AAGA,gCAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,GAAb,CAAiB,KAAK,EAAL,CAAjC,EAA2C;AAC3C,qCAAK,OAAL,CAAa,MAAb,CAAoB,KAAK,EAAL,CAApB,CAD2C;AAE3C,qCAAK,EAAL,GAAU,SAAS,QAAT,CAFiC;AAG3C,qCAAK,OAAL,CAAa,GAAb,CAAiB,SAAS,QAAT,EAAmB,IAApC,EAH2C;6BAA/C;yBALJ,MAUO;AACH,iCAAK,EAAL,GAAU,SAAS,QAAT,CADP;yBAVP;;AAeA,6BAAK,IAAL,GAAY,IAAI,IAAI,OAAJ,CAAY,SAAS,QAAT,EAAmB;AAC3C,kCAAM,MAAN;AACA,kCAAM,EAAN;yBAFQ,CAAZ,CAvBe;;AA4Bf,6BAAK,QAAL,GAAgB,aAAa,SAAS,QAAT,EAAmB,OAAhC,CAAhB,CA5Be;AA6Bf,oCAAY,IAAZ,EAAkB,cAAlB,EAAkC,KAAK,IAAL,CAAlC,CA7Be;AA8Bf,6BAAK,QAAL,GAAgB,WAAW,KAAK,QAAL,EAAe,IAA1B,CAAhB,CA9Be;;AAgCf,4BAAI,KAAK,IAAL,EAAW;AACX,iCAAK,YAAL,CAAkB,KAAK,IAAL,EAAW,IAA7B,EADW;yBAAf;;AAIA,kCAAU,KAAK,QAAL,EAAe,KAAK,OAAL,CAAzB,CApCe;AAqCf,oCAAY,IAAZ,EAAkB,KAAK,IAAL,CAAlB,CArCe;AAsCf,6BAAK,QAAL,gCAAiB,KAAK,UAAL,CAAjB,EAtCe;AAuCf,6BAAK,SAAL,GAAiB,IAAjB,CAvCe;qBAAnB,MAwCO;AACH,4BAAI,cAAc,SAAS,aAAT,CAAuB,KAAvB,CAAd,CADD;AAEH,6BAAK,IAAL,GAAY,IAAI,IAAI,OAAJ,CAAY,WAAhB,EAA6B;AACrC,kCAAM,MAAN;AACA,kCAAM,EAAN;yBAFQ,CAAZ,CAFG;AAMH,4BAAI,KAAK,EAAL,EAAS;AACT,gCAAI,UAAS,KAAK,EAAL,CAAQ,UAAR,CADJ;AAET,gCAAI,OAAJ,EAAY;AACR,wCAAO,YAAP,CAAoB,WAApB,EAAiC,KAAK,EAAL,CAAjC,CADQ;6BAAZ;yBAFJ;AAMA,6BAAK,EAAL,GAAU,WAAV,CAZG;AAaH,6BAAK,QAAL,GAAgB,EAAhB,CAbG;AAcH,oCAAY,IAAZ,EAAkB,KAAK,IAAL,CAAlB,CAdG;;AAgBH,6BAAK,QAAL,gCAAiB,KAAK,UAAL,CAAjB,EAhBG;AAiBH,6BAAK,SAAL,GAAiB,IAAjB,CAjBG;qBAxCP;iBADJ;;;;;;;;;;;;;;uCAuEO,MAAM,UAAU,SAAS;;;;;;;;;;;;;iCAW/B,MAAM,UAAU,SAAS;;;;;;;;;;;;;qCAWrB,MAAM,UAAU,SAAS;;;;;;;;;oCAQ1B,KAAK;AACT,oBAAI,KAAK,OAAL,CAAa,SAAb,CAAuB,OAAvB,CAA+B,GAA/B,MAAwC,CAAC,CAAD,EAAI;AAC5C,yBAAK,OAAL,CAAa,SAAb,CAAuB,IAAvB,CAA4B,GAA5B,EAD4C;AAE5C,wBAAI,UAAU,SAAS,aAAT,CAAuB,MAAvB,CAAV,CAFwC;AAG5C,4BAAQ,YAAR,CAAqB,KAArB,EAA4B,YAA5B,EAH4C;AAI5C,4BAAQ,YAAR,CAAqB,MAArB,EAA6B,UAA7B,EAJ4C;AAK5C,4BAAQ,YAAR,CAAqB,MAArB,EAA6B,GAA7B,EAL4C;AAM5C,wBAAI,OAAO,OAAP,IAAkB,WAAlB,EAA+B;AAC/B,iCAAS,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyC,WAAzC,CAAqD,OAArD,EAD+B;qBAAnC;iBANJ;;;;;;;;;qCAgBK;AACL,oBAAI,CAAC,KAAK,YAAL,EAAmB;AACpB,yBAAK,YAAL,GAAoB,SAAS,aAAT,CAAuB,KAAK,EAAL,CAAQ,OAAR,CAA3C,CADoB;iBAAxB;AAGA,oBAAI,CAAC,KAAK,OAAL,EAAc;AACf,yBAAK,OAAL,GAAe,KAAK,EAAL,CAAQ,UAAR,CADA;iBAAnB;;AAIA,oBAAI,KAAK,EAAL,IAAW,KAAK,OAAL,EAAc;AACzB,yBAAK,OAAL,CAAa,YAAb,CAA0B,KAAK,YAAL,EAAmB,KAAK,EAAL,CAA7C,CADyB;iBAA7B;;;;;;;;;qCASK;AACL,oBAAI,KAAK,YAAL,IAAqB,KAAK,OAAL,EAAc;AACnC,yBAAK,OAAL,CAAa,YAAb,CAA0B,KAAK,EAAL,EAAS,KAAK,YAAL,CAAnC,CADmC;iBAAvC;;;;;;;;;wCAQQ;;;;;;;;sCAOF;AACN,qBAAK,SAAL,GADM;AAEN,qBAAK,QAAL,CAAc,KAAd,GAFM;AAGN,uBAAO,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAtB,EAAyB;AAC5B,yBAAK,OAAL,CAAa,KAAb,GAAqB,MAArB,GAD4B;iBAAhC;;AAIA,uBAAO,KAAK,aAAL,CAAmB,MAAnB,GAA4B,CAA5B,EAA+B;AAClC,yBAAK,aAAL,CAAmB,KAAnB,GAA2B,MAA3B,GADkC;iBAAtC;;AAIA,yBAAQ,KAAK,QAAL,CAAR,CAXM;;AAaN,oBAAI,KAAK,OAAL,KAAiB,SAAjB,IAA8B,KAAK,EAAL,KAAY,SAAZ,EAAuB;AACrD,yBAAK,OAAL,CAAa,MAAb,CAAoB,KAAK,EAAL,CAApB,CADqD;iBAAzD;AAGA,oBAAI,KAAK,IAAL,IAAa,KAAK,IAAL,CAAU,MAAV,EAAkB;AAC/B,yBAAK,IAAL,CAAU,MAAV,GAD+B;iBAAnC;;AAIA,uBAAO,KAAK,EAAL,CApBD;;;;qCAwBM;AACZ,qBAAK,OAAL,wBADY;;;;;;;;;;;wCASJ,IAAI,MAAM;AAClB,oBAAI,OAAO,GAAG,IAAH,CAAQ,IAAR;oBACP,WAAW,KAAK,QAAL,CAAc,IAAd,CAAX,CAFc;;AAIlB,oBAAI,aAAa,SAAb,IAA0B,SAAS,EAAT,KAAgB,SAAhB,EAA2B;AACrD,6BAAS,MAAT,GADqD;iBAAzD;;AAIA,oBAAI,cAAc,GAAG,GAAH,CAAO,QAAQ,IAAR,CAArB,CARc;AASlB,oBAAI,YAAY,UAAZ,EAAwB;AACxB,gCAAY,UAAZ,CAAuB,KAAK,OAAL,CAAvB,CADwB;iBAA5B;AAGA,4BAAY,IAAZ,EAAkB,WAAlB,EAA+B,IAA/B,EAZkB;AAalB,uBAAO,WAAP,CAbkB;;;;;;;;;;;;;;yCAyBT,WAAW,SAAS;AAC7B,oBAAI,OAAO,QAAQ,IAAR;oBACP,YAAY,QAAQ,SAAR,CAFa;;AAI7B,oBAAI,SAAS,SAAT,EAAoB;AACpB,0BAAO,6CAAP,CADoB;iBAAxB,MAEO,IAAI,cAAc,SAAd,EAAyB;AAChC,0BAAO,6CAAP,CADgC;iBAA7B,MAEA,IAAI,KAAK,QAAL,CAAc,IAAd,MAAwB,SAAxB,EAAmC;AAC1C,0BAAO,0BAA0B,IAA1B,GAAiC,oBAAjC,CADmC;iBAAvC;AAGP,oBAAI,YAAY,KAAK,YAAL,CAAkB,SAAlB,EAA6B,OAA7B,CAAZ;oBACA,WAAW,UAAU,GAAV,CAAc,QAAQ,SAAR,CAAzB,CAZyB;AAa7B,yBAAS,UAAT,CAAoB,KAAK,OAAL,CAApB,CAb6B;AAc7B,qBAAK,QAAL,CAAc,IAAd,IAAsB,QAAtB,CAd6B;AAe7B,uBAAO,QAAP,CAf6B;;;;yCAkBpB,WAAW,SAAS;;;AAC7B,oBAAI,WAAW;AACX,0BAAM,QAAQ,IAAR;AACN,0BAAM;AACF,6BAAM,KAAN;AACA,8BAAM,IAAN;qBAFJ;AAIA,yBAAM,aAAC,SAAD,EAAe;AACjB,gCAAQ,UAAR,GAAqB,OAAK,OAAL,CADJ;AAEjB,4BAAI,KAAK,IAAI,SAAJ,CAAc,OAAd,EAAuB,QAAQ,QAAR,EAAkB,QAAQ,IAAR,CAA9C;4BACA,KAAK,SAAS,aAAT,CAAuB,KAAvB,CAAL,CAHa;AAIjB,2BAAG,YAAH,CAAgB,OAAhB,EAAyB,eAAzB,EAJiB;AAKjB,2BAAG,KAAH,CAAS,EAAT,EALiB;;AAOjB,4BAAI,qBAAqB,WAArB,KAAqC,IAArC,EAA2C;AAC3C,sCAAU,UAAV,CAAqB,YAArB,CAAkC,GAAG,EAAH,EAAO,SAAzC,EAD2C;yBAA/C,MAEO,IAAI,UAAU,EAAV,KAAiB,SAAjB,IAA8B,QAAQ,GAAR,KAAgB,SAAhB,EAA2B;AAChE,gCAAI,YAAJ,CAAiB,SAAjB,EAA4B,EAA5B,EAAgC,QAAQ,GAAR,CAAhC,CADgE;yBAA7D,MAEA,IAAI,UAAU,EAAV,KAAiB,SAAjB,EAA4B;AACnC,gCAAI,MAAJ,CAAW,SAAX,EAAsB,EAAtB,EADmC;yBAAhC;AAGP,+BAAO,EAAP,CAdiB;qBAAf;iBANN,CADyB;AAwB7B,uBAAO,QAAP,CAxB6B;;;;;;;;;;;;;;;;;2CAsCX;mDAAN;;iBAAM;;AAClB,uBAAO,gCAAa,aAAS,KAAtB,CAAP,CADkB;;;;8BApSV,SAAS;;;AACjB,oBAAI,CAAC,KAAK,IAAL,EAAW;AACZ,wBAAI,OAAO,IAAC,CAAK,QAAL,GAAiB,OAAO,IAAP,CAAY,KAAK,QAAL,CAA9B,GAA+C,EAA/C;wBACP,cAAc,IAAC,CAAK,MAAL,GAAc,CAAd,GAAmB,KAAK,QAAL,GAAgB,QAAQ,IAAR,CAF1C;AAGZ,wBAAI,WAAJ,EAAiB;AACb,6BAAK,IAAL,GAAY,YAAY,KAAK,QAAL,CAAc,IAAd,CAAZ,IAAmC,WAAnC,CADC;qBAAjB;iBAHJ;AAOA,wBAAQ,KAAR,CAAc,UAAC,KAAD,EAAW;AACrB,wBAAI,OAAK,KAAL,EAAY;AACZ,+BAAK,KAAL,CAAW,KAAX,EADY;qBAAhB;;AAIA,2BAAK,QAAL,GAAgB,OAAO,MAAP,CAAc;AAC1B,+BAAO,KAAP;qBADY,EAEb,OAFa,CAAhB,CALqB;iBAAX,CAAd,CARiB;;gCAmBP;AACV,uBAAO,KAAK,QAAL,CADG;;;;;QAxFG;;AA6WrB,WAAO,MAAP,CAAc,YAAY,SAAZ,EAAuB;;;;;;;;;;AAUjC,eAAO,EAAP;;;;;;;;;;;;;;;;AAgBA,gBAAY,EAAZ;;;;;;;;;;;AAWA,iBAAY,EAAZ;;;;;;;;;;;AAWA,oBAAY,EAAZ;KAhDJ,EA7WqB;;AAiarB,WAAO,WAAP,CAjaqB;CAVtB,CAZH","file":"Constructor.js","sourcesContent":["/**\n * DEVELOPED BY\n * GIL LOPES BUENO\n * gilbueno.mail@gmail.com\n *\n * WORKS WITH:\n * IE 9+, FF 4+, SF 5+, WebKit, CH 7+, OP 12+, BESEN, Rhino 1.7+\n *\n * FORK:\n * https://github.com/melanke/Watch.JS\n */\n\n\n(function (factory) {\n    if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('watch',factory);\n    } else {\n        // Browser globals\n        window.WatchJS = factory();\n        window.watch = window.WatchJS.watch;\n        window.unwatch = window.WatchJS.unwatch;\n        window.callWatchers = window.WatchJS.callWatchers;\n    }\n}(function () {\n\n    var WatchJS = {\n            noMore: false\n        },\n        lengthsubjects = [];\n\n    var isFunction = function (functionToCheck) {\n        var getType = {};\n        return functionToCheck && getType.toString.call(functionToCheck) == '[object Function]';\n    };\n\n    var isInt = function (x) {\n        return x % 1 === 0;\n    };\n\n    var isArray = function (obj) {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    var getObjDiff = function (a, b) {\n        var aplus = [],\n            bplus = [];\n\n        if (!(typeof a == \"string\") && !(typeof b == \"string\")) {\n\n            if (isArray(a)) {\n                for (var i = 0; i < a.length; i++) {\n                    if (b[i] === undefined) aplus.push(i);\n                }\n            } else {\n                for (var i in a) {\n                    if (a.hasOwnProperty(i)) {\n                        if (b[i] === undefined) {\n                            aplus.push(i);\n                        }\n                    }\n                }\n            }\n\n            if (isArray(b)) {\n                for (var j = 0; j < b.length; j++) {\n                    if (a[j] === undefined) bplus.push(j);\n                }\n            } else {\n                for (var j in b) {\n                    if (b.hasOwnProperty(j)) {\n                        if (a[j] === undefined) {\n                            bplus.push(j);\n                        }\n                    }\n                }\n            }\n        }\n\n        return {\n            added: aplus,\n            removed: bplus\n        }\n    };\n\n    var clone = function (obj) {\n\n        if (null == obj || \"object\" != typeof obj) {\n            return obj;\n        }\n\n        var copy = obj.constructor();\n\n        for (var attr in obj) {\n            copy[attr] = obj[attr];\n        }\n\n        return copy;\n\n    }\n\n    var defineGetAndSet = function (obj, propName, getter, setter) {\n       /* try {\n\n            Object.observe(obj, function (changes) {\n                changes.forEach(function (change) {\n                    if (change.name === propName) {\n                        setter(change.object[change.name]);\n                    }\n                });\n            });\n\n        } catch (e) {*/\n\n            try {\n                Object.defineProperty(obj, propName, {\n                    get: getter,\n                    set: setter,\n                    enumerable: true,\n                    configurable: true\n                });\n            } catch (e2) {\n                try {\n                    Object.prototype.__defineGetter__.call(obj, propName, getter);\n                    Object.prototype.__defineSetter__.call(obj, propName, setter);\n                } catch (e3) {\n                    throw new Error(\"watchJS error: browser not supported :/\")\n                }\n            }\n\n        // }\n    };\n\n    var defineProp = function (obj, propName, value) {\n        try {\n            Object.defineProperty(obj, propName, {\n                enumerable: false,\n                configurable: true,\n                writable: false,\n                value: value\n            });\n        } catch (error) {\n            obj[propName] = value;\n        }\n    };\n\n    var watch = function () {\n\n        if (isFunction(arguments[1])) {\n            watchAll.apply(this, arguments);\n        } else if (isArray(arguments[1])) {\n            watchMany.apply(this, arguments);\n        } else {\n            watchOne.apply(this, arguments);\n        }\n\n    };\n\n    var watchAll = function (obj, watcher, level, addNRemove) {\n\n        if ((typeof obj == \"string\") || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        var props = [];\n\n        if (isArray(obj)) {\n            for (var prop = 0; prop < obj.length; prop++) { //for each item if obj is an array\n                props.push(prop); //put in the props\n            }\n        } else {\n            for (var prop2 in obj) { //for each attribute if obj is an object\n                if (prop2 == \"$val\") {\n                    continue;\n                }\n\n                if (Object.prototype.hasOwnProperty.call(obj, prop2)) {\n                    props.push(prop2); //put in the props\n                }\n            }\n        }\n\n        watchMany(obj, props, watcher, level, addNRemove); //watch all items of the props\n\n        if (addNRemove) {\n            pushToLengthSubjects(obj, \"$$watchlengthsubjectroot\", watcher, level);\n        }\n    };\n\n    var watchMany = function (obj, props, watcher, level, addNRemove) {\n\n        if ((typeof obj == \"string\") || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        for (var i = 0; i < props.length; i++) { //watch each property\n            var prop = props[i];\n            watchOne(obj, prop, watcher, level, addNRemove);\n        }\n\n    };\n\n    var watchOne = function (obj, prop, watcher, level, addNRemove) {\n        if ((typeof obj == \"string\") || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        if (isFunction(obj[prop])) { //dont watch if it is a function\n            return;\n        }\n        if (obj[prop] != null && (level === undefined || level > 0)) {\n            watchAll(obj[prop], watcher, level !== undefined ? level - 1 : level); //recursively watch all attributes of this\n        }\n\n        defineWatcher(obj, prop, watcher, level);\n\n        if (addNRemove && (level === undefined || level > 0)) {\n            pushToLengthSubjects(obj, prop, watcher, level);\n        }\n\n    };\n\n    var unwatch = function () {\n\n        if (isFunction(arguments[1])) {\n            unwatchAll.apply(this, arguments);\n        } else if (isArray(arguments[1])) {\n            unwatchMany.apply(this, arguments);\n        } else {\n            unwatchOne.apply(this, arguments);\n        }\n\n    };\n\n    var unwatchAll = function (obj, watcher) {\n\n        if (obj instanceof String || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        if (isArray(obj)) {\n            var props = [];\n            for (var prop = 0; prop < obj.length; prop++) { //for each item if obj is an array\n                props.push(prop); //put in the props\n            }\n            unwatchMany(obj, props, watcher); //watch all itens of the props\n        } else {\n            var unwatchPropsInObject = function (obj2) {\n                var props = [];\n                for (var prop2 in obj2) { //for each attribute if obj is an object\n                    if (obj2.hasOwnProperty(prop2)) {\n                        if (obj2[prop2] instanceof Object) {\n                            unwatchPropsInObject(obj2[prop2]); //recurs into object props\n                        } else {\n                            props.push(prop2); //put in the props\n                        }\n                    }\n                }\n                unwatchMany(obj2, props, watcher); //unwatch all of the props\n            };\n            unwatchPropsInObject(obj);\n        }\n    };\n\n    var unwatchMany = function (obj, props, watcher) {\n\n        for (var prop2 in props) { //watch each attribute of \"props\" if is an object\n            if (props.hasOwnProperty(prop2)) {\n                unwatchOne(obj, props[prop2], watcher);\n            }\n        }\n    };\n\n    var defineWatcher = function (obj, prop, watcher, level) {\n\n        var val = obj[prop];\n\n        watchFunctions(obj, prop);\n\n        if (!obj.watchers) {\n            defineProp(obj, \"watchers\", {});\n        }\n\n        var newWatcher = false;\n        if (!obj.watchers[prop]) {\n            obj.watchers[prop] = [];\n            newWatcher = true;\n        }\n\n        for (var i = 0; i < obj.watchers[prop].length; i++) {\n            if (obj.watchers[prop][i] === watcher) {\n                return;\n            }\n        }\n\n        obj.watchers[prop].push(watcher); //add the new watcher in the watchers array\n\n        if (newWatcher) {\n            var getter = function () {\n                return val;\n            };\n\n            var setter = function (newval) {\n                var oldval = val;\n                val = newval;\n\n                if (level !== 0 && obj[prop]) {\n                    // watch sub properties\n                    watchAll(obj[prop], watcher, (level === undefined) ? level : level - 1);\n                }\n\n                watchFunctions(obj, prop);\n\n                if (!WatchJS.noMore) {\n                    //if (JSON.stringify(oldval) !== JSON.stringify(newval)) {\n                    if (oldval !== newval) {\n                        callWatchers(obj, prop, \"set\", newval, oldval);\n                        WatchJS.noMore = false;\n                    }\n                }\n            };\n\n            defineGetAndSet(obj, prop, getter, setter);\n        }\n\n    };\n\n    var callWatchers = function (obj, prop, action, newval, oldval) {\n        if (prop !== undefined) {\n            for (var wr = 0; wr < obj.watchers[prop].length; wr++) {\n                obj.watchers[prop][wr].call(obj, prop, action, newval, oldval);\n            }\n        } else {\n            for (var prop in obj) {//call all\n                if (obj.hasOwnProperty(prop)) {\n                    callWatchers(obj, prop, action, newval, oldval);\n                }\n            }\n        }\n    };\n\n    // @todo code related to \"watchFunctions\" is certainly buggy\n    var methodNames = ['pop', 'push', 'reverse', 'shift', 'sort', 'slice', 'unshift', 'splice'];\n    var defineArrayMethodWatcher = function (obj, prop, original, methodName) {\n        defineProp(obj[prop], methodName, function () {\n            var response = original.apply(obj[prop], arguments);\n            watchOne(obj, obj[prop]);\n            if (methodName !== 'slice') {\n                callWatchers(obj, prop, methodName, arguments);\n            }\n            return response;\n        });\n    };\n\n    var watchFunctions = function (obj, prop) {\n\n        if ((!obj[prop]) || (obj[prop] instanceof String) || (!isArray(obj[prop]))) {\n            return;\n        }\n\n        for (var i = methodNames.length, methodName; i--;) {\n            methodName = methodNames[i];\n            defineArrayMethodWatcher(obj, prop, obj[prop][methodName], methodName);\n        }\n\n    };\n\n    var unwatchOne = function (obj, prop, watcher) {\n\n        for (var i = 0; i < obj.watchers[prop].length; i++) {\n            var w = obj.watchers[prop][i];\n            if (w == watcher) {\n                obj.watchers[prop].splice(i, 1);\n            }\n        }\n\n        removeFromLengthSubjects(obj, prop, watcher);\n    };\n\n    var loop = function () {\n\n        for (var i = 0; i < lengthsubjects.length; i++) {\n\n            var subj = lengthsubjects[i];\n\n            if (subj.prop === \"$$watchlengthsubjectroot\") {\n\n                var difference = getObjDiff(subj.obj, subj.actual);\n\n                if (difference.added.length || difference.removed.length) {\n                    if (difference.added.length) {\n                        watchMany(subj.obj, difference.added, subj.watcher, subj.level - 1, true);\n                    }\n\n                    subj.watcher.call(subj.obj, \"root\", \"differentattr\", difference, subj.actual);\n                }\n                subj.actual = clone(subj.obj);\n\n            } else {\n\n                var difference = getObjDiff(subj.obj[subj.prop], subj.actual);\n\n                if (difference.added.length || difference.removed.length) {\n                    if (difference.added.length) {\n                        for (var j = 0; j < subj.obj.watchers[subj.prop].length; j++) {\n                            watchMany(subj.obj[subj.prop], difference.added, subj.obj.watchers[subj.prop][j], subj.level -\n                                                                                                              1, true);\n                        }\n                    }\n\n                    callWatchers(subj.obj, subj.prop, \"differentattr\", difference, subj.actual);\n                }\n\n                subj.actual = clone(subj.obj[subj.prop]);\n\n            }\n\n        }\n\n    };\n\n    var pushToLengthSubjects = function (obj, prop, watcher, level) {\n\n        var actual;\n\n        if (prop === \"$$watchlengthsubjectroot\") {\n            actual = clone(obj);\n        } else {\n            actual = clone(obj[prop]);\n        }\n\n        lengthsubjects.push({\n            obj: obj,\n            prop: prop,\n            actual: actual,\n            watcher: watcher,\n            level: level\n        });\n    };\n\n    var removeFromLengthSubjects = function (obj, prop, watcher) {\n\n        for (var i = 0; i < lengthsubjects.length; i++) {\n            var subj = lengthsubjects[i];\n\n            if (subj.obj == obj && subj.prop == prop && subj.watcher == watcher) {\n                lengthsubjects.splice(i, 1);\n            }\n        }\n\n    };\n\n    setInterval(loop, 50);\n\n    WatchJS.watch = watch;\n    WatchJS.unwatch = unwatch;\n    WatchJS.callWatchers = callWatchers;\n\n    return WatchJS;\n\n}));\n/**\n * Created by guntars on 15/03/2016.\n */\ndefine('widget/parsers/addChildren',[], function() {\n    'use strict';\n    function addChildren(parent, child, data) {\n        if (child && child.name && parent) {\n            applyEvents(parent, child, data);\n            elReady(parent, child, data);\n            let handler = elOnChange(parent, child);\n            if (handler) {\n                handler(data);\n            }\n            parent.children[child.name] = child;\n            return child;\n        }\n    };\n\n    function elOnChange(context, child) {\n        if (context.elOnChange[child.name] !== undefined) {\n            return (data)=> context.elOnChange[child.name].call(context, child, data);\n        }\n        return false;\n    };\n\n    function elReady(context, child, data) {\n        if (context.elReady[child.name] !== undefined) {\n            context.elReady[child.name].call(context, child, data);\n        }\n    };\n\n    //Aplying Events to elements\n    //\n    //      @private applyEvents\n    //      @param {dom.Element} element\n    //      @param {Array} events\n    //      @param {Object} data\n    function applyEvents(context, child, data) {\n        var events = context.events[child.name];\n        if (events !== undefined && child.el !== undefined && child.data.type !== 'cp') {\n            events.forEach((event)=> {\n                context._events.push(child.on(event.name, event.action, context, data));\n            });\n        }\n    };\n\n\n    Object.assign(addChildren, {elOnChange, elReady, applyEvents});\n\n    return addChildren;\n});\n/**\n * Created by guntars on 11/11/14.\n */\ndefine('widget/parsers/applyAttribute',[\n    'watch',\n    './addChildren'\n], function(WatchJS, addChildren) {\n    var watch = WatchJS.watch;\n\n    function applyAttribute(context, childBinder, data) {\n        var bind = childBinder.data.tplSet.bind,\n            update = childBinder.data.tplSet.update;\n        if (bind) {\n            Object.keys(bind).forEach((bindItem)=> {\n                let key = bind[bindItem],\n                    dataItem = data[key];\n                switch (bindItem) {\n                    case 'class':\n                        let addClass = (className)=> {\n                                if (className !== undefined && className !== '') {\n                                    childBinder.addClass(className);\n                                    return className;\n                                } else {\n                                    return false;\n                                }\n                            },\n                            currClass = addClass(dataItem);\n\n                        if (update === true) {\n                            watch(data, key, ()=> {\n                                if (currClass) {\n                                    childBinder.removeClass(currClass);\n                                }\n                                currClass = addClass(data[key]);\n                            });\n                        }\n\n                        break;\n                    case 'checked':\n                        if (dataItem !== undefined) {\n                            childBinder.el.checked = dataItem;\n                        }\n                        if (update === true) {\n                            watch(data, key, ()=> childBinder.el.checked = data[key]);\n                        }\n                        break;\n                    case 'value':\n                        if (dataItem !== undefined) {\n                            childBinder.el.value = dataItem;\n                        }\n                        if (update === true) {\n                            watch(data, key, ()=> childBinder.el.value = data[key]);\n                        }\n                        break;\n                    case 'required':\n                        if (dataItem !== undefined) {\n                            childBinder.el.required = dataItem;\n                        }\n                        if (update === true) {\n                            watch(data, key, ()=> childBinder.el.required = data[key]);\n                        }\n                        break;\n                    case 'text':\n                        if (dataItem !== undefined) {\n                            childBinder.text(dataItem);\n                        }\n                        if (update === true) {\n                            watch(data, key, ()=> childBinder.text(data[key]));\n                        }\n                        break;\n                    default:\n                        if (dataItem !== undefined) {\n                            childBinder.setAttribute(bindItem, dataItem);\n                        }\n                        if (update === true) {\n                            watch(data, key, ()=> childBinder.setAttribute(bindItem, data[key]));\n                        }\n                }\n\n                if (data.text !== undefined && bindItem !== 'text') {\n                    childBinder.text(data.text);\n                    if (update === true) {\n                        if (bindItem !== 'text') {\n                            watch(data, 'text', ()=> childBinder.text(data.text));\n                        }\n                    }\n                }\n                if (update === true) {\n                    let handler = addChildren.elOnChange(context, childBinder);\n                    if (handler) {\n                        watch(data, key, ()=> handler(data));\n                    }\n                }\n\n            });\n        }\n\n    }\n\n    return applyAttribute;\n});\n/**\n * Created by guntars on 11/11/14.\n */\ndefine('widget/parsers/applyParent',[\n    'templating/dom',\n    './addChildren'\n], function(dom, addChildren) {\n\n\n    function setChildren(context, parentChildren = {}, data = {}) {\n        if (context) {\n            let elements = context.children;\n\n            if (elements) {\n                Object.keys(elements).forEach((name)=> {\n                    let add = true,\n                        child = elements[name],\n                        parentChild = parentChildren[name];\n                    if (parentChild !== undefined) {\n                        if (context.nodes[name] !== undefined) {\n                            context.nodes[name].call(context, child, parentChild, data);\n                        } else if (child !== undefined) {\n                            if (typeof parentChild === 'string') {\n                                dom.text(child, parentChild);\n                            }\n                            else {\n                                child = parentChild.run(child.el);\n                            }\n                        }\n\n                    } else if (context.nodes[name] !== undefined &&\n                        child.data.tplSet.noattach) {\n                        context.nodes[name].call(context, child, data);\n                        add = false;\n                    }\n                    if (add && child.elGroup.size > 0) {\n                        addChildren(context, child, data);\n                    }\n\n                });\n            }\n        }\n    }\n\n    return setChildren;\n});\n/**\n * Created by guntars on 10/10/2014.\n */\ndefine('widget/utils',[],function () {\n    function extend(obj) {\n        var type = typeof obj;\n        if (!(type === 'function' || type === 'object' && !!obj)) {\n            return obj;\n        }\n        var source, prop;\n        for (var i = 1, length = arguments.length; i < length; i++) {\n            source = arguments[i];\n            for (prop in source) {\n                obj[prop] = source[prop];\n            }\n        }\n        return obj;\n    };\n\n    function fnExtend(protoProps, staticProps) {\n        var parent = this;\n        var child;\n        if (protoProps && protoProps != null &&\n            hasOwnProperty.call(protoProps, 'constructor')) {\n            child = protoProps.constructor;\n        } else {\n            child = function () {\n                return parent.apply(this, arguments);\n            };\n        }\n\n        extend(child, parent, staticProps);\n\n        var Surrogate = function () {\n            this.constructor = child;\n        };\n        Surrogate.prototype = parent.prototype;\n        child.prototype = new Surrogate;\n        if (protoProps) {\n            extend(child.prototype, protoProps);\n        }\n\n        child.__super__ = parent.prototype;\n        return child;\n    };\n\n    function isString(obj) {\n        return toString.call(obj) === '[object String]';\n\n    }\n\n    function isObject(obj) {\n        return obj === Object(obj);\n    }\n\n    function isArray(obj) {\n        return (Array.isArray) ? Array.isArray(obj) : toString.call(obj) === '[object Array]';\n    }\n\n\n    return {\n        fnExtend: fnExtend,\n        // Extend a given object with all the properties in passed-in object(s).\n        extend:   extend,\n        // Check if it's String\n        isString: isString,\n        // Check if I't Object\n        isObject: isObject,\n        // Check if it's Array\n        isArray:  isArray\n    };\n});\n/**\n * Created by guntars on 11/11/14.\n */\ndefine('widget/parsers/setBinders',[],function () {\n\n    function setBinders(children, ignoreCP) {\n        let bindings = {};\n        Object.defineProperty(bindings, '__cp__', {\n            enumerable: false,\n            value:      []\n        });\n        Object.keys(children).forEach((key) => {\n            let el = children[key];\n            if (el && el.data && el.data.bind !== undefined && el.data.type !== 'cp') {\n                bindings[el.data.bind] = bindings[el.data.bind] || []\n                bindings[el.data.bind].push(el);\n            } else if (!ignoreCP && el.data.type === 'cp') {\n                bindings['__cp__'].push(el);\n            }\n        });\n        return bindings;\n    }\n\n    return setBinders;\n});\n/**\n * Created by guntars on 11/11/14.\n */\ndefine('widget/parsers/applyBinders',[\n    'templating/dom',\n    '../utils',\n    'watch',\n    './setBinders',\n    './addChildren',\n    './applyAttribute'\n], function(dom, utils, WatchJS, setBinders, addChildren, applyAttribute) {\n    var watch = WatchJS.watch,\n        unwatch = WatchJS.unwatch;\n\n    function parseBinder(context, objKey, obj, binder) {\n        if (binder !== undefined) {\n            var data = obj[objKey];\n\n            if (context.nodes[objKey]) {\n                context.nodes[objKey].call(context, binder, data);\n            } else {\n                if (!utils.isArray(data) && !utils.isObject(data)) {\n                    let element = binder.run(true);\n                    element.text(data);\n                    addChildren.applyEvents(context, element, data);\n                    addChildren.elReady(context, element, data);\n                    let handler = addChildren.elOnChange(context, element);\n                    if (handler) {\n                        handler(data);\n                    }\n\n\n                    if (element.data.tplSet.update) {\n                        watch(obj, objKey, () => {\n                            element.text(obj[objKey]);\n                            let handler = addChildren.elOnChange(context, element);\n                            if (handler) {\n                                handler(obj[objKey]);\n                            }\n                        });\n                    }\n                } else if (utils.isArray(data)) {\n\n                    let bindedData = [],\n                        addItem = (item, index)=> {\n                            let isString = false;\n                            if (!utils.isArray(item) && !utils.isObject(item)) {\n                                isString = true;\n                            }\n                            let element = binder.run(true, index);\n                            if (isString) {\n                                element.text(item);\n                            }\n\n                            bindedData.push({\n                                binder: element,\n                                data:   item\n                            });\n\n                            applyAttribute(context, element, item);\n                            addChildren.applyEvents(context, element, item);\n                            addChildren.elReady(context, element, item);\n\n                            let handler = addChildren.elOnChange(context, element);\n                            if (handler) {\n                                handler(item);\n                            }\n\n                            if (element.children) {\n                                element.bindings = setBinders(element.children);\n                                applyBinders(context, item, element);\n                            }\n\n\n                        };\n\n                    data.forEach(addItem);\n\n                    let update = binder.data.tplSet.update;\n                    if (update) {\n                        let removeMethodNames = ['pop', 'shift', 'splice'],\n                            insertMethodNames = ['push', 'unshift'],\n                            sortingMethodNames = ['reverse', 'sort'];\n                        watch(obj, objKey, (prop, action, newValue, oldValue)=> {\n                            let clonedData = bindedData.slice(0);\n                            if (oldValue === undefined && insertMethodNames.indexOf(action) !== -1) {\n                                let filter = clonedData.filter((item)=> item.data === newValue[0]);\n\n                                if (filter.length === 0) {\n                                    addItem(newValue[0], (action === 'unshift') ? 0 : clonedData.length);\n                                }\n                            } else if (removeMethodNames.indexOf(action) !== -1) {\n                                clonedData.forEach((binder)=> {\n                                    if (obj[objKey].indexOf(binder.data) === -1) {\n                                        binder.binder.remove();\n                                        bindedData.splice(bindedData.indexOf(binder), 1);\n                                    }\n                                });\n\n                                if (action === 'splice') {\n                                    let vals = Array.prototype.slice.call(newValue, 2);\n                                    if (vals && vals.length > 0) {\n                                        vals.forEach((val)=> {\n                                            let index = obj[objKey].indexOf(val);\n                                            if (index !== -1) {\n                                                addItem(val, index);\n                                            }\n                                        });\n                                    }\n                                }\n                            } else if (sortingMethodNames.indexOf(action) !== -1) {\n                                data.forEach((value, index)=> {\n                                    let element = clonedData.filter(item=>item.data === value)[0];\n                                    bindedData.splice(index, 0, bindedData.splice(bindedData.indexOf(element), 1)[0]);\n                                    element.binder.changePosition(index);\n\n                                });\n                            }\n\n                        });\n                    }\n\n\n                } else if (utils.isObject(data)) {\n                    let element = binder.run(data);\n                    if (element.data.type !== 'cp') {\n                        applyAttribute(context, element, data);\n                        addChildren.applyEvents(context, element, data);\n                        addChildren.elReady(context, element, data);\n                        let handler = addChildren.elOnChange(context, element);\n                        if (handler) {\n                            handler(data);\n                        }\n                        if (element.children) {\n                            element.bindings = setBinders(element.children);\n                            applyBinders(context, data, element);\n                        }\n                    }\n\n\n                }\n            }\n        }\n\n    };\n\n    function applyBinders(child, obj, instance) {\n        let binders = instance.bindings;\n        if (binders) {\n            if (binders['__cp__'].length > 0) {\n                binders['__cp__'].forEach(binder=> {\n                    let component = binder.run(obj);\n                    component.setContext(child.context);\n                    addChildren.elReady(child, component, obj);\n                    let handler = addChildren.elOnChange(child, component);\n                    if (handler) {\n                        handler(obj);\n                    }\n\n                });\n            }\n            let keys = Object.keys(binders);\n            if (obj && keys.length > 0) {\n                keys.forEach((binderKey) => {\n                    if (obj[binderKey] !== undefined) {\n                        binders[binderKey].forEach(binder=>parseBinder(child, binderKey, obj, binder));\n                    } else {\n                        let fn = (prop, action, newValue, oldValue) => {\n                            if (newValue !== undefined && oldValue === undefined) {\n                                binders[binderKey].forEach(binder=>parseBinder(child, binderKey, obj, binder));\n                                unwatch(obj, binderKey, fn);\n                            }\n                        }\n                        watch(obj, binderKey, fn, 0);\n                    }\n                });\n            }\n        }\n    }\n\n    return applyBinders;\n});\n/**\n * Created by guntars on 11/11/14.\n */\ndefine('widget/parsers/setRoutes',[\n    'templating/dom'\n], function(dom) {\n\n    const STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg,\n        ARGUMENT_NAMES = /(?:^|,)\\s*([^\\s,=]+)/g;\n\n    function getArgs(func) {\n        let fnStr = func.toString().replace(STRIP_COMMENTS, ''),\n            argsList = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')),\n            result = argsList.match(ARGUMENT_NAMES);\n        return (result === null) ? [] : result.map(item => item.replace(/[\\s,]/g, ''));\n    }\n\n    function destroyComponent(cp) {\n        if (cp.remove !== undefined) {\n            cp.remove();\n        }\n\n    }\n\n    function applyToChildren(children, cb) {\n        if (children !== undefined) {\n            Object.keys(children).forEach((name) => {\n                let instance = children[name];\n                if (!applyToGroup(instance, cb)) {\n                    cb(instance);\n                }\n            });\n        }\n    }\n\n    function applyToGroup(child, cb) {\n        if (child.elGroup && child.elGroup.size > 0) {\n            child.elGroup.forEach((childInstance) => {\n                cb(childInstance);\n            });\n            return true;\n        }\n        return false;\n    }\n\n\n    function matchRoute(child, context) {\n        if (child.setContext) {\n            child.setContext(context);\n        } else {\n            let route = (child.data !== undefined) ? child.data.route : undefined;\n            if (route !== undefined && child.data.type === 'rt') {\n                let id,\n                    match = context.match,\n                    active = context.active,\n                    matches = match(route),\n                    oldParams = context.oldParams = context.oldParams || false,\n                    routesQueried = context.routesQueried = context.routesQueried || [];\n\n                matches.to((...args) => {\n                    let params = args.pop();\n                    id = (args.length > 0) ? params.getLocation() + '_' + args.join('_') : undefined;\n\n                    if (!applyToGroup(child, instance => dom.attach(instance))) {\n                        let childInstance = child.run(true);\n                        applyToChildren(childInstance.children, instance => {\n                            if (instance) {\n                                //TODO: maybe not need Object.assign\n                                match(route, match => matchRoute(instance, Object.assign({}, context, {\n                                    match,\n                                    active\n                                })));\n                            }\n                        });\n                    }\n                    applyToGroup(child, (childInstance) => {\n                        applyToChildren(childInstance.children, instance => {\n                            if (instance && instance.to) {\n                                instance.to(...args.concat(params));\n                            }\n                        });\n                    });\n                });\n\n                matches.leave(done => {\n                    routesQueried = [];\n                    let items = 0,\n                        stopped = false;\n                    applyToGroup(child, (childInstance) => {\n                        let finish = () => {\n                                if (!id) {\n                                    dom.detach(childInstance);\n                                } else {\n                                    destroyComponent(childInstance);\n                                }\n                            },\n                            close = (close = true) => {\n                                if (close) {\n                                    items--;\n                                } else {\n                                    stopped = true;\n                                    done(false);\n                                }\n\n                                if (items === 0 && !stopped) {\n                                    active.set(childInstance, finish);\n                                    done(true);\n                                }\n\n                            };\n\n                        applyToChildren(childInstance.children, instance => {\n                            if (instance && instance.leave !== undefined) {\n                                let args = getArgs(instance.leave);\n                                if (args.length > 0) {\n                                    items++\n                                }\n                                instance.leave(close);\n                            }\n                        });\n\n                        if (items === 0) {\n                            active.set(childInstance, finish);\n                            done(true);\n                        }\n                    });\n                });\n\n                matches.query(params => {\n                    //TODO: currently is a hack, later need better solution;\n                    let query = JSON.stringify(params.getQuery());\n                    if (oldParams !== query) {\n                        oldParams = query;\n                        routesQueried = [];\n                    }\n                    applyToGroup(child, (childInstance) => {\n                        applyToChildren(childInstance.children, (instance) => {\n                            if (instance && instance.query !== undefined && routesQueried.indexOf(instance) === -1) {\n                                instance.query(params);\n                                routesQueried.push(instance);\n                            }\n                        });\n                    });\n                });\n                applyToGroup(child, instance => instance._activeRoute = matches);\n\n            } else if (child.children !== undefined && ['cp'].indexOf(child.data.type) === -1) {\n                applyToChildren(child.children, instance => matchRoute(instance, context));\n            }\n        }\n    }\n\n    function setRoutes(children, context) {\n        applyToChildren(children, child => matchRoute(child, context));\n\n    };\n\n    return setRoutes;\n})\n;\n/**\n * Created by guntars on 15/03/2016.\n */\ndefine('widget/parsers/applyElement',[\n    'templating/dom'\n], function (dom) {\n    //Applying dom.Element to template elements.\n    //\n    //      @private applyElement\n    //      @param {Object} elements\n    function applyElement(elements = {}, params) {\n        let instances = {};\n        Object.keys(elements).forEach((key)=> {\n            let instance = elements[key];\n            if (typeof instance !== 'string') {\n                let element = instance.elGroup.first;\n                if (element) {\n                    instances[key] = element;\n                    if (element instanceof dom.Element === true &&\n                        (['pl'].indexOf(element.data.type) !== -1)) {\n                        let bind = element.data.tplSet.bind;\n                        if (bind) {\n                            Object.keys(bind).forEach((attr)=> {\n                                if (params[bind[attr]] !== undefined) {\n                                    if (attr !== 'class') {\n                                        element.setAttribute(attr, params[bind[attr]]);\n                                    } else {\n                                        element.addClass(params[bind[attr]]);\n                                    }\n                                }\n                            });\n                        }\n\n                    }\n                } else {\n                    instances[key] = instance;\n                }\n            }\n        });\n\n        return instances;\n    }\n\n    return applyElement;\n});\n/**\n * Created by guntars on 10/10/2014.\n */\n/*globals define*/\n//## widget/Constructor Class\n// This is App Presenter class parse data, and apply to template. Also binding events to Element.\n// Basic Usage example\n//\n//      define([\n//          'templating/parser!widget.html',\n//          'widget/Constructor'\n//      ], function (template, Constructor) {\n//          var Widget = Constructor.extend({\n//              template: template\n//          });\n//          return Widget;\n//      });\ndefine('widget/Constructor',[\n    'require',\n    'templating/Decoder',\n    'templating/dom',\n    './Mediator',\n    './parsers/applyAttribute',\n    './parsers/applyParent',\n    './parsers/applyBinders',\n    './parsers/setBinders',\n    './parsers/setRoutes',\n    './parsers/applyElement',\n    './parsers/addChildren'\n], function(require,\n            Decoder,\n            dom,\n            Mediator,\n            applyAttribute,\n            applyParent,\n            applyBinders,\n            setBinders,\n            setRoutes,\n            applyElement,\n            addChildren) {\n    'use strict';\n\n\n    function destroy(instance) {\n        let keys = Object.keys(instance);\n        if (keys.length > 0) {\n            keys.forEach((key) => {\n                if (key !== 'root') {\n                    let children = instance[key];\n                    if (children.elGroup !== undefined && children.elGroup.size > 0) {\n                        children.elGroup.forEach(child => {\n                            if (child !== undefined && child.remove !== undefined) {\n                                child.remove(true);\n                            }\n                        })\n                    }\n                }\n            });\n        }\n    }\n\n    // Constructor Class\n    //\n    //      @Constructor\n    //      @param {Object} data\n    //      @param {Object} children\n    //      @param {Object} dataSet\n    class Constructor {\n        static extend(options = {}) {\n            class Surrogate extends Constructor {\n            }\n            Object.assign(Surrogate.prototype, options);\n            return Surrogate;\n        };\n\n        constructor(options = {}, parentChildren, dataSet = {}, node) {\n            //TODO: for Backwards compatability later need to remove\n            this.instance = this;\n            this._events = [];\n            this._globalEvents = [];\n            this._parentChildren = parentChildren;\n            this._options = options;\n            this._rendered = false;\n            this._arguments = Array.from(arguments);\n            this._dataSet = dataSet;\n\n            this.eventBus = new Mediator(this);\n\n            if (node !== undefined && node.name !== undefined) {\n                this.name = node.name;\n            }\n            this.beforeInit(...this._arguments);\n        };\n\n        ready(el) {\n            this.el = el;\n        }\n\n        setContext(context) {\n            if (!this.context) {\n                this.context = context;\n                if (!this.async) {\n                    this.render();\n                }\n                this.init(...this._arguments);\n            }\n        };\n\n        set context(context) {\n            if (!this.data) {\n                let keys = (this._dataSet) ? Object.keys(this._dataSet) : [],\n                    contextData = (keys.length > 0) ? this._dataSet : context.data;\n                if (contextData) {\n                    this.data = contextData[this._options.bind] || contextData;\n                }\n            }\n            context.match((match) => {\n                if (this.match) {\n                    this.match(match);\n                }\n\n                this._context = Object.assign({\n                    match: match\n                }, context);\n            });\n        }\n\n        get context() {\n            return this._context;\n        };\n\n        // method render called manually if flag async is true;\n        //\n        //      @method render\n        render(data) {\n            if (!this._rendered) {\n                if (this.template) {\n                    if (data) {\n                        this.data = data;\n                    }\n                    let options = this._options,\n                        parentChildren = this._parentChildren,\n                        decoder = new Decoder(this.template),\n                        template = decoder.render(this.data);\n                    if (this.el) {\n                        let parent = this.el.parentNode;\n                        if (parent) {\n                            parent.replaceChild(template.fragment, this.el);\n                        }\n                        if (this.elGroup && this.elGroup.get(this.el)) {\n                            this.elGroup.delete(this.el);\n                            this.el = template.fragment;\n                            this.elGroup.set(template.fragment, this);\n                        }\n                    } else {\n                        this.el = template.fragment;\n                    }\n\n\n                    this.root = new dom.Element(template.fragment, {\n                        name: 'root',\n                        data: {}\n                    });\n\n                    this.children = applyElement(template.children, options);\n                    applyParent(this, parentChildren, this.data);\n                    this.bindings = setBinders(this.children, true);\n\n                    if (this.data) {\n                        this.applyBinders(this.data, this);\n                    }\n\n                    setRoutes(this.children, this.context);\n                    addChildren(this, this.root);\n                    this.rendered(...this._arguments);\n                    this._rendered = true;\n                } else {\n                    let HTMLelement = document.createElement('div');\n                    this.root = new dom.Element(HTMLelement, {\n                        name: 'root',\n                        data: {}\n                    });\n                    if (this.el) {\n                        let parent = this.el.parentNode;\n                        if (parent) {\n                            parent.replaceChild(HTMLelement, this.el);\n                        }\n                    }\n                    this.el = HTMLelement;\n                    this.children = {};\n                    addChildren(this, this.root);\n\n                    this.rendered(...this._arguments);\n                    this._rendered = true;\n                }\n            }\n        };\n\n        // Running before Constructor is initialised\n        //\n        //      @method beforeInit\n        //      @param {Object} data (comes from template data attributes)\n        //      @param {Object} children (comes placeholder content\n        //      from template)\n        //      @param {Object} datatSet (data passing if component is\n        //      in template binders)\n        beforeInit(data, children, dataSet) {\n        };\n\n        // Running when Constructor is initialised\n        //\n        //      @method beforeInit\n        //      @param {Object} data (comes from template data attributes)\n        //      @param {Object} children (comes placeholder content\n        //      from template)\n        //      @param {Object} datatSet (data passing if component is\n        //      in template binders)\n        init(data, children, dataSet) {\n        };\n\n        // Running when widget is rendered\n        //\n        //      @method rendered\n        //      @param {Object} data (comes from template data attributes)\n        //      @param {Object} children (comes placeholder content\n        //      from template)\n        //      @param {Object} datatSet (data passing if component is\n        //      in template binders)\n        rendered(data, children, dataSet) {\n        };\n\n\n        // Load external css style for third party modules.\n        //\n        //      @method loadCss\n        //      @param {string} url\n        loadCss(url) {\n            if (this.context._cssReady.indexOf(url) === -1) {\n                this.context._cssReady.push(url);\n                let linkRef = document.createElement(\"link\");\n                linkRef.setAttribute(\"rel\", \"stylesheet\")\n                linkRef.setAttribute(\"type\", \"text/css\")\n                linkRef.setAttribute(\"href\", url)\n                if (typeof linkRef != \"undefined\") {\n                    document.getElementsByTagName(\"head\")[0].appendChild(linkRef);\n                }\n            }\n\n        };\n\n        // Remove from parentNode\n        //\n        //      @method detach\n        detach() {\n            if (!this._placeholder) {\n                this._placeholder = document.createElement(this.el.tagName);\n            }\n            if (!this._parent) {\n                this._parent = this.el.parentNode;\n            }\n\n            if (this.el && this._parent) {\n                this._parent.replaceChild(this._placeholder, this.el)\n            }\n\n        };\n\n        // Add to parentNode\n        //\n        //      @method attach\n        attach() {\n            if (this._placeholder && this._parent) {\n                this._parent.replaceChild(this.el, this._placeholder)\n            }\n        };\n\n        // Executes when Component is destroyed\n        //\n        //      @method applyBinders\n        onDestroy() {\n\n        };\n\n        //Removing widget from Dom\n        //\n        //      @method destroy\n        destroy() {\n            this.onDestroy();\n            this.eventBus.clear();\n            while (this._events.length > 0) {\n                this._events.shift().remove();\n            }\n\n            while (this._globalEvents.length > 0) {\n                this._globalEvents.shift().remove();\n            }\n\n            destroy(this.children);\n\n            if (this.elGroup !== undefined && this.el !== undefined) {\n                this.elGroup.delete(this.el);\n            }\n            if (this.root && this.root.remove) {\n                this.root.remove();\n            }\n\n            delete this.el;\n\n        };\n\n        remove(...args) {\n            this.destroy(...args);\n        }\n\n        // Adding Childrens manually after initialization.\n        //  @method setChildren\n        //  @param {Element} el\n        //  @param {Object} data\n        //TODO: need to write tests for async operations.\n        setChildren(el, data) {\n            let name = el.data.name,\n                instance = this.children[name];\n\n            if (instance !== undefined && instance.el !== undefined) {\n                instance.remove();\n            }\n\n            let newInstance = el.run(data || true);\n            if (newInstance.setContext) {\n                newInstance.setContext(this.context);\n            }\n            addChildren(this, newInstance, data);\n            return newInstance;\n\n        };\n\n        // Adding Dynamic components\n        // @method addComponent\n        // @param {String} name\n        // @param {Constructor} Component\n        // @param {Element} container\n        // @param {Object} data (data attributes)\n        // @param {Object} children\n        // @param {Object} dataSet (Model for bindings)\n        addComponent(Component, options) {\n            let name = options.name,\n                container = options.container;\n\n            if (name === undefined) {\n                throw ('you have to define data.name for component.')\n            } else if (container === undefined) {\n                throw ('You have to define container for component.')\n            } else if (this.children[name] !== undefined) {\n                throw ('Component using name:' + name + '! already defined.')\n            }\n            let component = this.setComponent(Component, options),\n                instance = component.run(options.container);\n            instance.setContext(this.context);\n            this.children[name] = instance;\n            return instance;\n        };\n\n        setComponent(Component, options) {\n            let instance = {\n                name: options.name,\n                data: {\n                    tag:  'div',\n                    type: 'cp'\n                },\n                run:  (container) => {\n                    options.appContext = this.context;\n                    let cp = new Component(options, options.children, options.data),\n                        el = document.createElement('div');\n                    el.setAttribute('style', 'display:none;');\n                    cp.ready(el);\n\n                    if (container instanceof HTMLElement === true) {\n                        container.parentNode.replaceChild(cp.el, container);\n                    } else if (container.el !== undefined && options.pos !== undefined) {\n                        dom.insertBefore(container, cp, options.pos);\n                    } else if (container.el !== undefined) {\n                        dom.append(container, cp);\n                    }\n                    return cp;\n                }\n            }\n            return instance;\n        }\n\n        // Running when Constructor is initialised\n        //\n        //      @method applyBinders\n        //      @param {Object} data (comes from template data attributes)\n        //      @param {Object} children (comes placeholder content\n        //      from template)\n        //      @param {Object} datatSet (data passing if component is\n        //      in template binders)\n        // Applying Binders manually, if use nodes function\n        //\n        //      @method applyBinders\n        applyBinders(...args) {\n            return applyBinders(this, ...args);\n        }\n    }\n    Object.assign(Constructor.prototype, {\n        // `nodes` Object override default methods to Elements.\n        // Usage Example\n        //\n        //      nodes: {\n        //          listItem: function (el, parent, data) {\n        //              el.add(parent);\n        //              el.text(data);\n        //          }\n        //      }\n        nodes: {},\n\n        // `events` Object applying events to elements\n        // You can apply more than one event on element\n        // Usage Example\n        //\n        //      events: {\n        //          delete: [\n        //              {\n        //                  name: 'click',\n        //                  action: function () {\n        //                      this.data.remove = true\n        //                      this.destroy();\n        //                  }\n        //              }\n        //          ]\n        events:     {},\n        // Applying extra methods to Element\n        // Usage Example\n        //\n        //      elReady: {\n        //          links: function (el, data) {\n        //              if(data.class==='active'){\n        //                  el.addClass('active');\n        //              }\n        //          }\n        //      },\n        elReady:    {},\n        // Applying methods to element every time when data is changed for Element\n        // Usage Example\n        //\n        //      elOnChange: {\n        //          links: function (el, data) {\n        //              if(data.class==='active'){\n        //                  el.addClass('active');\n        //              }\n        //          }\n        //      },\n        elOnChange: {}\n    });\n\n\n    return Constructor;\n});\n"]}